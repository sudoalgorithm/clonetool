[{"id":"bde43094.4c07f8","type":"tab","label":"UI Components","disabled":false,"info":""},{"id":"466cbb18.786edc","type":"tab","label":"Secrets","disabled":false,"info":""},{"id":"ab18adea.954e6","type":"tab","label":"ServiceAccount","disabled":false,"info":""},{"id":"374b4ce7.896c44","type":"tab","label":"SecurityContextConstraint","disabled":false,"info":""},{"id":"fba5569c.aa544","type":"tab","label":"Roles","disabled":false,"info":""},{"id":"243161c.142f31e","type":"tab","label":"RoleBindings","disabled":false,"info":""},{"id":"6171a812.b668a","type":"tab","label":"Namespace Related APIs","disabled":false,"info":""},{"id":"2d736774.e1987","type":"tab","label":"CustomResourceDefinition","disabled":false,"info":""},{"id":"ee2cb780.64d2f8","type":"tab","label":"ConfigMaps","disabled":false,"info":""},{"id":"1514bb34.595edd","type":"tab","label":"PersistentVolumes","disabled":false,"info":""},{"id":"65f4d4c1.1b0de4","type":"tab","label":"PersistentVolumeClaims","disabled":false,"info":""},{"id":"1629fa05.cf1a1e","type":"tab","label":"Deployments","disabled":false,"info":""},{"id":"1f666544.2821c3","type":"tab","label":"Statefulsets","disabled":false,"info":""},{"id":"25ba6d98.0a678a","type":"tab","label":"Services","disabled":false,"info":""},{"id":"f569223c.ceccb8","type":"tab","label":"Jobs","disabled":false,"info":""},{"id":"69c23d28.c8568c","type":"tab","label":"CronJobs","disabled":false,"info":""},{"id":"cc1ec809.b0912","type":"tab","label":"Clone data","disabled":false,"info":""},{"id":"fe6bf964.cbd89","type":"tab","label":"Extract All Metadata","disabled":false,"info":""},{"id":"18d4cd67.9cdadb","type":"tab","label":"Configuration","disabled":false,"info":""},{"id":"c890f6c4.5f7ee","type":"tab","label":"Reinstate data","disabled":false,"info":""},{"id":"2867c746.ca6108","type":"tab","label":"Clone Repository","disabled":false,"info":""},{"id":"9db89797.6a1e78","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"9c09ae69.a5cbc","type":"subflow","name":"HASS Websocket","info":"","in":[{"x":580,"y":160,"wires":[{"id":"d414f32a.97f0f8"}]}],"out":[{"x":1260,"y":20,"wires":[{"id":"67efc872.d5de7","port":0}]},{"x":1120,"y":60,"wires":[{"id":"ba2de749.6c5c58","port":1}]},{"x":1120,"y":100,"wires":[{"id":"ba2de749.6c5c58","port":2}]},{"x":1260,"y":140,"wires":[{"id":"cd3a3be5.bbd29","port":0}]},{"x":780,"y":160,"wires":[{"id":"fe188849.261c98","port":0}]}]},{"id":"f4c375ea.ab33c","type":"websocket-client","z":"","path":"ws://YOUR_HASS_IP:8123/api/websocket","wholemsg":"false"},{"id":"90a015c3.9a2b3","type":"kubernetes-client-config","z":"","name":"OCP Cluster Configuration"},{"id":"648c0d92.7f068c","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Cloner theme","default":"#4B7930","baseColor":"#1b7de3","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":true},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":true},"page-backgroundColor":{"value":"#fafafa","edited":true},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"250657db.9ba308","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"6","collapse":false},{"id":"2a216d27.a460fa","type":"ui_tab","z":"","name":"Explore","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"9e369001.600718","type":"ui_group","z":"","name":"Default","tab":"2a216d27.a460fa","order":1,"disp":false,"width":"27","collapse":false},{"id":"9cbf745a.45f2f","type":"ui_tab","z":"","name":"Clone","icon":"dashboard","order":3,"disabled":false,"hidden":false},{"id":"6aac43c3.4b789c","type":"ui_group","z":"","name":"Default","tab":"","order":1,"disp":false,"width":"26","collapse":false},{"id":"82bd631c.dc015","type":"ui_group","z":"","name":"Default","tab":"9cbf745a.45f2f","order":3,"disp":false,"width":26,"collapse":false},{"id":"1d7776e4.e8c931","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":1,"width":3,"height":1},{"id":"38721e71.22db52","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":3,"width":3,"height":1},{"id":"ad5de824.04cf1","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":4,"width":3,"height":1},{"id":"4bc053ed.9b847c","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":5,"width":3,"height":1},{"id":"26ab69b5.a56486","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":6,"width":3,"height":1},{"id":"77d4061.3b74bf8","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":7,"width":3,"height":1},{"id":"7797af11.e6bef","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":8,"width":3,"height":1},{"id":"9e7f1631.80a268","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":9,"width":3,"height":1},{"id":"de221f22.d2022","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":10,"width":3,"height":1},{"id":"561d0746.97a81","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":11,"width":3,"height":1},{"id":"667303c3.43ed4c","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":12,"width":3,"height":1},{"id":"7de05d5d.f84c9c","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":13,"width":3,"height":1},{"id":"a87d7447.9306d8","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":14,"width":3,"height":1},{"id":"f7f62857.ab0f88","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":15,"width":3,"height":1},{"id":"a1f7362.04ff648","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":16,"width":3,"height":1},{"id":"f593fc06.26369","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":17,"width":3,"height":1},{"id":"b9d3c87f.a6b21","type":"ui_spacer","name":"spacer","group":"9e369001.600718","order":18,"width":3,"height":1},{"id":"28abd0c6.387a","type":"ui_group","z":"","name":"Group 1","tab":"fcb23751.b56448","order":1,"disp":false,"width":"27","collapse":false},{"id":"fcb23751.b56448","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"525ecd06.311884","type":"kubernetes-client-config","z":"","name":"TEST"},{"id":"5fd94027.522448","type":"ui_group","z":"","name":"Global Variables","tab":"91212548.4a2dc","order":1,"disp":false,"width":"16","collapse":false},{"id":"91212548.4a2dc","type":"ui_tab","z":"","name":"Configuration","icon":"dashboard","order":6,"disabled":false,"hidden":false},{"id":"39d4dab4.2427fe","type":"ui_group","z":"","name":"Log Live2","tab":"","order":2,"disp":true,"width":"12"},{"id":"4db53485.59dd24","type":"ui_group","z":"","name":"Default","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"812fd623.7e505","type":"cos-config","z":"","apiKeyId":"fAdni7OPaBPmGHrGH8aqRO6bVVqxc9LzDk6Z8p6erxj_","location":"us-east","ibmAuthEndpoint":"https://s3.us-east.cloud-object-storage.appdomain.cloud/","endpoint":"s3.us-east.objectstorage.softlayer.net","serviceInstanceId":"aedad8bd-4a55-4bd0-9841-ed2de8b206cf","hmac":true,"accesskeyid":"825cb82111ed4bae8db612e49f7f271a","accesskey":"265703aa137afae6097056a8a37167026299be4eb4f26e10","name":"Clone COS"},{"id":"cd6c2783.041958","type":"ui_group","z":"","name":"Drive List","tab":"","order":3,"disp":true,"width":"12","collapse":true},{"id":"1034e93f.376edf","type":"ui_group","z":"","name":"File List","tab":"","order":4,"disp":true,"width":"6","collapse":true},{"id":"f3ba291f.15b57","type":"ui_group","z":"","name":"Clone Repository","tab":"5f78ec86.6866e4","order":1,"disp":false,"width":28,"collapse":false},{"id":"5f78ec86.6866e4","type":"ui_tab","z":"","name":"Clone Repository Management (IBM COS)","icon":"dashboard","order":5,"disabled":false,"hidden":false},{"id":"b7693d2e.3c913","type":"ui_tab","z":"","name":"Reinstate","icon":"dashboard","order":4,"disabled":false,"hidden":false},{"id":"6effb9d.f44edc8","type":"ui_group","z":"","name":"Group 1","tab":"b7693d2e.3c913","order":2,"disp":false,"width":26,"collapse":false},{"id":"b99522c6.e1abe","type":"ui_spacer","name":"spacer","group":"6effb9d.f44edc8","order":8,"width":26,"height":1},{"id":"80186c11.c75688","type":"ui_spacer","name":"spacer","group":"6effb9d.f44edc8","order":12,"width":26,"height":1},{"id":"63a044c1.2427dc","type":"ui_spacer","name":"spacer","group":"6effb9d.f44edc8","order":24,"width":26,"height":1},{"id":"f071369f.ed2b88","type":"ui_group","z":"","name":"Default","tab":"","order":1,"disp":false,"width":"24","collapse":false},{"id":"dcf53cca.6c2cf8","type":"ui_group","z":"","name":"Default","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"360c1140.20c4e6","type":"ui_group","z":"","name":"Richer Table","tab":"","order":1,"disp":true,"width":"8","collapse":false},{"id":"ae8bfe7.5bb308","type":"ui_group","z":"","name":"mess","tab":"","order":2,"disp":true,"width":"6"},{"id":"6099df39.0eb95","type":"mqtt-broker","z":"","broker":"192.168.1.40","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"d6e8b9e7.8ae3d","type":"ui_group","z":"","name":"HT","tab":"","order":2,"disp":true,"width":"6"},{"id":"9debd222.4aeb58","type":"ui_spacer","name":"spacer","group":"5fd94027.522448","order":2,"width":8,"height":1},{"id":"d38893f8.13bed8","type":"ui_group","z":"","name":"flowtest","tab":"","order":1,"disp":true,"width":"12","collapse":false},{"id":"9236c902.9e3858","type":"ui_group","z":"","name":"Main","tab":"","order":3,"disp":false,"width":"8","collapse":false},{"id":"8bff0c0c.25b938","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":1,"width":28,"height":1},{"id":"d64c34ee.029328","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":2,"width":6,"height":1},{"id":"5f8720a0.1e86f","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":4,"width":2,"height":1},{"id":"12ff3402.4ba644","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":6,"width":2,"height":1},{"id":"445527ba.a1615","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":8,"width":6,"height":1},{"id":"308f4025.cc06b","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":9,"width":6,"height":1},{"id":"12858a4d.06069e","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":11,"width":6,"height":1},{"id":"6c1c91b3.83a4e8","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":12,"width":6,"height":1},{"id":"33cfbfa1.9bcba8","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":14,"width":6,"height":1},{"id":"e45c0edb.d2542","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":15,"width":6,"height":1},{"id":"7d3decc6.391754","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":17,"width":6,"height":1},{"id":"2f7fcef2.0eedea","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":18,"width":6,"height":1},{"id":"4cc0c044.123e1","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":19,"width":6,"height":1},{"id":"a3207114.0b07f","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":20,"width":6,"height":1},{"id":"759cc14e.849758","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":21,"width":6,"height":1},{"id":"5726ac8e.b2ca3c","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":22,"width":6,"height":1},{"id":"c7dbbd41.8beb78","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":23,"width":6,"height":1},{"id":"b60081db.71336","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":24,"width":6,"height":1},{"id":"4be41d21.36d9dc","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":25,"width":6,"height":1},{"id":"83bad8b2.fc786","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":26,"width":6,"height":1},{"id":"c5a75223.f8c048","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":27,"width":6,"height":1},{"id":"99695d1e.a49e68","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":28,"width":6,"height":1},{"id":"c3b78686.ee9b9","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":29,"width":6,"height":1},{"id":"a6245b26.af7b2","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":30,"width":6,"height":1},{"id":"a7091db4.54e6c","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":31,"width":6,"height":1},{"id":"7531f931.59a3e8","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":32,"width":6,"height":1},{"id":"173c1a1c.ad680e","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":33,"width":6,"height":1},{"id":"1b4ebc56.bcaabc","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":34,"width":6,"height":1},{"id":"f35d3343.8c2c58","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":36,"width":6,"height":1},{"id":"c2c36c18.a1ab18","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":37,"width":6,"height":1},{"id":"307c8019.297bd8","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":38,"width":6,"height":1},{"id":"818be45d.5d7db","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":39,"width":6,"height":1},{"id":"4253535f.2e0aec","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":40,"width":6,"height":1},{"id":"d2a8800.daaf38","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":41,"width":6,"height":1},{"id":"1be009.cb4ce7f7","type":"ui_spacer","name":"spacer","group":"f3ba291f.15b57","order":42,"width":6,"height":1},{"id":"28f5dc15.1670bc","type":"ui_group","z":"","name":"Group 1","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"dadbd126.536f88","type":"ui_group","name":"Group 2","tab":"","order":1,"disp":true,"width":6},{"id":"538095a8.8a9f74","type":"ui_group","z":"","name":"ROKS","tab":"9cbf745a.45f2f","order":1,"disp":false,"width":"26","collapse":false},{"id":"f3c64a64.20db18","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":2,"width":2,"height":1},{"id":"113c2d5c.644bd3","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":4,"width":2,"height":1},{"id":"c87ba060.f46c1","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":12,"width":1,"height":1},{"id":"883d9aa4.1acb18","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":13,"width":1,"height":1},{"id":"8f2bbece.6b5018","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":14,"width":1,"height":1},{"id":"9519f712.7e86c","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":15,"width":1,"height":1},{"id":"6ea512c6.c31ac4","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":16,"width":1,"height":1},{"id":"4a349f3c.693c58","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":17,"width":1,"height":1},{"id":"3e4a9f2a.b7d9a8","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":18,"width":1,"height":1},{"id":"d8ef9585.0dbff8","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":19,"width":1,"height":1},{"id":"63bcc14d.26ab","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":20,"width":1,"height":1},{"id":"506d5976.f327","type":"ui_spacer","name":"spacer","group":"82bd631c.dc015","order":21,"width":26,"height":1},{"id":"660fd9f.cb2d9a8","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":1,"width":27,"height":1},{"id":"8767a8f6.e13498","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":3,"width":18,"height":1},{"id":"c4a2e7e1.db6e5","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":5,"width":5,"height":1},{"id":"5644ec80.ce41f4","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":6,"width":5,"height":1},{"id":"2705e0c.7fed6a","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":7,"width":5,"height":1},{"id":"6f08a456.1fddfc","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":8,"width":5,"height":1},{"id":"7270b99e.a172f8","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":9,"width":5,"height":1},{"id":"1d9ce145.6f2197","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":10,"width":5,"height":1},{"id":"e6fa7bab.14f708","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":11,"width":5,"height":1},{"id":"28373133.a9e0ae","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":12,"width":5,"height":1},{"id":"56c6219c.eb34b","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":13,"width":5,"height":1},{"id":"c451674f.ccaba8","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":14,"width":5,"height":1},{"id":"7762653c.7a79a4","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":15,"width":5,"height":1},{"id":"fab9ff8b.60ed9","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":16,"width":5,"height":1},{"id":"e2e9cf03.ebb1d","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":17,"width":5,"height":1},{"id":"20fc2d68.1a9ee2","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":18,"width":5,"height":1},{"id":"b96118ad.841f88","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":19,"width":5,"height":1},{"id":"f635cef5.e3de68","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":20,"width":5,"height":1},{"id":"7f24ec4.3bfcc14","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":21,"width":5,"height":1},{"id":"9e91ec45.f9401","type":"ui_spacer","name":"spacer","group":"28abd0c6.387a","order":22,"width":5,"height":1},{"id":"962d7bbd.7b99c8","type":"ui_group","z":"","name":"ROKS","tab":"b7693d2e.3c913","order":1,"disp":true,"width":"6","collapse":false},{"id":"e9f88dfe.785c18","type":"ui_group","z":"","name":"One dimension Array","tab":"e67945a0.1f25e","order":1,"disp":true,"width":"6","collapse":false},{"id":"e67945a0.1f25e","type":"ui_tab","z":"","name":"Table Examples","icon":"dashboard","order":1},{"id":"c3ed5604.9f1818","type":"ui_group","z":"","name":"Activity viewer","tab":"9cbf745a.45f2f","order":2,"disp":true,"width":"26","collapse":true},{"id":"6db9cecd.8ee788","type":"inject","z":"6171a812.b668a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":20,"wires":[["24fbee7b.bfe19a"]]},{"id":"24fbee7b.bfe19a","type":"function","z":"6171a812.b668a","name":"API call for Namespaces list","func":"// GET namespace\nmsg.topic = \"/api/v1/namespaces\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":380,"y":60,"wires":[["2c80df6c.038fb8"]]},{"id":"dd6f4fd1.86489","type":"debug","z":"6171a812.b668a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":690,"y":180,"wires":[]},{"id":"aff50a1e.fcfd98","type":"inject","z":"1629fa05.cf1a1e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":40,"wires":[["7f98b596.a4bb4c"]]},{"id":"7f98b596.a4bb4c","type":"function","z":"1629fa05.cf1a1e","name":"","func":"// GET namespace\nmsg.topic = \"/apis/apps/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/deployments/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":120,"wires":[["76276b8a.5e438c"]]},{"id":"f9514f20.53b16","type":"debug","z":"1629fa05.cf1a1e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":770,"y":100,"wires":[]},{"id":"c5309bf1.f9fed","type":"http in","z":"bde43094.4c07f8","name":"Control Plane","url":"/controlplane","method":"get","upload":false,"swaggerDoc":"","x":90,"y":60,"wires":[["2f0ea2dd.11717e","fca4faba.28495"]]},{"id":"2b4cc903.12f506","type":"http response","z":"bde43094.4c07f8","name":"","statusCode":"","headers":{},"x":590,"y":60,"wires":[]},{"id":"7db97240.30088c","type":"http in","z":"bde43094.4c07f8","name":"Select OCP Project","url":"/selectOCPProject","method":"get","upload":false,"swaggerDoc":"","x":110,"y":140,"wires":[["61dda83c.fd841"]]},{"id":"52e61ba5.13b4f4","type":"http in","z":"bde43094.4c07f8","name":"Select OCP Object","url":"/selectOCPObject","method":"get","upload":false,"swaggerDoc":"","x":110,"y":340,"wires":[["b37aa7e0.633028"]]},{"id":"358e916a.12e24e","type":"http in","z":"bde43094.4c07f8","name":"Select OCP Object Action","url":"/selectOCPObjectAction","method":"get","upload":false,"swaggerDoc":"","x":130,"y":420,"wires":[["c71879c6.d82e5"]]},{"id":"14d88290.41542d","type":"http response","z":"bde43094.4c07f8","name":"","statusCode":"","headers":{},"x":810,"y":140,"wires":[]},{"id":"b18c3be0.d7039","type":"http response","z":"bde43094.4c07f8","name":"","statusCode":"","headers":{},"x":850,"y":340,"wires":[]},{"id":"33bb3176.b40b06","type":"http response","z":"bde43094.4c07f8","name":"","statusCode":"","headers":{},"x":610,"y":420,"wires":[]},{"id":"e0f768d3.ed65e","type":"http in","z":"bde43094.4c07f8","name":"OCP Object Results","url":"/ocpObjectResults","method":"get","upload":false,"swaggerDoc":"","x":110,"y":500,"wires":[["36a4cb6c.15e4cc"]]},{"id":"85fe7fbe.4ce1e","type":"http response","z":"bde43094.4c07f8","name":"","statusCode":"","headers":{},"x":830,"y":520,"wires":[]},{"id":"2f0ea2dd.11717e","type":"template","z":"bde43094.4c07f8","name":"Overall framesets","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<frameset rows=\"50px,*\"> \n    <frame noresize src=\"/selectOCPProject\" marginheight=\"9\"> \n    <frameset cols=\"20%,80%\"> \n        <frame src=\"/selectOCPObject\" name=\"OCPObjectFrame\" id=\"OCPObjectFrame\" frameborder=\"1\"> \n        <frame src=\"/selectFirstScreen\" name=\"OCPObjectActionFrame\" id=\"OCPObjectActionFrame\" frameborder=\"1\"> \n        <!--<frame src=\"/ocpObjectResults\" name=\"OCPObjectResultsFrame\" id=\"OCPObjectResultsFrame\" frameborder=\"1\"> -->\n    </frameset> \n</frameset>\n\n","output":"str","x":330,"y":60,"wires":[["2b4cc903.12f506"]]},{"id":"f5ca2e96.8d78c","type":"template","z":"bde43094.4c07f8","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n<form method=\"GET\" target=\"invisible\" name=\"frmExport\" id=\"frmExport\">\n<input type=\"hidden\" name=\"selSecret\" id=\"selSecret\" value=\"ALL\">    \n<input type=\"hidden\" name=\"selConfigMap\" id=\"selConfigMap\" value=\"ALL\">    \n<input type=\"hidden\" name=\"selPV\" id=\"selPV\" value=\"ALL\">    \n<input type=\"hidden\" name=\"selPVC\" id=\"selPVC\" value=\"ALL\">    \n<input type=\"hidden\" name=\"selDeployment\" id=\"selDeployment\" value=\"ALL\">    \n<input type=\"hidden\" name=\"selStatefulSet\" id=\"selStatefulSet\" value=\"ALL\">    \n<input type=\"hidden\" name=\"selService\" id=\"selService\" value=\"ALL\">    \n<input type=\"hidden\" name=\"selJob\" id=\"selJob\" value=\"ALL\">    \n<input type=\"hidden\" name=\"selCronJob\" id=\"selCronJob\" value=\"ALL\">    \n\nSelect OCP project: <select name=\"selProject\" id=\"selProject\" onload=\"localStorage.setItem('selProject', document.all.selProject.value);\" onchange=\"JavaScript:setProject();\">\n{{#payload}}\n<option>{{metadata.name}}</option>\n{{/payload}}\n</select>\n\n</form>\n\n<script language=\"JavaScript\">\nfunction setProject(){\n    localStorage.setItem('selProject', document.all.frmExport.selProject.value);\n    document.all.frmExport.action=\"{{{global.urlPrefix}}}/setProject\";\n    document.all.frmExport.submit();\n}\ndocument.all.frmExport.selProject.value='{{{global.selProject}}}';\n</script>","output":"str","x":620,"y":180,"wires":[["14d88290.41542d"]]},{"id":"f0eddb44.55b35","type":"template","z":"bde43094.4c07f8","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\n    function getProject(objName){\n        document.all.frmAction.action=\"{{{global.urlPrefix}}}/OCPObject/\" + objName;\n        document.all.frmAction.selProject.value=localStorage.getItem(\"selProject\");\n        document.all.frmAction.submit();\n    }\n</script>\n<form name=\"frmAction\" id=\"frmAction\" method=\"GET\" target=\"OCPObjectActionFrame\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n<table>\n{{#payload}}\n<tr><td><a href=\"JavaScript:getProject('{{name}}');\">{{name}}</a></td></tr>\n{{/payload}}\n</table>\n</form>","output":"str","x":660,"y":340,"wires":[["b18c3be0.d7039"]]},{"id":"c71879c6.d82e5","type":"template","z":"bde43094.4c07f8","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n<p>\n<h3>Quick configuration for clone/reinstate</h3>\n<form method=\"post\" action=\"/quickConfig\" target=\"invisible\">\n    <input type=\"text\" readonly id=\"txtLabel\" name=\"txtLabel\" value=\"For detailed Configuration parameters please use the configuration screen from the left hand menu\" style=\"background-color : #FFFFCC;font-weight: bold;\" size=\"100\">\n<table width=\"100%\">\n    <tr>\n        <td>Openshift project/namespace: </td><td><input type=\"text\" id=\"txtProject\" name=\"txtProject\" value=\"{{global.selProject}}\"></td>\n    </tr>\n    <tr>\n        <td>Local workspace: </td><td><input type=\"text\" id=\"txtBaseDir\" name=\"txtBaseDir\" value=\"{{global.baseDir}}\" size=\"60\"></td>\n    </tr>\n    <tr>\n        <td>Clone/Reinstate PVC: </td><td><input type=\"text\" id=\"txtClonePVC\" name=\"txtClonePVC\" value=\"{{global.clonePVC}}\"></td>\n    </tr>\n    <tr>\n        <td>Connected cluster: </td><td><input type=\"text\" id=\"txtCurrentCluster\" name=\"txtCurrentCluster\" value=\"{{global.currentCluster}}\"></td>\n    </tr>\n    <tr>\n        <td colspan=\"2\"><input type=\"submit\" value=\"Update\"></td>\n    </tr>\n</table>    \n</form>\n</p>\n<hr>\n<br>\n<hr>\n<p>\n<h3>This Clone/Reinstate service allows the end users to:</h3>\n    <ul>\n        <li><p><b>Explore connected OCP cluster+project:</b> Select K8S Object type from the left menu, see a list of instances for selected K8S object type and generate the specs either individually or for all items of selected type</p></li>\n        <li><p><b>Clone to selected PVC (IBM COS, NFS etc):</b> 1) Extract specs for all K8s object (Projects, Service Accounts, Deployments etc) required for your application/project (Ex: CP4D), clone metadata to selected storage/PVC 2) clone data in parallel from source PVCs to target PVC, \"Reinstate data - Target\" to reinstate data in parallel from cloned target PVC to application PVC</p></li>\n        <li><p><b>Reinstate application/project from selected PVC (IBM COS, NFS etc):</b> 1) Download k8s specs to the local machine from the storage/PVC it is stored at 2) Using downloaded specs Reinstate Openshift project and pre-requisites (SA, SCC, Role, RoleBinding, Secrets, ConfigMaps, PVCs) 3) Trigger k8s job to reinstate data in parallel to the differnet PVCs 4) Reinstate services (Deployments, Statefulsets, Jobs, CronJobs, Services) </p></li>\n        <li><p><b>Clone Repository Management (For IBM COS): </b> Manage clones in IBM COS buckets, document contents of clone, delete clones, make a copy of clones (useful for creating a baseline and fast incremental clone)</p></li>\n        <li><p><b>Configuration:</b> Detailed configuration parameters to customize the clone/reinstate service</p></li>\n    </ul>\n</p>\n","output":"str","x":380,"y":420,"wires":[["33bb3176.b40b06"]]},{"id":"a2493aed.5acc38","type":"http in","z":"6171a812.b668a","name":"OCP Projects list","url":"/OCPProjects","method":"get","upload":false,"swaggerDoc":"","x":100,"y":100,"wires":[["24fbee7b.bfe19a"]]},{"id":"7768aecf.89dcf8","type":"http response","z":"6171a812.b668a","name":"","statusCode":"","headers":{},"x":830,"y":120,"wires":[]},{"id":"5b414b2e.6325c4","type":"function","z":"6171a812.b668a","name":"Extract OCP Project Names","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":700,"y":60,"wires":[["7768aecf.89dcf8"]]},{"id":"8bbd9727.ab3ac","type":"http request","z":"bde43094.4c07f8","name":"","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":470,"y":140,"wires":[["f5ca2e96.8d78c"]]},{"id":"9e687f41.71ddc8","type":"inject","z":"6171a812.b668a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":240,"wires":[["be0bc8dc.bc69f"]]},{"id":"be0bc8dc.bc69f","type":"function","z":"6171a812.b668a","name":"API call for list of objects","func":"// GET namespace\nmsg.topic = \"/apis/apps/v1beta1/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":280,"wires":[["18ce06d6.0ef3e1"]]},{"id":"fef013c7.c3b18","type":"debug","z":"6171a812.b668a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":950,"y":320,"wires":[]},{"id":"cede4af0.d439c8","type":"http in","z":"6171a812.b668a","name":"OCP Project Objects list","url":"/OCPProjectObjects","method":"get","upload":false,"swaggerDoc":"","x":130,"y":340,"wires":[["be0bc8dc.bc69f"]]},{"id":"b9d94d43.ec4b48","type":"http response","z":"6171a812.b668a","name":"","statusCode":"","headers":{},"x":930,"y":260,"wires":[]},{"id":"721571cc.802088","type":"function","z":"6171a812.b668a","name":"Extract OCP Project Names","func":"//msg.payload=msg.payload.resources;\nmsg.payload=[{name:\"securitycontextconstraints\"},{name:\"serviceaccounts\"},{name:\"roles\"},{name:\"rolebindings\"},{name:\"Project\"},{name:\"CRD\"},{name:\"secrets\"},{name:\"configmaps\"},{name:\"persistentvolumes\"},{name:\"persistentvolumeclaims\"},{name:\"deployments\"},{name:\"statefulsets\"},{name:\"services\"},{name:\"jobs\"},{name:\"cronjobs\"}];\nreturn msg;","outputs":1,"noerr":0,"x":700,"y":280,"wires":[["b9d94d43.ec4b48","fef013c7.c3b18"]]},{"id":"1bdc0abb.c8df65","type":"http request","z":"bde43094.4c07f8","name":"","method":"GET","ret":"obj","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":490,"y":340,"wires":[["f0eddb44.55b35"]]},{"id":"86121c97.200f28","type":"http in","z":"1629fa05.cf1a1e","name":"Get Deployments","url":"/OCPObject/deployments","method":"get","upload":false,"swaggerDoc":"","x":120,"y":200,"wires":[["7f98b596.a4bb4c","f9c4ab71.1b67b"]]},{"id":"4b0f9226.f0bc64","type":"http response","z":"1629fa05.cf1a1e","name":"","statusCode":"","headers":{},"x":830,"y":20,"wires":[]},{"id":"97b94f1d.3f7c08","type":"function","z":"1629fa05.cf1a1e","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":120,"wires":[["f9514f20.53b16","78e5c864.fc98f8"]]},{"id":"78e5c864.fc98f8","type":"template","z":"1629fa05.cf1a1e","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selDeployment){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selDeployment.value=selDeployment;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/DeploymentYAML?selDeployment=\"+selDeployment+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selDeployment\" id=\"selDeployment\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllDeployments\" id=\"btnAllDeployments\" value=\"Get All Deployments\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":600,"y":220,"wires":[["4b0f9226.f0bc64"]]},{"id":"47ad302.89030d","type":"inject","z":"1629fa05.cf1a1e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":360,"wires":[["79070b28.5eed24"]]},{"id":"79070b28.5eed24","type":"function","z":"1629fa05.cf1a1e","name":"","func":"// GET namespace\nif(msg.payload.selDeployment==\"ALL\")\n    msg.topic = \"/apis/apps/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/deployments/\";\nelse\n    msg.topic = \"/apis/apps/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/deployments/\"+msg.payload.selDeployment+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":440,"wires":[["4f4cedbc.86d50c"]]},{"id":"acbf1aaa.c4f818","type":"debug","z":"1629fa05.cf1a1e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":930,"y":320,"wires":[]},{"id":"c870ae29.49b018","type":"yaml","z":"1629fa05.cf1a1e","property":"payload","name":"","x":710,"y":440,"wires":[["acbf1aaa.c4f818","90b96c16.414c88"]]},{"id":"91986334.f30f58","type":"http in","z":"1629fa05.cf1a1e","name":"","url":"/DeploymentYAML","method":"get","upload":false,"swaggerDoc":"","x":120,"y":500,"wires":[["79070b28.5eed24"]]},{"id":"93d808d0.17269","type":"http response","z":"1629fa05.cf1a1e","name":"","statusCode":"","headers":{},"x":750,"y":620,"wires":[]},{"id":"db6d4eb7.e42938","type":"inject","z":"1f666544.2821c3","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":40,"wires":[["4aa0898a.b5a628"]]},{"id":"4aa0898a.b5a628","type":"function","z":"1f666544.2821c3","name":"","func":"// GET namespace\nmsg.topic = \"/apis/apps/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/statefulsets/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":120,"wires":[["a87dd462.609e08"]]},{"id":"c25d673e.99fce","type":"debug","z":"1f666544.2821c3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":830,"y":100,"wires":[]},{"id":"1428b75.6ba06c9","type":"http in","z":"1f666544.2821c3","name":"Get Statefulsets","url":"/OCPObject/statefulsets","method":"get","upload":false,"swaggerDoc":"","x":160,"y":200,"wires":[["4aa0898a.b5a628"]]},{"id":"ec040b66.d577d","type":"http response","z":"1f666544.2821c3","name":"","statusCode":"","headers":{},"x":870,"y":20,"wires":[]},{"id":"272b998a.2bef7e","type":"function","z":"1f666544.2821c3","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":120,"wires":[["c25d673e.99fce","f66db232.1e0fa"]]},{"id":"f66db232.1e0fa","type":"template","z":"1f666544.2821c3","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selStatefulSet){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selStatefulSet.value=selStatefulSet;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/StatefulSetYAML?selStatefulSet=\"+selStatefulSet+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selStatefulSet\" id=\"selStatefulSet\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllStatefulSet\" id=\"btnAllStatefulSet\" value=\"Get All Statefulsets\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":640,"y":220,"wires":[["ec040b66.d577d"]]},{"id":"f9c4ab71.1b67b","type":"debug","z":"1629fa05.cf1a1e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":300,"y":240,"wires":[]},{"id":"dca360a1.5ef5a8","type":"websocket in","z":"9c09ae69.a5cbc","name":"HASS (websocket receive)","server":"","client":"f4c375ea.ab33c","x":190,"y":100,"wires":[["90f273cb.6b2c78"]]},{"id":"d414f32a.97f0f8","type":"websocket out","z":"9c09ae69.a5cbc","name":"HASS (websocket send)","server":"","client":"f4c375ea.ab33c","x":750,"y":120,"wires":[]},{"id":"90f273cb.6b2c78","type":"json","z":"9c09ae69.a5cbc","name":"","x":370,"y":100,"wires":[["527fc61a.7f5bc"]]},{"id":"527fc61a.7f5bc","type":"function","z":"9c09ae69.a5cbc","name":"Verify Request","func":"if(msg.payload.type == \"auth_required\") {\n    var msg_auth = {payload:{\"type\": \"auth\",\"api_password\": \"YOUR_API_PASSWORD\"}};\n    return [null, msg_auth, null];\n}else if(msg.payload.type == \"auth_ok\") {\n    var msg_sub = {payload:{\"id\": 18,\"type\": \"subscribe_events\"}};\n    return [null, msg_sub, null];\n}else if(msg.payload.type == \"result\") {\n    if(msg.payload.success === false) {\n        return [null, null, msg];\n    }else{\n        return [null, null, null];\n    }\n}else{\n    return [msg, null, null];\n}","outputs":"3","noerr":0,"x":520,"y":100,"wires":[["62ccca41.d078b4"],["d414f32a.97f0f8"],["fe188849.261c98"]]},{"id":"62ccca41.d078b4","type":"change","z":"9c09ae69.a5cbc","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.event","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":80,"wires":[["ba2de749.6c5c58"]]},{"id":"fe188849.261c98","type":"function","z":"9c09ae69.a5cbc","name":"Error","func":"msg.payload = \"Websocket Error #\"+msg.payload.error.code+\": \"+msg.payload.error.message;\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":160,"wires":[[]]},{"id":"ba2de749.6c5c58","type":"switch","z":"9c09ae69.a5cbc","name":"Event Type","property":"payload.event_type","propertyType":"msg","rules":[{"t":"eq","v":"state_changed","vt":"str"},{"t":"eq","v":"homeassistant_start","vt":"str"},{"t":"eq","v":"zwave.network_ready","vt":"str"},{"t":"eq","v":"zwave.scene_activated","vt":"str"}],"checkall":"false","outputs":4,"x":950,"y":80,"wires":[["67efc872.d5de7"],[],[],["cd3a3be5.bbd29"]]},{"id":"67efc872.d5de7","type":"function","z":"9c09ae69.a5cbc","name":"","func":"var entity_parts = msg.payload.data.entity_id.split(\".\");\nvar time_fired = msg.payload.time_fired;\nvar domain = entity_parts[0];\nvar entity = entity_parts[1];\nvar entity_id = msg.payload.data.entity_id;\nif(msg.payload.data.new_state) {\n    var new_state = msg.payload.data.new_state.state;\n    var name = msg.payload.data.new_state.attributes.friendly_name;\n}\nif(msg.payload.data.old_state) {\n    var old_state = msg.payload.data.old_state.state;\n    var name = msg.payload.data.old_state.attributes.friendly_name;\n}\nmsg.payload = \"\";\nmsg.payload = {\n    \"time_fired\":time_fired,\n    \"domain\":domain,\n    \"entity\":entity,\n    \"entity_id\":entity_id,\n    \"new_state\":new_state,\n    \"old_state\":old_state,\n    \"name\":name\n};\nreturn msg;","outputs":1,"noerr":0,"x":1150,"y":20,"wires":[[]]},{"id":"cd3a3be5.bbd29","type":"function","z":"9c09ae69.a5cbc","name":"","func":"var time_fired = msg.payload.time_fired;\nvar scene_id = msg.payload.data.scene_id;\nvar object_id = msg.payload.data.object_id;\nvar entity_id = msg.payload.data.entity_id;\nmsg.payload = \"\";\nmsg.payload = {\n    \"time_fired\":time_fired,\n    \"scene_id\":scene_id,\n    \"object_id\":object_id,\n    \"entity_id\":entity_id\n}\nreturn msg;","outputs":1,"noerr":0,"x":1150,"y":140,"wires":[[]]},{"id":"b171025b.231968","type":"file","z":"1629fa05.cf1a1e","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":1010,"y":520,"wires":[["15c330bc.c0f6a7"]]},{"id":"380bfd2d.bfd9c2","type":"file in","z":"1629fa05.cf1a1e","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":1020,"y":560,"wires":[["93d808d0.17269"]]},{"id":"c2cdcca6.feb8","type":"file in","z":"bde43094.4c07f8","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":450,"y":500,"wires":[["37ccdc6f.563744"]]},{"id":"37ccdc6f.563744","type":"change","z":"bde43094.4c07f8","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"Content-Type: application/yaml","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":580,"wires":[["85fe7fbe.4ce1e"]]},{"id":"29603a85.c78886","type":"inject","z":"1f666544.2821c3","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":340,"wires":[["4b9c1df.40b1564"]]},{"id":"4b9c1df.40b1564","type":"function","z":"1f666544.2821c3","name":"","func":"// GET namespace\nif(msg.payload.selStatefulSet==\"ALL\")\n    msg.topic = \"/apis/apps/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/statefulsets/\";\nelse\n    msg.topic = \"/apis/apps/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/statefulsets/\"+msg.payload.selStatefulSet+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":420,"wires":[["fd34644f.bbd15"]]},{"id":"564d2b35.23b8dc","type":"debug","z":"1f666544.2821c3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":930,"y":260,"wires":[]},{"id":"417d4bb7.db397c","type":"yaml","z":"1f666544.2821c3","property":"payload","name":"","x":710,"y":420,"wires":[["564d2b35.23b8dc","64a5a902.f11ec8"]]},{"id":"7006e1a0.aa70b8","type":"http in","z":"1f666544.2821c3","name":"","url":"/StatefulSetYAML","method":"get","upload":false,"swaggerDoc":"","x":120,"y":480,"wires":[["4b9c1df.40b1564"]]},{"id":"7000f2f0.3b6a64","type":"http response","z":"1f666544.2821c3","name":"","statusCode":"","headers":{},"x":750,"y":600,"wires":[]},{"id":"ed8c074.d1045f8","type":"file","z":"1f666544.2821c3","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":1010,"y":500,"wires":[["16da7f5c.2cc749"]]},{"id":"b0e0bd01.6ec28","type":"file in","z":"1f666544.2821c3","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":1020,"y":540,"wires":[["7000f2f0.3b6a64"]]},{"id":"1d7ace.84dcdd32","type":"inject","z":"466cbb18.786edc","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":60,"wires":[["5572b5e9.f24b0c"]]},{"id":"5572b5e9.f24b0c","type":"function","z":"466cbb18.786edc","name":"","func":"// GET namespace\nmsg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/secrets/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":140,"wires":[["573868a4.d94c38"]]},{"id":"1ceab67f.4ea55a","type":"debug","z":"466cbb18.786edc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":810,"y":120,"wires":[]},{"id":"ae2ebd75.bb5b9","type":"http in","z":"466cbb18.786edc","name":"Get Secrets","url":"/OCPObject/secrets","method":"get","upload":false,"swaggerDoc":"","x":130,"y":220,"wires":[["5572b5e9.f24b0c"]]},{"id":"4ef44c54.b28ccc","type":"http response","z":"466cbb18.786edc","name":"","statusCode":"","headers":{},"x":850,"y":40,"wires":[]},{"id":"4814f669.3149e","type":"function","z":"466cbb18.786edc","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":140,"wires":[["1ceab67f.4ea55a","c3a2cfcf.776dd8"]]},{"id":"c3a2cfcf.776dd8","type":"template","z":"466cbb18.786edc","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selSecret){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selSecret.value=selSecret;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/SecretYAML?selSecret=\"+selSecret+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selSecret\" id=\"selSecret\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllSecret\" id=\"btnAllSecret\" value=\"Get All Secrets\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":620,"y":240,"wires":[["4ef44c54.b28ccc"]]},{"id":"134eb742.ced449","type":"inject","z":"466cbb18.786edc","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":360,"wires":[["ecb15bff.206588"]]},{"id":"ecb15bff.206588","type":"function","z":"466cbb18.786edc","name":"","func":"// GET namespace\nif(msg.payload.selSecret==\"ALL\")\n    msg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/secrets/\";\nelse\n    msg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/secrets/\"+msg.payload.selSecret+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":440,"wires":[["48aaddf3.55be74"]]},{"id":"21f14278.05463e","type":"debug","z":"466cbb18.786edc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":910,"y":280,"wires":[]},{"id":"6bbcb6cc.ca5bf8","type":"yaml","z":"466cbb18.786edc","property":"payload","name":"","x":670,"y":360,"wires":[["21f14278.05463e","4b1c2987.daac5"]]},{"id":"2f116aaa.629ede","type":"http in","z":"466cbb18.786edc","name":"","url":"/SecretYAML","method":"get","upload":false,"swaggerDoc":"","x":90,"y":500,"wires":[["ecb15bff.206588"]]},{"id":"e0303f35.89ee18","type":"http response","z":"466cbb18.786edc","name":"","statusCode":"","headers":{},"x":730,"y":560,"wires":[]},{"id":"7a0f6655.5fcf58","type":"file","z":"466cbb18.786edc","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":970,"y":440,"wires":[["9aa3fe07.3bbe88"]]},{"id":"1dd7aef3.1ca4f1","type":"file in","z":"466cbb18.786edc","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":960,"y":500,"wires":[["e0303f35.89ee18"]]},{"id":"ad51467.8f1e638","type":"inject","z":"65f4d4c1.1b0de4","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":60,"wires":[["fd129575.989c78"]]},{"id":"fd129575.989c78","type":"function","z":"65f4d4c1.1b0de4","name":"","func":"// GET namespace\nmsg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/persistentvolumeclaims/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":140,"wires":[["8fc57101.ff0e18"]]},{"id":"1d9cce07.9864a2","type":"debug","z":"65f4d4c1.1b0de4","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":830,"y":120,"wires":[]},{"id":"559899d7.7a5748","type":"http in","z":"65f4d4c1.1b0de4","name":"Get PVCs","url":"/OCPObject/persistentvolumeclaims","method":"get","upload":false,"swaggerDoc":"","x":140,"y":220,"wires":[["fd129575.989c78"]]},{"id":"5e5a7a17.7952ec","type":"http response","z":"65f4d4c1.1b0de4","name":"","statusCode":"","headers":{},"x":870,"y":40,"wires":[]},{"id":"dfa6c47f.d867d","type":"function","z":"65f4d4c1.1b0de4","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":140,"wires":[["1d9cce07.9864a2","75c4381e.2ea84"]]},{"id":"75c4381e.2ea84","type":"template","z":"65f4d4c1.1b0de4","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selPVC){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selPVC.value=selPVC;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/PVCYAML?selSecret=\"+selPVC+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selPVC\" id=\"selPVC\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllPVC\" id=\"btnAllPVC\" value=\"Get All PVCs\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":640,"y":240,"wires":[["5e5a7a17.7952ec"]]},{"id":"f01c5c7c.1867e","type":"inject","z":"65f4d4c1.1b0de4","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":360,"wires":[["4e4ae994.59c928"]]},{"id":"4e4ae994.59c928","type":"function","z":"65f4d4c1.1b0de4","name":"","func":"// GET namespace\nif(msg.payload.selPVC==\"ALL\")\n    msg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/persistentvolumeclaims/\";\nelse\n    msg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/persistentvolumeclaims/\"+msg.payload.selPVC+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":440,"wires":[["54c8a056.08b02"]]},{"id":"2396fa34.262b36","type":"debug","z":"65f4d4c1.1b0de4","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":930,"y":280,"wires":[]},{"id":"7c7c2272.a494a4","type":"yaml","z":"65f4d4c1.1b0de4","property":"payload","name":"","x":710,"y":440,"wires":[["2396fa34.262b36","4c0fa799.34bf38"]]},{"id":"3dde2f05.8f8f9","type":"http in","z":"65f4d4c1.1b0de4","name":"","url":"/PVCYAML","method":"get","upload":false,"swaggerDoc":"","x":100,"y":500,"wires":[["4e4ae994.59c928"]]},{"id":"af804251.1a045","type":"http response","z":"65f4d4c1.1b0de4","name":"","statusCode":"","headers":{},"x":750,"y":660,"wires":[]},{"id":"d1ed9ba9.07363","type":"file","z":"65f4d4c1.1b0de4","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":990,"y":520,"wires":[["e7be83df.d6b0e"]]},{"id":"e2dc3f22.70926","type":"file in","z":"65f4d4c1.1b0de4","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":1020,"y":580,"wires":[["af804251.1a045"]]},{"id":"f0c5d119.8abd6","type":"inject","z":"1514bb34.595edd","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":80,"wires":[["7e518249.7b5eec"]]},{"id":"7e518249.7b5eec","type":"function","z":"1514bb34.595edd","name":"","func":"// GET namespace\nmsg.topic = \"/api/v1/persistentvolumes/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":160,"wires":[["6b2981f4.559018"]]},{"id":"f5a0205.b90de6","type":"http in","z":"1514bb34.595edd","name":"Get PVs","url":"/OCPObject/persistentvolumes","method":"get","upload":false,"swaggerDoc":"","x":180,"y":240,"wires":[["2b9c6c22.3d774c"]]},{"id":"8817986e.6153b8","type":"http response","z":"1514bb34.595edd","name":"","statusCode":"","headers":{},"x":850,"y":100,"wires":[]},{"id":"a10a54f7.34e26","type":"template","z":"1514bb34.595edd","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selPV){\n    document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selPV.value=selPV;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/PVYAML\";\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selPV\" id=\"selPV\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllPV\" id=\"btnAllPV\" value=\"Get All PVs\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{spec.claimRef.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{spec.claimRef.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":680,"y":260,"wires":[["8817986e.6153b8"]]},{"id":"43430a9b.c4d104","type":"inject","z":"1514bb34.595edd","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":380,"wires":[["52c367da.d13c08"]]},{"id":"52c367da.d13c08","type":"function","z":"1514bb34.595edd","name":"","func":"// GET namespace\nif(msg.payload.selPV==\"ALL\")\n    msg.topic = \"/api/v1/persistentvolumes/\";\nelse\n    msg.topic = \"/api/v1/persistentvolumes/\"+msg.payload.selPV+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":460,"wires":[["62d5eb1c.1e272c"]]},{"id":"9b62f24d.ac378","type":"debug","z":"1514bb34.595edd","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":970,"y":300,"wires":[]},{"id":"1d06fcca.ab2343","type":"yaml","z":"1514bb34.595edd","property":"payload","name":"","x":750,"y":460,"wires":[["9b62f24d.ac378","741ed0bd.084c58"]]},{"id":"605baabc.37af74","type":"http in","z":"1514bb34.595edd","name":"","url":"/PVYAML","method":"get","upload":false,"swaggerDoc":"","x":140,"y":520,"wires":[["52c367da.d13c08","92f466cf.753068"]]},{"id":"23cdfc68.3d2e2c","type":"http response","z":"1514bb34.595edd","name":"","statusCode":"","headers":{},"x":790,"y":640,"wires":[]},{"id":"5c270b01.a37784","type":"file","z":"1514bb34.595edd","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":1050,"y":520,"wires":[["624ab88d.38197"]]},{"id":"35d94776.96df7","type":"file in","z":"1514bb34.595edd","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":1060,"y":580,"wires":[["23cdfc68.3d2e2c"]]},{"id":"4f986f5a.66bba8","type":"function","z":"1629fa05.cf1a1e","name":"Remove unnecessary items from payload","func":"\ntry{\ndelete msg.payload.metadata.selfLink;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.resourceVersion;\n}catch(e){}\n\ntry{\nfor(i=0;i<msg.payload.items.length;i++){\n    try{\n    delete msg.payload.items[i].metadata.namespace;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].status;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.uid;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.selfLink;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.resourceVersion;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.generation;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n    }catch(e){}\n}\n}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":500,"wires":[["c870ae29.49b018"]]},{"id":"55b4d102.42763","type":"function","z":"466cbb18.786edc","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.resourceVersion;\n}catch(e){}\ntry{\nfor(i=0;i<msg.payload.items.length;i++){\n    try{\n    delete msg.payload.items[i].status;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.namespace;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.uid;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.selfLink;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.resourceVersion;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.generation;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n    }catch(e){}\n}\n}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":520,"wires":[["6bbcb6cc.ca5bf8"]]},{"id":"f8c61daa.ae14","type":"function","z":"1514bb34.595edd","name":"Remove unnecessary items from payload","func":"var filteredItems=[];\nvar j=0;\nvar selProject=global.get(\"selProject\")+\"\";\nfor(var i=0;i<msg.payload.items.length;i++){\n    if(msg.payload.items[i].status.phase==\"Bound\")\n    {\n    if(msg.payload.items[i].spec.claimRef.namespace==selProject){\n        console.log(\"same same\");\n        filteredItems[j]=msg.payload.items[i];\n        j=j+1;\n    }\n    }\n}\n\nmsg.payload.items=filteredItems;\n\ntry{\ndelete msg.payload.metadata.selfLink;\ndelete msg.payload.metadata.resourceVersion;\n\nfor(i=0;i<msg.payload.items.length;i++){\n    delete msg.payload.items[i].status;\n    delete msg.payload.items[i].metadata.uid;\n    delete msg.payload.items[i].metadata.selfLink;\n    delete msg.payload.items[i].metadata.resourceVersion;\n    delete msg.payload.items[i].metadata.generation;\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n\n}}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":473,"y":586,"wires":[["1d06fcca.ab2343"]]},{"id":"23e3c099.5892e","type":"function","z":"65f4d4c1.1b0de4","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\n}catch(e){}\n\ntry{\ndelete msg.payload.metadata.resourceVersion;\n}catch(e){}\n\nfor(i=0;i<msg.payload.items.length;i++){\n    try{\n    delete msg.payload.items[i].metadata.namespace;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.labels;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.annotations;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.finalizers;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].spec.volumeName;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].status;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.uid;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.selfLink;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.resourceVersion;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.generation;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n    }catch(e){}\n\n}\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":540,"wires":[["7c7c2272.a494a4"]]},{"id":"b9e238b7.e9f688","type":"function","z":"1f666544.2821c3","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\ndelete msg.payload.metadata.resourceVersion;\n\nfor(i=0;i<msg.payload.items.length;i++){\n    delete msg.payload.items[i].status;\n    delete msg.payload.items[i].metadata.uid;\n    delete msg.payload.items[i].metadata.selfLink;\n    delete msg.payload.items[i].metadata.resourceVersion;\n    delete msg.payload.items[i].metadata.generation;\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n\n}}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":500,"wires":[["417d4bb7.db397c"]]},{"id":"2b61fa93.2d55a6","type":"inject","z":"25ba6d98.0a678a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":60,"wires":[["257b73fd.b4d334"]]},{"id":"257b73fd.b4d334","type":"function","z":"25ba6d98.0a678a","name":"","func":"// GET namespace\nmsg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/services/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":140,"wires":[["c4796b8b.ad05e"]]},{"id":"b3fa6be4.5d51c8","type":"debug","z":"25ba6d98.0a678a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":810,"y":120,"wires":[]},{"id":"90b7f7f6.ff1ee","type":"http in","z":"25ba6d98.0a678a","name":"Get Services","url":"/OCPObject/services","method":"get","upload":false,"swaggerDoc":"","x":130,"y":220,"wires":[["257b73fd.b4d334"]]},{"id":"cbc39c55.c7f85","type":"http response","z":"25ba6d98.0a678a","name":"","statusCode":"","headers":{},"x":850,"y":40,"wires":[]},{"id":"2d4a1cb6.017bec","type":"function","z":"25ba6d98.0a678a","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":140,"wires":[["b3fa6be4.5d51c8","c2731f71.86617"]]},{"id":"c2731f71.86617","type":"template","z":"25ba6d98.0a678a","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selService){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selService.value=selService;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/ServiceYAML?selService=\"+selService+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selService\" id=\"selService\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllService\" id=\"btnAllService\" value=\"Get All Services\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":620,"y":240,"wires":[["cbc39c55.c7f85"]]},{"id":"716f7dc9.6be66c","type":"inject","z":"25ba6d98.0a678a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":360,"wires":[["5bbe3469.45346c"]]},{"id":"5bbe3469.45346c","type":"function","z":"25ba6d98.0a678a","name":"","func":"// GET namespace\nif(msg.payload.selService==\"ALL\")\n    msg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/services/\";\nelse\n    msg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/services/\"+msg.payload.selService+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":440,"wires":[["7b369e96.be336"]]},{"id":"23e8feae.9b9022","type":"debug","z":"25ba6d98.0a678a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":930,"y":420,"wires":[]},{"id":"41c071b6.29e108","type":"yaml","z":"25ba6d98.0a678a","property":"payload","name":"","x":690,"y":440,"wires":[["23e8feae.9b9022","2459c647.8a131a"]]},{"id":"ef58ba5e.ae1e88","type":"http in","z":"25ba6d98.0a678a","name":"","url":"/ServiceYAML","method":"get","upload":false,"swaggerDoc":"","x":90,"y":500,"wires":[["5bbe3469.45346c","aeda5faf.10898"]]},{"id":"91706816.f4ac6","type":"http response","z":"25ba6d98.0a678a","name":"","statusCode":"","headers":{},"x":730,"y":660,"wires":[]},{"id":"8fdb0629.e80478","type":"file","z":"25ba6d98.0a678a","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":990,"y":520,"wires":[["c539d104.596ee8"]]},{"id":"63064c68.aaaaec","type":"file in","z":"25ba6d98.0a678a","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":1020,"y":600,"wires":[["91706816.f4ac6"]]},{"id":"e5b41301.f6be2","type":"function","z":"25ba6d98.0a678a","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.resourceVersion;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.uid;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.creationTimestamp;\n}catch(e){}\ntry{\ndelete msg.payload.spec.clusterIP;\n}catch(e){}\ntry{\nfor(i=0;i<msg.payload.items.length;i++){\n    try{\n        delete msg.payload.items[i].status;\n    }catch(e){}\n    try{\n        delete msg.payload.items[i].metadata.uid;\n    }catch(e){}\n    try{\n        delete msg.payload.items[i].metadata.selfLink;\n    }catch(e){}\n    try{\n        delete msg.payload.items[i].metadata.resourceVersion;\n    }catch(e){}\n    try{\n        delete msg.payload.items[i].metadata.generation;\n    }catch(e){}\n    try{\n        delete msg.payload.items[i].metadata.creationTimestamp;\n    }catch(e){}\n    try{\n        delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n    }catch(e){}\n    try{\n        delete msg.payload.items[i].spec.clusterIP;\n    }catch(e){}\n}}catch(e){}\n\ntry{\ndelete msg.payload.status;\n}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":520,"wires":[["41c071b6.29e108","23e8feae.9b9022"]]},{"id":"f3be6f65.1717d8","type":"inject","z":"ee2cb780.64d2f8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":80,"wires":[["7bb797ef.b35de8"]]},{"id":"7bb797ef.b35de8","type":"function","z":"ee2cb780.64d2f8","name":"","func":"// GET namespace\nmsg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/configmaps/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":160,"wires":[["c2670d9.0659ef"]]},{"id":"598152bd.06ac14","type":"debug","z":"ee2cb780.64d2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":830,"y":140,"wires":[]},{"id":"d66ec79b.88d6c8","type":"http in","z":"ee2cb780.64d2f8","name":"Get Config Maps","url":"/OCPObject/configmaps","method":"get","upload":false,"swaggerDoc":"","x":160,"y":240,"wires":[["7bb797ef.b35de8"]]},{"id":"cc9a2d14.d16b1","type":"http response","z":"ee2cb780.64d2f8","name":"","statusCode":"","headers":{},"x":870,"y":60,"wires":[]},{"id":"d5a3e00b.f47688","type":"function","z":"ee2cb780.64d2f8","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":160,"wires":[["598152bd.06ac14","255b12cd.25992e"]]},{"id":"255b12cd.25992e","type":"template","z":"ee2cb780.64d2f8","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selConfigMap){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selConfigMap.value=selConfigMap;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/ConfigMapYAML?selConfigMap=\"+selConfigMap+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selConfigMap\" id=\"selConfigMap\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllConfigMap\" id=\"btnAllConfigMap\" value=\"Get All ConfigMaps\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":640,"y":260,"wires":[["cc9a2d14.d16b1"]]},{"id":"bc980925.7f36a","type":"inject","z":"ee2cb780.64d2f8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":380,"wires":[["1fa1f603.1095da"]]},{"id":"1fa1f603.1095da","type":"function","z":"ee2cb780.64d2f8","name":"","func":"// GET namespace\nif(msg.payload.selConfigMap==\"ALL\")\n    msg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/configmaps/\";\nelse\n    msg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/configmaps/\"+msg.payload.selConfigMap+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":460,"wires":[["624e465c.3f0468"]]},{"id":"f5e4e28d.ff5fc8","type":"debug","z":"ee2cb780.64d2f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":930,"y":400,"wires":[]},{"id":"2712b264.29da4e","type":"yaml","z":"ee2cb780.64d2f8","property":"payload","name":"","x":670,"y":400,"wires":[["f5e4e28d.ff5fc8","a53bd421.ca0b1"]]},{"id":"625ef9fc.36416","type":"http in","z":"ee2cb780.64d2f8","name":"","url":"/ConfigMapYAML","method":"get","upload":false,"swaggerDoc":"","x":120,"y":520,"wires":[["1fa1f603.1095da"]]},{"id":"3fbdd102.a3f09e","type":"http response","z":"ee2cb780.64d2f8","name":"","statusCode":"","headers":{},"x":750,"y":680,"wires":[]},{"id":"35bb361b.d129d2","type":"file","z":"ee2cb780.64d2f8","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":1030,"y":520,"wires":[["7c3baa41.1c4894"]]},{"id":"e1e77fb5.3e23b","type":"file in","z":"ee2cb780.64d2f8","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":1020,"y":600,"wires":[["3fbdd102.a3f09e"]]},{"id":"a22c928f.9f0c18","type":"function","z":"ee2cb780.64d2f8","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.resourceVersion;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.uid;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.creationTimestamp;\n}catch(e){}\n\nfor(i=0;i<msg.payload.items.length;i++){\n    try{\n    delete msg.payload.items[i].metadata.namespace;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].status;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.uid;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.selfLink;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.resourceVersion;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.generation;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n    }catch(e){}\n}\n\ntry{\ndelete msg.payload.status;\n}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":580,"wires":[["2712b264.29da4e","f5e4e28d.ff5fc8"]]},{"id":"f18bf35.5700e9","type":"inject","z":"f569223c.ceccb8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":60,"wires":[["92369309.f81c2"]]},{"id":"92369309.f81c2","type":"function","z":"f569223c.ceccb8","name":"","func":"// GET namespace\nmsg.topic = \"/apis/batch/v1/namespaces/\"+global.get(\"selProject\")+\"/jobs/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":140,"wires":[["2b322c2f.41f674"]]},{"id":"2e86d465.6251cc","type":"debug","z":"f569223c.ceccb8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":810,"y":120,"wires":[]},{"id":"219de4a9.0080bc","type":"http in","z":"f569223c.ceccb8","name":"Get Jobs","url":"/OCPObject/jobs","method":"get","upload":false,"swaggerDoc":"","x":120,"y":220,"wires":[["92369309.f81c2"]]},{"id":"80145ab4.4412e8","type":"http response","z":"f569223c.ceccb8","name":"","statusCode":"","headers":{},"x":850,"y":40,"wires":[]},{"id":"8a12eb34.9ed39","type":"function","z":"f569223c.ceccb8","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":140,"wires":[["2e86d465.6251cc","5012c90d.d69438"]]},{"id":"5012c90d.d69438","type":"template","z":"f569223c.ceccb8","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selJob){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selJob.value=selJob;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/JobYAML?selJob=\"+selJob+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selJob\" id=\"selJob\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllJob\" id=\"btnAllJob\" value=\"Get All Jobs\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":620,"y":240,"wires":[["80145ab4.4412e8"]]},{"id":"760d6894.e1aef8","type":"inject","z":"f569223c.ceccb8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":360,"wires":[["9c016bab.66fc58"]]},{"id":"9c016bab.66fc58","type":"function","z":"f569223c.ceccb8","name":"","func":"// GET namespace\nif(msg.payload.selJob==\"ALL\")\n    msg.topic = \"/apis/batch/v1/namespaces/\"+global.get(\"selProject\")+\"/jobs/\";\nelse\n    msg.topic = \"/apis/batch/v1/namespaces/\"+global.get(\"selProject\")+\"/jobs/\"+msg.payload.selJob+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":440,"wires":[["3f221e96.fc84fa"]]},{"id":"ea4cc2bf.1d6c28","type":"debug","z":"f569223c.ceccb8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":970,"y":380,"wires":[]},{"id":"5ddcc00.08a72c","type":"yaml","z":"f569223c.ceccb8","property":"payload","name":"","x":690,"y":440,"wires":[["ea4cc2bf.1d6c28","a4ac0d9a.e3b398"]]},{"id":"64e34617.ca10c8","type":"http in","z":"f569223c.ceccb8","name":"","url":"/JobYAML","method":"get","upload":false,"swaggerDoc":"","x":80,"y":500,"wires":[["9c016bab.66fc58"]]},{"id":"8912d0a1.86cd9","type":"http response","z":"f569223c.ceccb8","name":"","statusCode":"","headers":{},"x":730,"y":660,"wires":[]},{"id":"10e027fa.b44b98","type":"file","z":"f569223c.ceccb8","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":1030,"y":520,"wires":[["ab83ab22.04dfd8"]]},{"id":"9ecccd4f.0fc498","type":"file in","z":"f569223c.ceccb8","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":1060,"y":600,"wires":[["8912d0a1.86cd9"]]},{"id":"b9e1283c.3d3ad","type":"function","z":"f569223c.ceccb8","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\n}catch(e){}\n\ntry{\ndelete msg.payload.metadata.resourceVersion;\n}catch(e){}\n\ntry{\ndelete msg.payload.metadata.uid;\n}catch(e){}\n\ntry{\ndelete msg.payload.metadata.creationTimestamp;\n}catch(e){}\n\ntry{\ndelete msg.payload.metadata.labels.controller-uid;\n}catch(e){}\n\ntry{\nfor(i=0;i<msg.payload.items.length;i++){\n    try{\n    delete msg.payload.items[i].status;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.uid;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.selfLink;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.resourceVersion;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.generation;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n    }catch(e){}\n    \n    try{\n    delete msg.payload.items[i].spec.template.metadata.labels.controller-uid;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.spec.template.metadata.labels.controller-uid;\n    }catch(e){}\n\n    try{\n    delete msg.payload.items[i].spec.selector;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.labels.controller-uid;\n    }catch(e){}\n\n}}catch(e){}\n\ntry{\ndelete msg.payload.status;\n}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":520,"wires":[["5ddcc00.08a72c","ea4cc2bf.1d6c28"]]},{"id":"d3152a06.72363","type":"inject","z":"69c23d28.c8568c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":160,"wires":[["81dc5f23.82ab3"]]},{"id":"81dc5f23.82ab3","type":"function","z":"69c23d28.c8568c","name":"","func":"// GET namespace\nmsg.topic = \"/apis/batch/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/cronjobs/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":240,"wires":[["2c79f458.d152b4"]]},{"id":"b37567e3.c0aa58","type":"debug","z":"69c23d28.c8568c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":830,"y":220,"wires":[]},{"id":"1dbe9fcb.865a88","type":"http in","z":"69c23d28.c8568c","name":"Get Cron Jobs","url":"/OCPObject/cronjobs","method":"get","upload":false,"swaggerDoc":"","x":160,"y":320,"wires":[["81dc5f23.82ab3"]]},{"id":"f8491b9a.f4f388","type":"http response","z":"69c23d28.c8568c","name":"","statusCode":"","headers":{},"x":870,"y":140,"wires":[]},{"id":"d2d31618.c2e11","type":"function","z":"69c23d28.c8568c","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":240,"wires":[["b37567e3.c0aa58","277da173.6f201e"]]},{"id":"277da173.6f201e","type":"template","z":"69c23d28.c8568c","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selCronJob){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selCronJob.value=selCronJob;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/CronJobYAML?selCronJob=\"+selCronJob+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selCronJob\" id=\"selCronJob\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllCronJob\" id=\"btnAllCronJob\" value=\"Get All Cron Jobs\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":640,"y":340,"wires":[["f8491b9a.f4f388"]]},{"id":"153bddb0.10aeb2","type":"inject","z":"69c23d28.c8568c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":460,"wires":[["b5b69fdd.cb9798"]]},{"id":"b5b69fdd.cb9798","type":"function","z":"69c23d28.c8568c","name":"","func":"// GET namespace\nif(msg.payload.selCronJob==\"ALL\")\n    msg.topic = \"/apis/batch/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/cronjobs/\";\nelse\n    msg.topic = \"/apis/batch/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/cronjobs/\"+msg.payload.selCronJob+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":540,"wires":[["e3b3c8fb.a204c"]]},{"id":"95785848.e01788","type":"debug","z":"69c23d28.c8568c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":930,"y":380,"wires":[]},{"id":"ec727241.c64278","type":"yaml","z":"69c23d28.c8568c","property":"payload","name":"","x":710,"y":540,"wires":[["95785848.e01788","5e69c791.bbee8"]]},{"id":"32d23a48.ae8406","type":"http in","z":"69c23d28.c8568c","name":"","url":"/CronJobYAML","method":"get","upload":false,"swaggerDoc":"","x":110,"y":600,"wires":[["b5b69fdd.cb9798"]]},{"id":"4460ab19.626ec4","type":"http response","z":"69c23d28.c8568c","name":"","statusCode":"","headers":{},"x":770,"y":700,"wires":[]},{"id":"27b26139.04a78e","type":"file","z":"69c23d28.c8568c","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":1030,"y":600,"wires":[["86546dfb.314138"]]},{"id":"519e33b0.70dc14","type":"file in","z":"69c23d28.c8568c","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":1020,"y":640,"wires":[["4460ab19.626ec4"]]},{"id":"696345dc.be6ff4","type":"function","z":"69c23d28.c8568c","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\ndelete msg.payload.metadata.resourceVersion;\ndelete msg.payload.metadata.uid;\ndelete msg.payload.metadata.creationTimestamp;\n\nfor(i=0;i<msg.payload.items.length;i++){\n    delete msg.payload.items[i].status;\n    delete msg.payload.items[i].metadata.uid;\n    delete msg.payload.items[i].metadata.selfLink;\n    delete msg.payload.items[i].metadata.resourceVersion;\n    delete msg.payload.items[i].metadata.generation;\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n\n}}catch(e){}\n\ntry{\ndelete msg.payload.status;\n}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":620,"wires":[["ec727241.c64278","95785848.e01788"]]},{"id":"92f466cf.753068","type":"debug","z":"1514bb34.595edd","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":500,"y":460,"wires":[]},{"id":"35abb08a.f79fc8","type":"function","z":"1514bb34.595edd","name":"","func":"var filteredItems=[];\nvar j=0;\nvar selProject=global.get(\"selProject\")+\"\";\nfor(var i=0;i<msg.payload.items.length;i++){\n    if(msg.payload.items[i].status.phase==\"Bound\")\n    {\n    if(msg.payload.items[i].spec.claimRef.namespace==selProject){\n        filteredItems[j]=msg.payload.items[i];\n        j=j+1;\n    }\n    }\n}\nmsg.payload=filteredItems;\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":160,"wires":[["a10a54f7.34e26","f4a0b9d3.4c3608"]]},{"id":"2b9c6c22.3d774c","type":"change","z":"1514bb34.595edd","name":"","rules":[{"t":"set","p":"selProject","pt":"global","to":"payload.selProject","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":180,"y":160,"wires":[["7e518249.7b5eec"]]},{"id":"f4a0b9d3.4c3608","type":"debug","z":"1514bb34.595edd","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":970,"y":160,"wires":[]},{"id":"22cabecf.d42802","type":"inject","z":"2d736774.e1987","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":40,"wires":[["5abcd1aa.832a78"]]},{"id":"5abcd1aa.832a78","type":"function","z":"2d736774.e1987","name":"","func":"// GET namespace\nmsg.topic = \"/apis/apiextensions.k8s.io/v1/customresourcedefinitions/cpdinstalls.cpd.ibm.com\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":140,"wires":[["29b32ed.1dda752"]]},{"id":"10644ab8.e7d2bd","type":"http in","z":"2d736774.e1987","name":"Get CRD","url":"/OCPObject/crd","method":"get","upload":false,"swaggerDoc":"","x":80,"y":200,"wires":[["5abcd1aa.832a78"]]},{"id":"ba3bb206.8f005","type":"http response","z":"2d736774.e1987","name":"","statusCode":"","headers":{},"x":890,"y":80,"wires":[]},{"id":"ceb3f7c4.e1965","type":"template","z":"2d736774.e1987","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(){\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/CRDYAML\";\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllSecret\" id=\"btnAllSecret\" value=\"Get All CRD's\" onclick=\"JavaScript:getSpec();\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec();\">Get Spec</a></td></tr>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":720,"y":180,"wires":[["ba3bb206.8f005"]]},{"id":"8cbb05c8.4ac7e8","type":"inject","z":"2d736774.e1987","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":360,"wires":[["e65001a1.a78168"]]},{"id":"e65001a1.a78168","type":"function","z":"2d736774.e1987","name":"","func":"// GET namespace\nmsg.topic = \"/apis/apiextensions.k8s.io/v1/customresourcedefinitions/cpdinstalls.cpd.ibm.com\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":440,"wires":[["783e2168.e7c56"]]},{"id":"b6bc190c.ff4328","type":"debug","z":"2d736774.e1987","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":910,"y":280,"wires":[]},{"id":"94811bc3.fbdd68","type":"yaml","z":"2d736774.e1987","property":"payload","name":"","x":610,"y":380,"wires":[["b6bc190c.ff4328","73940771.5cca4"]]},{"id":"5bd8105a.b16918","type":"http in","z":"2d736774.e1987","name":"","url":"/CRDYAML","method":"get","upload":false,"swaggerDoc":"","x":80,"y":500,"wires":[["e65001a1.a78168"]]},{"id":"430d2024.f01c48","type":"http response","z":"2d736774.e1987","name":"","statusCode":"","headers":{},"x":1150,"y":500,"wires":[]},{"id":"90b8a726.787188","type":"file","z":"2d736774.e1987","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":830,"y":440,"wires":[["246b8d85.a7e13a"]]},{"id":"4335e230.64b794","type":"file in","z":"2d736774.e1987","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":860,"y":500,"wires":[["430d2024.f01c48"]]},{"id":"c45e91d8.45d9a8","type":"http in","z":"bde43094.4c07f8","name":"Download Restore Spec","url":"/DownloadRestoreSpec","method":"get","upload":false,"swaggerDoc":"","x":130,"y":680,"wires":[["3ccae2df.b5c23e"]]},{"id":"727de38a.a1a364","type":"http response","z":"bde43094.4c07f8","name":"","statusCode":"","headers":{},"x":890,"y":700,"wires":[]},{"id":"e46ab990.16e3e","type":"file in","z":"bde43094.4c07f8","name":"","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":730,"y":700,"wires":[["727de38a.a1a364"]]},{"id":"3ccae2df.b5c23e","type":"exec","z":"bde43094.4c07f8","command":"/tmp/create-combined-spec.sh","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Merge all specs","x":280,"y":800,"wires":[["91b6dd5a.ca852"],["a1b596b5.e77088"],[]]},{"id":"a1b596b5.e77088","type":"debug","z":"bde43094.4c07f8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":490,"y":840,"wires":[]},{"id":"202eb113.249326","type":"inject","z":"cc1ec809.b0912","name":"","topic":"","payload":"{\"selProject\":\"openshift-image-registry\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":280,"wires":[["19dc02d7.ed9605"]]},{"id":"19dc02d7.ed9605","type":"function","z":"cc1ec809.b0912","name":"Get ALL PVCs in Project","func":"// GET namespace\nmsg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/persistentvolumeclaims/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":340,"wires":[["14f64537.938e03"]]},{"id":"5a7f9b28.bd1a2c","type":"debug","z":"cc1ec809.b0912","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":650,"y":600,"wires":[]},{"id":"3ed64812.10c74","type":"split","z":"cc1ec809.b0912","name":"Parallelize PVC Jobs","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":200,"y":440,"wires":[["f4ffc130.6433e8"]]},{"id":"39f401f9.116a46","type":"change","z":"cc1ec809.b0912","name":"PVC list","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.items","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":340,"wires":[["3ed64812.10c74"]]},{"id":"f4ffc130.6433e8","type":"change","z":"cc1ec809.b0912","name":"Get PVC Name","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.metadata.name","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":440,"wires":[["6c1e5c36.97b004"]]},{"id":"b9cc6700.86591","type":"function","z":"cc1ec809.b0912","name":"Format Clone Job Spec","func":"var pvcspec={\"apiVersion\":\"batch/v1\",\"kind\":\"Job\",\"metadata\":{\"name\":msg.payload+\"-clone-job\"},\"spec\":{\"template\":{\"spec\":{\"serviceAccount\":global.get(\"cloneServiceAccount\"),\"serviceAccountName\":global.get(\"cloneServiceAccount\"),\"securityContext\":{\"runAsUser\":0},\"containers\":[{\"image\":\"eeacms/rsync\",\"name\":global.get(\"selProject\")+\"-sync\",\"command\":[\"/bin/sh\",\"-xc\"],\"args\":[\"rsync --ignore-missing-args -r -a -c /\"+msg.payload+\" /clone-dir\"],\"volumeMounts\":[{\"name\":\"source-mount\",\"mountPath\":\"/\"+msg.payload},{\"name\":\"clone-mount\",\"mountPath\":\"/clone-dir\"}],\"resources\":null,\"securityContext\":{\"privileged\":true}}],\"restartPolicy\":\"OnFailure\",\"volumes\":[{\"name\":\"source-mount\",\"persistentVolumeClaim\":{\"claimName\":msg.payload}},{\"name\":\"clone-mount\",\"persistentVolumeClaim\":{\"claimName\":global.get(\"clonePVC\")}}]}}}};\n\nmsg.topic = \"/apis/batch/v1/namespaces/\"+global.get(\"selProject\")+\"/jobs\";\nmsg.method = \"POST\";\nmsg.payload=pvcspec;\nreturn msg;","outputs":1,"noerr":0,"x":970,"y":440,"wires":[["11c658de.0a519f"]]},{"id":"abea40d3.63d3c","type":"debug","z":"cc1ec809.b0912","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":910,"y":260,"wires":[]},{"id":"6c1e5c36.97b004","type":"switch","z":"cc1ec809.b0912","name":"Remove ClonePVC","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"clonePVC","vt":"global"}],"checkall":"true","repair":false,"outputs":1,"x":710,"y":440,"wires":[["b9cc6700.86591"]]},{"id":"2a00b841.ef1858","type":"inject","z":"6171a812.b668a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":460,"wires":[["6e6e17eb.4e0508"]]},{"id":"6e6e17eb.4e0508","type":"function","z":"6171a812.b668a","name":"","func":"// GET namespace\nmsg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\");\nflow.set(\"selProject\",global.get(\"selProject\"));\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":540,"wires":[["cd3e6c71.824dc8"]]},{"id":"655a8b5f.a9503c","type":"debug","z":"6171a812.b668a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":950,"y":440,"wires":[]},{"id":"ed9df8ad.43c038","type":"http in","z":"6171a812.b668a","name":"","url":"/OCPObject/Project","method":"get","upload":false,"swaggerDoc":"","x":150,"y":600,"wires":[["6e6e17eb.4e0508"]]},{"id":"b93c3b95.ff8a9","type":"http response","z":"6171a812.b668a","name":"","statusCode":"","headers":{},"x":1110,"y":620,"wires":[]},{"id":"bfcec3bc.c1a448","type":"change","z":"6171a812.b668a","name":"","rules":[{"t":"delete","p":"payload.metadata.selfLink","pt":"msg"},{"t":"delete","p":"payload.metadata.resourceVersion","pt":"msg"},{"t":"delete","p":"payload.metadata.uid","pt":"msg"},{"t":"delete","p":"payload.metadata.annotations.openshift.io/requester","pt":"msg"},{"t":"delete","p":"payload.status","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":540,"wires":[["655a8b5f.a9503c","5c917364.bafa7c","f748a2da.5f7f28"]]},{"id":"f748a2da.5f7f28","type":"debug","z":"6171a812.b668a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":970,"y":500,"wires":[]},{"id":"a0cba6e0.2bfae","type":"http in","z":"bde43094.4c07f8","name":"","url":"/renderjson.js","method":"get","upload":false,"swaggerDoc":"","x":190,"y":1060,"wires":[["2b66baf2.3651d6"]]},{"id":"3bf7e82b.ed96f8","type":"http response","z":"bde43094.4c07f8","name":"","statusCode":"","headers":{},"x":650,"y":1080,"wires":[]},{"id":"2b66baf2.3651d6","type":"template","z":"bde43094.4c07f8","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"// Copyright  2013-2017 David Caldwell <david@porkrind.org>\n//\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY\n// SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION\n// OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN\n// CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\n// Usage\n// -----\n// The module exports one entry point, the `renderjson()` function. It takes in\n// the JSON you want to render as a single argument and returns an HTML\n// element.\n//\n// Options\n// -------\n// renderjson.set_icons(\"+\", \"-\")\n//   This Allows you to override the disclosure icons.\n//\n// renderjson.set_show_to_level(level)\n//   Pass the number of levels to expand when rendering. The default is 0, which\n//   starts with everything collapsed. As a special case, if level is the string\n//   \"all\" then it will start with everything expanded.\n//\n// renderjson.set_max_string_length(length)\n//   Strings will be truncated and made expandable if they are longer than\n//   `length`. As a special case, if `length` is the string \"none\" then\n//   there will be no truncation. The default is \"none\".\n//\n// renderjson.set_sort_objects(sort_bool)\n//   Sort objects by key (default: false)\n//\n// renderjson.set_replacer(replacer_function)\n//   Equivalent of JSON.stringify() `replacer` argument when it's a function\n//\n// renderjson.set_collapse_msg(collapse_function)\n//   Accepts a function (len:number):string => {} where len is the length of the\n//   object collapsed.  Function should return the message displayed when a\n//   object is collapsed.  The default message is \"X items\"\n//\n// renderjson.set_property_list(property_list)\n//   Equivalent of JSON.stringify() `replacer` argument when it's an array\n//\n// Theming\n// -------\n// The HTML output uses a number of classes so that you can theme it the way\n// you'd like:\n//     .disclosure    (\"\", \"\")\n//     .syntax        (\",\", \":\", \"{\", \"}\", \"[\", \"]\")\n//     .string        (includes quotes)\n//     .number\n//     .boolean\n//     .key           (object key)\n//     .keyword       (\"null\", \"undefined\")\n//     .object.syntax (\"{\", \"}\")\n//     .array.syntax  (\"[\", \"]\")\n\nvar module, window, define, renderjson=(function() {\n    var themetext = function(/* [class, text]+ */) {\n        var spans = [];\n        while (arguments.length)\n            spans.push(append(span(Array.prototype.shift.call(arguments)),\n                              text(Array.prototype.shift.call(arguments))));\n        return spans;\n    };\n    var append = function(/* el, ... */) {\n        var el = Array.prototype.shift.call(arguments);\n        for (var a=0; a<arguments.length; a++)\n            if (arguments[a].constructor == Array)\n                append.apply(this, [el].concat(arguments[a]));\n            else\n                el.appendChild(arguments[a]);\n        return el;\n    };\n    var prepend = function(el, child) {\n        el.insertBefore(child, el.firstChild);\n        return el;\n    }\n    var isempty = function(obj, pl) { var keys = pl || Object.keys(obj);\n                                      for (var i in keys) if (Object.hasOwnProperty.call(obj, keys[i])) return false;\n                                      return true; }\n    var text = function(txt) { return document.createTextNode(txt) };\n    var div = function() { return document.createElement(\"div\") };\n    var span = function(classname) { var s = document.createElement(\"span\");\n                                     if (classname) s.className = classname;\n                                     return s; };\n    var A = function A(txt, classname, callback) { var a = document.createElement(\"a\");\n                                                   if (classname) a.className = classname;\n                                                   a.appendChild(text(txt));\n                                                   a.href = '#';\n                                                   a.onclick = function(e) { callback(); if (e) e.stopPropagation(); return false; };\n                                                   return a; };\n\n    function _renderjson(json, indent, dont_indent, show_level, options) {\n        var my_indent = dont_indent ? \"\" : indent;\n\n        var disclosure = function(open, placeholder, close, type, builder) {\n            var content;\n            var empty = span(type);\n            var show = function() { if (!content) append(empty.parentNode,\n                                                         content = prepend(builder(),\n                                                                           A(options.hide, \"disclosure\",\n                                                                             function() { content.style.display=\"none\";\n                                                                                          empty.style.display=\"inline\"; } )));\n                                    content.style.display=\"inline\";\n                                    empty.style.display=\"none\"; };\n            append(empty,\n                   A(options.show, \"disclosure\", show),\n                   themetext(type+ \" syntax\", open),\n                   A(placeholder, null, show),\n                   themetext(type+ \" syntax\", close));\n\n            var el = append(span(), text(my_indent.slice(0,-1)), empty);\n            if (show_level > 0 && type != \"string\")\n                show();\n            return el;\n        };\n\n        if (json === null) return themetext(null, my_indent, \"keyword\", \"null\");\n        if (json === void 0) return themetext(null, my_indent, \"keyword\", \"undefined\");\n\n        if (typeof(json) == \"string\" && json.length > options.max_string_length)\n            return disclosure('\"', json.substr(0,options.max_string_length)+\" ...\", '\"', \"string\", function () {\n                return append(span(\"string\"), themetext(null, my_indent, \"string\", JSON.stringify(json)));\n            });\n\n        if (typeof(json) != \"object\" || [Number, String, Boolean, Date].indexOf(json.constructor) >= 0) // Strings, numbers and bools\n            return themetext(null, my_indent, typeof(json), JSON.stringify(json));\n\n        if (json.constructor == Array) {\n            if (json.length == 0) return themetext(null, my_indent, \"array syntax\", \"[]\");\n\n            return disclosure(\"[\", options.collapse_msg(json.length), \"]\", \"array\", function () {\n                var as = append(span(\"array\"), themetext(\"array syntax\", \"[\", null, \"\\n\"));\n                for (var i=0; i<json.length; i++)\n                    append(as,\n                           _renderjson(options.replacer.call(json, i, json[i]), indent+\"    \", false, show_level-1, options),\n                           i != json.length-1 ? themetext(\"syntax\", \",\") : [],\n                           text(\"\\n\"));\n                append(as, themetext(null, indent, \"array syntax\", \"]\"));\n                return as;\n            });\n        }\n\n        // object\n        if (isempty(json, options.property_list))\n            return themetext(null, my_indent, \"object syntax\", \"{}\");\n\n        return disclosure(\"{\", options.collapse_msg(Object.keys(json).length), \"}\", \"object\", function () {\n            var os = append(span(\"object\"), themetext(\"object syntax\", \"{\", null, \"\\n\"));\n            for (var k in json) var last = k;\n            var keys = options.property_list || Object.keys(json);\n            if (options.sort_objects)\n                keys = keys.sort();\n            for (var i in keys) {\n                var k = keys[i];\n                if (!(k in json)) continue;\n                append(os, themetext(null, indent+\"    \", \"key\", '\"'+k+'\"', \"object syntax\", ': '),\n                       _renderjson(options.replacer.call(json, k, json[k]), indent+\"    \", true, show_level-1, options),\n                       k != last ? themetext(\"syntax\", \",\") : [],\n                       text(\"\\n\"));\n            }\n            append(os, themetext(null, indent, \"object syntax\", \"}\"));\n            return os;\n        });\n    }\n\n    var renderjson = function renderjson(json)\n    {\n        var options = new Object(renderjson.options);\n        options.replacer = typeof(options.replacer) == \"function\" ? options.replacer : function(k,v) { return v; };\n        var pre = append(document.createElement(\"pre\"), _renderjson(json, \"\", false, options.show_to_level, options));\n        pre.className = \"renderjson\";\n        return pre;\n    }\n    renderjson.set_icons = function(show, hide) { renderjson.options.show = show;\n                                                  renderjson.options.hide = hide;\n                                                  return renderjson; };\n    renderjson.set_show_to_level = function(level) { renderjson.options.show_to_level = typeof level == \"string\" &&\n                                                                                        level.toLowerCase() === \"all\" ? Number.MAX_VALUE\n                                                                                                                      : level;\n                                                     return renderjson; };\n    renderjson.set_max_string_length = function(length) { renderjson.options.max_string_length = typeof length == \"string\" &&\n                                                                                                 length.toLowerCase() === \"none\" ? Number.MAX_VALUE\n                                                                                                                                 : length;\n                                                          return renderjson; };\n    renderjson.set_sort_objects = function(sort_bool) { renderjson.options.sort_objects = sort_bool;\n                                                        return renderjson; };\n    renderjson.set_replacer = function(replacer) { renderjson.options.replacer = replacer;\n                                                   return renderjson; };\n    renderjson.set_collapse_msg = function(collapse_msg) { renderjson.options.collapse_msg = collapse_msg;\n                                                           return renderjson; };\n    renderjson.set_property_list = function(prop_list) { renderjson.options.property_list = prop_list;\n                                                         return renderjson; };\n    // Backwards compatiblity. Use set_show_to_level() for new code.\n    renderjson.set_show_by_default = function(show) { renderjson.options.show_to_level = show ? Number.MAX_VALUE : 0;\n                                                      return renderjson; };\n    renderjson.options = {};\n    renderjson.set_icons('', '');\n    renderjson.set_show_by_default(false);\n    renderjson.set_sort_objects(false);\n    renderjson.set_max_string_length(\"none\");\n    renderjson.set_replacer(void 0);\n    renderjson.set_property_list(void 0);\n    renderjson.set_collapse_msg(function(len) { return len + \" item\" + (len==1 ? \"\" : \"s\") })\n    return renderjson;\n})();\n\nif (define) define({renderjson:renderjson})\nelse (module||{}).exports = (window||{}).renderjson = renderjson;\n","output":"str","x":390,"y":1140,"wires":[["3bf7e82b.ed96f8"]]},{"id":"2eae018.7aa207e","type":"http in","z":"bde43094.4c07f8","name":"","url":"/jsontest","method":"get","upload":false,"swaggerDoc":"","x":170,"y":940,"wires":[["8fc1754a.fef1e8"]]},{"id":"5e8fba62.7eb9c4","type":"http response","z":"bde43094.4c07f8","name":"","statusCode":"","headers":{},"x":650,"y":960,"wires":[]},{"id":"8fc1754a.fef1e8","type":"template","z":"bde43094.4c07f8","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <style>\n      .renderjson a { text-decoration: none; }\n      .renderjson .disclosure { color: crimson;\n                                font-size: 150%; }\n      .renderjson .syntax { color: grey; }\n      .renderjson .string { color: darkred; }\n      .renderjson .number { color: darkcyan; }\n      .renderjson .boolean { color: blueviolet; }\n      .renderjson .key    { color: darkblue; }\n      .renderjson .keyword { color: blue; }\n      .renderjson .object.syntax { color: lightseagreen; }\n      .renderjson .array.syntax  { color: orange; }\n    </style>\n    <title></title>\n  </head>\n  <body>\n    <h1></h1>\n\n    <div id=\"dest\"></div>\n\n    <script type=\"text/javascript\" src=\"http://localhost:1880/renderjson.js\"></script>\n    <script>\ndocument.getElementById(\"dest\").appendChild(\n  renderjson//.set_show_by_default(true)\n            //.set_show_to_level(2)\n            //.set_sort_objects(true)\n            //.set_icons('+', '-')\n              .set_max_string_length(100)\n    ([\n\t{\n\t\tcolor: \"red\",\n\t\tvalue: \"#f00\"\n\t},\n\t{\n\t\tcolor: \"green\",\n\t\tvalue: \"#0f0\"\n\t},\n\t{\n\t\tcolor: \"blue\",\n\t\tvalue: \"#00f\"\n\t},\n\t{\n\t\tcolor: \"cyan\",\n\t\tvalue: \"#0ff\"\n\t},\n\t{\n\t\tcolor: \"magenta\",\n\t\tvalue: \"#f0f\"\n\t},\n\t{\n\t\tcolor: \"yellow\",\n\t\tvalue: \"#ff0\"\n\t},\n\t{\n\t\tcolor: \"black\",\n\t\tvalue: \"#000\"\n\t}\n]));\n\nrenderjson.set_property_list([\"a\", \"c\", \"b\", \"d\", \"g\", \"h\"]);\ndocument.getElementById(\"dest\").appendChild(renderjson({ a:0, b:1, c:2, d:3, e:4, f:5, g:{nope:1, a:2}, h:{A:1,B:2,C:3} }));\n\nrenderjson.set_property_list(void 0)\n          .set_replacer(function(k,v) {\n    var obj_from_dom = function (el) {\n        if (el.nodeType == el.TEXT_NODE)\n            return el.data;\n        var attributes=\"\";\n        if (el.attributes)\n            for (var i=0; i<el.attributes.length; i++)\n                attributes += \" \"+el.attributes.item(i).name + \"=\\\"\" + el.attributes.item(i).value + \"\\\"\";\n        var obj = {};\n        obj[\"<\"+el.tagName+attributes+\">\"] = Array.prototype.map.call(el.childNodes, obj_from_dom);\n        return obj;\n    };\n    if (v === window) return \"<window>\";\n    if (v === document) return \"<document>\";\n    if (typeof(v) == \"number\") return isFinite(v) ? v : v.toString(); // Capture NaNs and Infinity\n    if (typeof(v) == \"object\" && v && \"nodeType\" in v) return obj_from_dom(v);\n    else return v;\n});\ndocument.getElementById(\"dest\").appendChild(renderjson({ window: window, document: document, bad_nums:[1/0, parseInt(\"abcd\")], \"#dest\":document.getElementById(\"dest\") }));\n    </script>\n  </body>\n</html>\n","output":"str","x":390,"y":980,"wires":[["5e8fba62.7eb9c4"]]},{"id":"5c917364.bafa7c","type":"json","z":"6171a812.b668a","name":"","property":"payload","action":"str","pretty":false,"x":830,"y":620,"wires":[["f748a2da.5f7f28","14d96d87.e5fef2"]]},{"id":"14d96d87.e5fef2","type":"template","z":"6171a812.b668a","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <style>\n      .renderjson a { text-decoration: none; }\n      .renderjson .disclosure { color: crimson;\n                                font-size: 150%; }\n      .renderjson .syntax { color: grey; }\n      .renderjson .string { color: darkred; }\n      .renderjson .number { color: darkcyan; }\n      .renderjson .boolean { color: blueviolet; }\n      .renderjson .key    { color: darkblue; }\n      .renderjson .keyword { color: blue; }\n      .renderjson .object.syntax { color: lightseagreen; }\n      .renderjson .array.syntax  { color: orange; }\n    </style>\n    <title></title>\n  </head>\n  <body>\n      <iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n    <h1></h1>\n    <a href=\"JavaScript:getSpec();\">Get Spec</a>\n    <div id=\"dest\"></div>\n<script language=\"JavaScript\">\nfunction getSpec(){\n    document.all.frmGetSpec.selProject.value=localStorage.getItem(\"selProject\");\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/ProjectYAML\";\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n    <script type=\"text/javascript\" src=\"{{{global.urlPrefix}}}/renderjson.js\"></script>\n    <script>\n    \n    var str='{{payload}}';\ndocument.getElementById(\"dest\").appendChild(\n  renderjson//.set_show_by_default(true)\n            //.set_show_to_level(2)\n            //.set_sort_objects(true)\n            //.set_icons('+', '-')\n              .set_max_string_length(100)\n    (JSON.parse(str.replace(/&quot;/g, '\"').replace(/&#x2F;/g,'/'))));\n\n//renderjson.set_property_list([\"a\", \"c\", \"b\", \"d\", \"g\", \"h\"]);\n//document.getElementById(\"dest\").appendChild(renderjson({ a:0, b:1, c:2, d:3, e:4, f:5, g:{nope:1, a:2}, h:{A:1,B:2,C:3} }));\n\nrenderjson.set_property_list(void 0)\n          .set_replacer(function(k,v) {\n    var obj_from_dom = function (el) {\n        if (el.nodeType == el.TEXT_NODE)\n            return el.data;\n        var attributes=\"\";\n        if (el.attributes)\n            for (var i=0; i<el.attributes.length; i++)\n                attributes += \" \"+el.attributes.item(i).name + \"=\\\"\" + el.attributes.item(i).value + \"\\\"\";\n        var obj = {};\n        obj[\"<\"+el.tagName+attributes+\">\"] = Array.prototype.map.call(el.childNodes, obj_from_dom);\n        return obj;\n    };\n    if (v === window) return \"<window>\";\n    if (v === document) return \"<document>\";\n    if (typeof(v) == \"number\") return isFinite(v) ? v : v.toString(); // Capture NaNs and Infinity\n    if (typeof(v) == \"object\" && v && \"nodeType\" in v) return obj_from_dom(v);\n    else return v;\n});\n//document.getElementById(\"dest\").appendChild(renderjson({ window: window, document: document, bad_nums:[1/0, parseInt(\"abcd\")], \"#dest\":document.getElementById(\"dest\") }));\n    </script>\n    <form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n        <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n</form>\n  </body>\n</html>\n","output":"str","x":980,"y":620,"wires":[["b93c3b95.ff8a9"]]},{"id":"3acc17dc.7e1ad8","type":"inject","z":"6171a812.b668a","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":780,"wires":[["3a3be782.46f538"]]},{"id":"3a3be782.46f538","type":"function","z":"6171a812.b668a","name":"","func":"// GET namespace\nmsg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\");\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":860,"wires":[["83ac4cf5.4631d8"]]},{"id":"50ca36e5.c056b","type":"yaml","z":"6171a812.b668a","property":"payload","name":"","x":710,"y":800,"wires":[["d24a24e.e7b96d8"]]},{"id":"58d505b1.b9452c","type":"http in","z":"6171a812.b668a","name":"","url":"/ProjectYAML","method":"get","upload":false,"swaggerDoc":"","x":130,"y":920,"wires":[["3a3be782.46f538"]]},{"id":"7ad25949.9dab5","type":"http response","z":"6171a812.b668a","name":"","statusCode":"","headers":{},"x":750,"y":980,"wires":[]},{"id":"9ff43b06.278bc8","type":"file","z":"6171a812.b668a","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":910,"y":800,"wires":[["99a1b9f8.940f8"]]},{"id":"f2ebd8d7.f5288","type":"file in","z":"6171a812.b668a","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":1040,"y":980,"wires":[["7ad25949.9dab5"]]},{"id":"cca44201.9a7258","type":"change","z":"6171a812.b668a","name":"","rules":[{"t":"delete","p":"payload.metadata.selfLink","pt":"msg"},{"t":"delete","p":"payload.metadata.resourceVersion","pt":"msg"},{"t":"delete","p":"payload.metadata.uid","pt":"msg"},{"t":"delete","p":"payload.metadata.annotations.openshift.io/requester","pt":"msg"},{"t":"delete","p":"payload.status","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":900,"wires":[["50ca36e5.c056b"]]},{"id":"45b484f.67e36fc","type":"function","z":"fe6bf964.cbd89","name":"Wait for all tasks to finish","func":"context.data = context.data || new Object();\nconsole.log(msg.topic);\nswitch (msg.topic) {\n    case \"scc_task\":\n        context.data.scc_task = msg.payload;\n        msg = null;\n        break;\n    case \"sa_task\":\n        context.data.sa_task = msg.payload;\n        msg = null;\n        break;\n    case \"role_task\":\n        context.data.role_task = msg.payload;\n        msg = null;\n        break;\n    case \"rb_task\":\n        context.data.rb_task = msg.payload;\n        msg = null;\n        break;\n    case \"project_task\":\n        context.data.project_task = msg.payload;\n        msg = null;\n        break;\n    case \"crd_task\":\n        context.data.crd_task = msg.payload;\n        msg = null;\n        break;\n    case \"secrets_task\":\n        context.data.secrets_task = msg.payload;\n        msg = null;\n        break;\n    case \"configmaps_task\":\n        context.data.configmaps_task = msg.payload;\n        msg = null;\n        break;\n    case \"services_task\":\n        context.data.services_task = msg.payload;\n        msg = null;\n        break;\n    case \"pvcs_task\":\n        context.data.pvcs_task = msg.payload;\n        msg = null;\n        break;\n    case \"pvs_task\":\n        context.data.pvs_task = msg.payload;\n        msg = null;\n        break;\n    case \"deployments_task\":\n        context.data.deployments_task = msg.payload;\n        msg = null;\n        break;\n    case \"statefulsets_task\":\n        context.data.statefulsets_task = msg.payload;\n        msg = null;\n        break;\n //   default:\n //       msg = null;\n //   \tbreak;\n}\n\nif(context.data.project_task != null && context.data.crd_task != null && context.data.secrets_task != null && context.data.configmaps_task != null && context.data.pvs_task != null && context.data.pvcs_task != null&& context.data.deployments_task != null && context.data.statefulsets_task != null && context.data.services_task != null) {\n\tmsg2 = new Object();\n    msg2 = context.data;\n    context.data=null;\n\treturn msg2;\n} else return msg;","outputs":1,"noerr":0,"x":1350,"y":620,"wires":[["ca95619b.19d49"]]},{"id":"366b8109.f42766","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":620,"wires":[["45b484f.67e36fc"]]},{"id":"45b23957.46ab7","type":"debug","z":"fe6bf964.cbd89","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1870,"y":700,"wires":[]},{"id":"2326e3ed.a74dec","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":680,"wires":[["45b484f.67e36fc"]]},{"id":"16114656.7443aa","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":740,"wires":[["45b484f.67e36fc"]]},{"id":"a85ae86b.7e3bc8","type":"function","z":"fe6bf964.cbd89","name":"Config Map task","func":"msg.url=global.get(\"urlPrefix\")+\"/ConfigMapYAML?selProject=\"+global.get(\"selProject\")+\"&selConfigMap=ALL\";\nmsg.topic=\"configmaps_task\";\nmsg.payload=\"Config Map task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":620,"wires":[["1835ba30.4e2106"]]},{"id":"f5531e33.cc9208","type":"function","z":"fe6bf964.cbd89","name":"Services task","func":"msg.url=global.get(\"urlPrefix\")+\"/ServiceYAML?selProject=\"+global.get(\"selProject\")+\"&selService=ALL\";\nmsg.topic=\"services_task\";\nmsg.payload=\"Services task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":680,"wires":[["576fccd9.fa01fc"]]},{"id":"b7cf8755.9639c","type":"function","z":"fe6bf964.cbd89","name":"Secrets task","func":"msg.url=global.get(\"urlPrefix\")+\"/SecretYAML?selProject=\"+global.get(\"selProject\")+\"&selSecret=ALL\";\nmsg.topic=\"secrets_task\";\nmsg.payload=\"Secrets task3's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":740,"wires":[["d80df545.019fd8"]]},{"id":"e7bf97d5.84739","type":"inject","z":"fe6bf964.cbd89","name":"Start","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":98,"y":313,"wires":[["a85ae86b.7e3bc8","f5531e33.cc9208","b7cf8755.9639c","c966bd6f.a078e","3337b417.60c3bc","3fc1f111.594af6","2accaca3.cf8da4","bc82e361.a6937","80e51d97.072b88","92b1e20f.9435e","afb8cb00.6843f8","cccd390f.a9f558","efb805aa.0f3f3","678d0c17.0536ec","61c39713.a88d88"]]},{"id":"1835ba30.4e2106","type":"http request","z":"fe6bf964.cbd89","name":"Get Config Maps","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":610,"y":620,"wires":[["366b8109.f42766"]]},{"id":"576fccd9.fa01fc","type":"http request","z":"fe6bf964.cbd89","name":"Get Services","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":770,"y":680,"wires":[["2326e3ed.a74dec"]]},{"id":"d80df545.019fd8","type":"http request","z":"fe6bf964.cbd89","name":"Get Secrets","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":590,"y":740,"wires":[["16114656.7443aa"]]},{"id":"aeda5faf.10898","type":"debug","z":"25ba6d98.0a678a","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":260,"y":600,"wires":[]},{"id":"cd4287d4.3774c","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":560,"wires":[["45b484f.67e36fc"]]},{"id":"c966bd6f.a078e","type":"function","z":"fe6bf964.cbd89","name":"Project task","func":"msg.url=global.get(\"urlPrefix\")+\"/ProjectYAML?selProject=\"+global.get(\"selProject\");\nmsg.topic=\"project_task\";\nmsg.payload=\"Project task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":560,"wires":[["203371d.8a1c18e"]]},{"id":"203371d.8a1c18e","type":"http request","z":"fe6bf964.cbd89","name":"Get Project","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":750,"y":560,"wires":[["cd4287d4.3774c"]]},{"id":"66712a.baa1ced8","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":820,"wires":[["45b484f.67e36fc"]]},{"id":"3337b417.60c3bc","type":"function","z":"fe6bf964.cbd89","name":"CRD Task","func":"msg.url=global.get(\"urlPrefix\")+\"/CRDYAML\";\nmsg.topic=\"crd_task\";\nmsg.payload=\"CRD task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":380,"y":820,"wires":[["be33879f.b0dde"]]},{"id":"be33879f.b0dde","type":"http request","z":"fe6bf964.cbd89","name":"Get CRD","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":780,"y":820,"wires":[["66712a.baa1ced8"]]},{"id":"86d07b50.8c627","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":900,"wires":[["45b484f.67e36fc"]]},{"id":"3fc1f111.594af6","type":"function","z":"fe6bf964.cbd89","name":"PVs Task","func":"msg.url=global.get(\"urlPrefix\")+\"/PVYAML?selProject=\"+global.get(\"selProject\")+\"&selPV=ALL\";\nmsg.topic=\"pvs_task\";\nmsg.payload=\"PV task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":380,"y":900,"wires":[["e6586d93.db8ed"]]},{"id":"e6586d93.db8ed","type":"http request","z":"fe6bf964.cbd89","name":"Get PVs","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":580,"y":900,"wires":[["86d07b50.8c627"]]},{"id":"578b89b8.fea02","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":980,"wires":[["45b484f.67e36fc"]]},{"id":"2accaca3.cf8da4","type":"function","z":"fe6bf964.cbd89","name":"PVCs task","func":"msg.url=global.get(\"urlPrefix\")+\"/PVCYAML?selProject=\"+global.get(\"selProject\")+\"&selPVC=ALL\";\nmsg.topic=\"pvcs_task\";\nmsg.payload=\"PVCs task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":980,"wires":[["3382dec3.cd48ea"]]},{"id":"3382dec3.cd48ea","type":"http request","z":"fe6bf964.cbd89","name":"Get PVC","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":780,"y":980,"wires":[["578b89b8.fea02"]]},{"id":"e3f0b8f8.21b1b8","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":1060,"wires":[["45b484f.67e36fc"]]},{"id":"bc82e361.a6937","type":"function","z":"fe6bf964.cbd89","name":"Deployments task","func":"msg.url=global.get(\"urlPrefix\")+\"/DeploymentYAML?selProject=\"+global.get(\"selProject\")+\"&selDeployment=ALL\";\nmsg.topic=\"deployments_task\";\nmsg.payload=\"Deployments task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":1060,"wires":[["762d14c5.35ae5c"]]},{"id":"762d14c5.35ae5c","type":"http request","z":"fe6bf964.cbd89","name":"Get Deployments","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":610,"y":1060,"wires":[["e3f0b8f8.21b1b8"]]},{"id":"69c766fd.bcfdc","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":1140,"wires":[["45b484f.67e36fc"]]},{"id":"80e51d97.072b88","type":"function","z":"fe6bf964.cbd89","name":"Statefulsets task","func":"msg.url=global.get(\"urlPrefix\")+\"/StatefulSetYAML?selProject=\"+global.get(\"selProject\")+\"&selStatefulSet=ALL\";\nmsg.topic=\"statefulsets_task\";\nmsg.payload=\"Statefulsets task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":1140,"wires":[["9942d5e9.8eae08"]]},{"id":"9942d5e9.8eae08","type":"http request","z":"fe6bf964.cbd89","name":"Get Statefulsets","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":800,"y":1140,"wires":[["69c766fd.bcfdc"]]},{"id":"571141c2.511cd","type":"http in","z":"bde43094.4c07f8","name":"","url":"/setProject","method":"get","upload":false,"swaggerDoc":"","x":100,"y":260,"wires":[["489296a4.30ac78"]]},{"id":"489296a4.30ac78","type":"change","z":"bde43094.4c07f8","name":"","rules":[{"t":"set","p":"selProject","pt":"global","to":"payload.selProject","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":260,"wires":[["79dfa38.cfdd6dc"]]},{"id":"79dfa38.cfdd6dc","type":"http response","z":"bde43094.4c07f8","name":"","statusCode":"","headers":{},"x":630,"y":260,"wires":[]},{"id":"c2952867.5083b8","type":"ui_button","z":"cc1ec809.b0912","name":"","group":"82bd631c.dc015","order":8,"width":0,"height":0,"passthru":false,"label":"5. Clone data - Source","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":140,"y":340,"wires":[["aa50a5c9.27933"]]},{"id":"dd5343d4.02b3a","type":"ui_button","z":"fe6bf964.cbd89","name":"","group":"82bd631c.dc015","order":7,"width":0,"height":0,"passthru":false,"label":"4. Clone source metadata","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":130,"y":60,"wires":[["c966bd6f.a078e","a85ae86b.7e3bc8","f5531e33.cc9208","b7cf8755.9639c","3337b417.60c3bc","3fc1f111.594af6","2accaca3.cf8da4","bc82e361.a6937","80e51d97.072b88","92b1e20f.9435e","afb8cb00.6843f8","cccd390f.a9f558","efb805aa.0f3f3","678d0c17.0536ec","61c39713.a88d88"]]},{"id":"2c80df6c.038fb8","type":"kubernetes-client-http","z":"6171a812.b668a","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":120,"wires":[["dd6f4fd1.86489","5b414b2e.6325c4"]]},{"id":"76276b8a.5e438c","type":"kubernetes-client-http","z":"1629fa05.cf1a1e","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":470,"y":60,"wires":[["97b94f1d.3f7c08"]]},{"id":"18ce06d6.0ef3e1","type":"kubernetes-client-http","z":"6171a812.b668a","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":340,"wires":[["721571cc.802088"]]},{"id":"4f4cedbc.86d50c","type":"kubernetes-client-http","z":"1629fa05.cf1a1e","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":450,"y":380,"wires":[["4f986f5a.66bba8"]]},{"id":"a87dd462.609e08","type":"kubernetes-client-http","z":"1f666544.2821c3","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":510,"y":60,"wires":[["272b998a.2bef7e"]]},{"id":"fd34644f.bbd15","type":"kubernetes-client-http","z":"1f666544.2821c3","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":450,"y":360,"wires":[["b9e238b7.e9f688"]]},{"id":"573868a4.d94c38","type":"kubernetes-client-http","z":"466cbb18.786edc","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":490,"y":80,"wires":[["4814f669.3149e"]]},{"id":"48aaddf3.55be74","type":"kubernetes-client-http","z":"466cbb18.786edc","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":380,"wires":[["55b4d102.42763","21f14278.05463e"]]},{"id":"8fc57101.ff0e18","type":"kubernetes-client-http","z":"65f4d4c1.1b0de4","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":510,"y":80,"wires":[["dfa6c47f.d867d"]]},{"id":"54c8a056.08b02","type":"kubernetes-client-http","z":"65f4d4c1.1b0de4","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":450,"y":380,"wires":[["23e3c099.5892e"]]},{"id":"6b2981f4.559018","type":"kubernetes-client-http","z":"1514bb34.595edd","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":550,"y":100,"wires":[["35abb08a.f79fc8","f4a0b9d3.4c3608"]]},{"id":"62d5eb1c.1e272c","type":"kubernetes-client-http","z":"1514bb34.595edd","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":490,"y":400,"wires":[["f8c61daa.ae14"]]},{"id":"c4796b8b.ad05e","type":"kubernetes-client-http","z":"25ba6d98.0a678a","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":490,"y":80,"wires":[["2d4a1cb6.017bec"]]},{"id":"7b369e96.be336","type":"kubernetes-client-http","z":"25ba6d98.0a678a","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":380,"wires":[["e5b41301.f6be2"]]},{"id":"c2670d9.0659ef","type":"kubernetes-client-http","z":"ee2cb780.64d2f8","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":510,"y":100,"wires":[["d5a3e00b.f47688"]]},{"id":"624e465c.3f0468","type":"kubernetes-client-http","z":"ee2cb780.64d2f8","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":450,"y":400,"wires":[["a22c928f.9f0c18"]]},{"id":"2b322c2f.41f674","type":"kubernetes-client-http","z":"f569223c.ceccb8","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":490,"y":80,"wires":[["8a12eb34.9ed39"]]},{"id":"3f221e96.fc84fa","type":"kubernetes-client-http","z":"f569223c.ceccb8","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":380,"wires":[["b9e1283c.3d3ad"]]},{"id":"2c79f458.d152b4","type":"kubernetes-client-http","z":"69c23d28.c8568c","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":510,"y":180,"wires":[["d2d31618.c2e11"]]},{"id":"e3b3c8fb.a204c","type":"kubernetes-client-http","z":"69c23d28.c8568c","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":450,"y":480,"wires":[["696345dc.be6ff4"]]},{"id":"29b32ed.1dda752","type":"kubernetes-client-http","z":"2d736774.e1987","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":490,"y":80,"wires":[["ceb3f7c4.e1965"]]},{"id":"783e2168.e7c56","type":"kubernetes-client-http","z":"2d736774.e1987","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":380,"wires":[["94811bc3.fbdd68","b6bc190c.ff4328"]]},{"id":"14f64537.938e03","type":"kubernetes-client-http","z":"cc1ec809.b0912","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":650,"y":340,"wires":[["39f401f9.116a46","abea40d3.63d3c"]]},{"id":"11c658de.0a519f","type":"kubernetes-client-http","z":"cc1ec809.b0912","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":170,"y":580,"wires":[["5a7f9b28.bd1a2c"]]},{"id":"cd3e6c71.824dc8","type":"kubernetes-client-http","z":"6171a812.b668a","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":470,"y":480,"wires":[["bfcec3bc.c1a448"]]},{"id":"83ac4cf5.4631d8","type":"kubernetes-client-http","z":"6171a812.b668a","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":470,"y":800,"wires":[["cca44201.9a7258"]]},{"id":"3dbfc73d.4b447","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":1200,"wires":[["45b484f.67e36fc"]]},{"id":"92b1e20f.9435e","type":"function","z":"fe6bf964.cbd89","name":"Jobs task","func":"msg.url=global.get(\"urlPrefix\")+\"/JobYAML?selProject=\"+global.get(\"selProject\")+\"&selJob=ALL\";\nmsg.topic=\"job_task\";\nmsg.payload=\"Jobs task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":380,"y":1200,"wires":[["44018066.a8aa6"]]},{"id":"44018066.a8aa6","type":"http request","z":"fe6bf964.cbd89","name":"Get Jobs","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":580,"y":1200,"wires":[["3dbfc73d.4b447"]]},{"id":"a73e52e3.241b1","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":1260,"wires":[["45b484f.67e36fc"]]},{"id":"afb8cb00.6843f8","type":"function","z":"fe6bf964.cbd89","name":"Statefulsets task","func":"msg.url=global.get(\"urlPrefix\")+\"/CronJobYAML?selProject=\"+global.get(\"selProject\")+\"&selCronJob=ALL\";\nmsg.topic=\"cronjobs_task\";\nmsg.payload=\"Cron Jobs task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":1260,"wires":[["866024ba.e38c3"]]},{"id":"866024ba.e38c3","type":"http request","z":"fe6bf964.cbd89","name":"Get Cron Jobs","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":800,"y":1260,"wires":[["a73e52e3.241b1"]]},{"id":"185144e1.c9c06b","type":"inject","z":"18d4cd67.9cdadb","name":"Load Globals from File","topic":"","payload":"{\"filename\":\"globals.csv\"}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":100,"wires":[["2fe86400.1598a4"]]},{"id":"f061ec9f.82cbe","type":"csv","z":"18d4cd67.9cdadb","name":"","sep":",","hdrin":"","hdrout":"","multi":"mult","ret":"\\n","temp":"Parameter,Value","skip":"0","strings":true,"x":650,"y":160,"wires":[["c1272b8.e5ff658"]]},{"id":"c89e58cb.d5a44","type":"file in","z":"18d4cd67.9cdadb","name":"","filename":"","format":"lines","chunk":false,"sendError":false,"encoding":"none","x":530,"y":160,"wires":[["f061ec9f.82cbe"]]},{"id":"2ad5fa03.b700be","type":"inject","z":"18d4cd67.9cdadb","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":40,"wires":[["cc5ed6d5.759708"]]},{"id":"cc5ed6d5.759708","type":"function","z":"18d4cd67.9cdadb","name":"loadTableFromGlobals","func":"// rmsg = {\"payload\":{\"command\":\"setData\"}}\n\nrmsg = {}\nrmsg = {\"payload\":{\"command\":\"setData\"}}\n// msg.payload = {\"command\":\"clearData\"};\nnode.send(rmsg);\n\nkeys = global.keys();\n\nkeylist = []\nfor (var i = 0; i < keys.length; i++) {\n    key = keys[i]\n    keyval = global.get(key)\n    k = {}\n    k[\"Parameter\"] = key \n    k[\"Value\"] = keyval \n    if(key!=\"apikey\")\n        keylist.push(k)\n}\n\nmsg.payload = keylist\nreturn msg;","outputs":1,"noerr":0,"x":700,"y":40,"wires":[["1610404f.16bcf8"]]},{"id":"2fe86400.1598a4","type":"ui_button","z":"18d4cd67.9cdadb","name":"","group":"5fd94027.522448","order":1,"width":4,"height":1,"passthru":true,"label":"Load File","tooltip":"","color":"","bgcolor":"","icon":"","payload":"globals.csv","payloadType":"str","topic":"","x":180,"y":160,"wires":[["6eae76d6.b7e93"]]},{"id":"300ac0bd.917a5","type":"function","z":"18d4cd67.9cdadb","name":"","func":"keys = global.keys();\n\nlines = []\n\nfor (var i = 0; i < keys.length; i++) {\n    line = {}\n    line[\"Parameter\"] = keys[i]\n    line[\"Value\"] = global.get(keys[i])\n    lines.push(line)\n}\n\nmsg.payload = lines\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":240,"wires":[["70deabfe.986814"]]},{"id":"28d612.174661ee","type":"file","z":"18d4cd67.9cdadb","name":"","filename":"globals.csv","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":830,"y":240,"wires":[["2fe86400.1598a4"]]},{"id":"70deabfe.986814","type":"csv","z":"18d4cd67.9cdadb","name":"","sep":",","hdrin":"","hdrout":"","multi":"one","ret":"\\n","temp":"Parameter, Value","skip":"0","strings":true,"x":650,"y":240,"wires":[["28d612.174661ee"]]},{"id":"6eae76d6.b7e93","type":"change","z":"18d4cd67.9cdadb","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":160,"wires":[["c89e58cb.d5a44"]]},{"id":"c1272b8.e5ff658","type":"function","z":"18d4cd67.9cdadb","name":"Prime Globals","func":"for (var i = 0; i < msg.payload.length; i++) {\n    global.set(msg.payload[i].Parameter, msg.payload[i].Value)\n}\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":160,"wires":[["cc5ed6d5.759708","d44d6b8e.63a008"]]},{"id":"1610404f.16bcf8","type":"ui_table","z":"18d4cd67.9cdadb","group":"5fd94027.522448","name":"","order":4,"width":16,"height":9,"columns":[{"field":"Parameter","title":"Parameter","width":"20%","align":"left","formatter":"plaintext","formatterParams":{"target":"_blank"}},{"field":"Value","title":"Values","width":"80%","align":"left","formatter":"plaintext","formatterParams":{"target":"_blank"}}],"outputs":1,"cts":true,"x":920,"y":40,"wires":[["e38f5ce1.0f982"]]},{"id":"e38f5ce1.0f982","type":"ui_form","z":"18d4cd67.9cdadb","name":"","label":"Add / Change / Delete","group":"5fd94027.522448","order":5,"width":0,"height":0,"options":[{"label":"Parameter","value":"Parameter","type":"text","required":false,"rows":null},{"label":"Value","value":"Value","type":"text","required":false,"rows":null}],"formValue":{"Parameter":"","Value":""},"payload":"","submit":"submit","cancel":"cancel","topic":"","x":340,"y":320,"wires":[["f59c9389.010878"]]},{"id":"f59c9389.010878","type":"function","z":"18d4cd67.9cdadb","name":"","func":"if (msg.payload.Value == \"\") {\n    global.set(msg.payload.Parameter)\n} else {\nglobal.set(msg.payload.Parameter, msg.payload.Value)\n}\n\n// keylist = []\n// k = {}\n// k[\"Parameter\"] = msg.payload.Parameter\n// k[\"Value\"] = msg.payload.Value\n// keylist.push(k)\n\nmsg.payload = {\"Parameter\": \"\", \"Value\": \"\"}\nreturn [msg]","outputs":1,"noerr":0,"x":530,"y":320,"wires":[["cc5ed6d5.759708","e38f5ce1.0f982","300ac0bd.917a5"]]},{"id":"8320447e.cf86a","type":"ui_button","z":"18d4cd67.9cdadb","name":"","group":"5fd94027.522448","order":3,"width":4,"height":1,"passthru":false,"label":"Delete File","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":400,"y":380,"wires":[["c026ff35.5073a8"]]},{"id":"c026ff35.5073a8","type":"file","z":"18d4cd67.9cdadb","name":"","filename":"globals.csv","appendNewline":true,"createDir":false,"overwriteFile":"delete","encoding":"none","x":590,"y":380,"wires":[[]]},{"id":"7d327d8d.d33e94","type":"ui_ui_control","z":"18d4cd67.9cdadb","name":"","events":"change","x":360,"y":80,"wires":[["cc5ed6d5.759708"]]},{"id":"4b1c2987.daac5","type":"change","z":"466cbb18.786edc","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileSecrets')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":440,"wires":[["7a0f6655.5fcf58"]]},{"id":"36a4cb6c.15e4cc","type":"change","z":"bde43094.4c07f8","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/k8s_spec.yaml\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":580,"wires":[["c2cdcca6.feb8"]]},{"id":"91b6dd5a.ca852","type":"change","z":"bde43094.4c07f8","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/combined-restore-spec.yaml\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":700,"wires":[["e46ab990.16e3e"]]},{"id":"d24a24e.e7b96d8","type":"change","z":"6171a812.b668a","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileProjects')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":880,"wires":[["9ff43b06.278bc8"]]},{"id":"99a1b9f8.940f8","type":"change","z":"6171a812.b668a","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileProjects')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030,"y":920,"wires":[["f2ebd8d7.f5288"]]},{"id":"73940771.5cca4","type":"change","z":"2d736774.e1987","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileCRD')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":440,"wires":[["90b8a726.787188"]]},{"id":"246b8d85.a7e13a","type":"change","z":"2d736774.e1987","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileCRD')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":500,"wires":[["4335e230.64b794"]]},{"id":"9aa3fe07.3bbe88","type":"change","z":"466cbb18.786edc","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileSecrets')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":500,"wires":[["1dd7aef3.1ca4f1"]]},{"id":"a53bd421.ca0b1","type":"change","z":"ee2cb780.64d2f8","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileConfigMaps')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":520,"wires":[["35bb361b.d129d2"]]},{"id":"7c3baa41.1c4894","type":"change","z":"ee2cb780.64d2f8","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileConfigMaps')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":600,"wires":[["e1e77fb5.3e23b"]]},{"id":"741ed0bd.084c58","type":"change","z":"1514bb34.595edd","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('filePersistentVolumes')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":520,"wires":[["5c270b01.a37784"]]},{"id":"624ab88d.38197","type":"change","z":"1514bb34.595edd","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('filePersistentVolumes')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":580,"wires":[["35d94776.96df7"]]},{"id":"4c0fa799.34bf38","type":"change","z":"65f4d4c1.1b0de4","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('filePersistentVolumeClaims')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":520,"wires":[["d1ed9ba9.07363"]]},{"id":"e7be83df.d6b0e","type":"change","z":"65f4d4c1.1b0de4","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('filePersistentVolumeClaims')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":580,"wires":[["e2dc3f22.70926"]]},{"id":"90b96c16.414c88","type":"change","z":"1629fa05.cf1a1e","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileDeployments')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":520,"wires":[["b171025b.231968"]]},{"id":"15c330bc.c0f6a7","type":"change","z":"1629fa05.cf1a1e","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileDeployments')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":560,"wires":[["380bfd2d.bfd9c2"]]},{"id":"64a5a902.f11ec8","type":"change","z":"1f666544.2821c3","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileStatefulSets')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":500,"wires":[["ed8c074.d1045f8"]]},{"id":"16da7f5c.2cc749","type":"change","z":"1f666544.2821c3","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileStatefulSets')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":540,"wires":[["b0e0bd01.6ec28"]]},{"id":"2459c647.8a131a","type":"change","z":"25ba6d98.0a678a","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileServices')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":520,"wires":[["8fdb0629.e80478"]]},{"id":"c539d104.596ee8","type":"change","z":"25ba6d98.0a678a","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileServices')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":600,"wires":[["63064c68.aaaaec"]]},{"id":"a4ac0d9a.e3b398","type":"change","z":"f569223c.ceccb8","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileJobs')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":520,"wires":[["10e027fa.b44b98"]]},{"id":"ab83ab22.04dfd8","type":"change","z":"f569223c.ceccb8","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileJobs')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":600,"wires":[["9ecccd4f.0fc498"]]},{"id":"5e69c791.bbee8","type":"change","z":"69c23d28.c8568c","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileCronJobs')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":600,"wires":[["27b26139.04a78e"]]},{"id":"86546dfb.314138","type":"change","z":"69c23d28.c8568c","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileCronJobs')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":640,"wires":[["519e33b0.70dc14"]]},{"id":"61dda83c.fd841","type":"change","z":"bde43094.4c07f8","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"$globalContext('urlPrefix') & \"/OCPProjects\"\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":180,"wires":[["8bbd9727.ab3ac"]]},{"id":"b37aa7e0.633028","type":"change","z":"bde43094.4c07f8","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"$globalContext('urlPrefix') & \"/OCPProjectObjects\"\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":340,"wires":[["1bdc0abb.c8df65"]]},{"id":"a97c3e24.5c2c18","type":"debug","z":"18d4cd67.9cdadb","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":430,"y":500,"wires":[]},{"id":"a1d8cb69.082b38","type":"http in","z":"bde43094.4c07f8","name":"Explore - First Screen","url":"/selectFirstScreen","method":"get","upload":false,"swaggerDoc":"","x":600,"y":460,"wires":[["a57033a3.d994f"]]},{"id":"fefacce6.b510f","type":"http response","z":"bde43094.4c07f8","name":"","statusCode":"","headers":{},"x":1090,"y":460,"wires":[]},{"id":"a57033a3.d994f","type":"template","z":"bde43094.4c07f8","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<h3>Readme</h3>\n<ul>\n    <li>Configure kube config to connect to OCP cluster (currently done by navigating to the node-red flow but will be programmatically controlled soon)</li>\n    <li>Setup global configuration parameters</li>\n    <li>Select K8s object type from the left and explore available instances in the connected OCP cluster.</li>\n</ul>\n\n<h3>Global configuration parameters (with suggested default values)</h3>\n<table border=1>\n    <tr>\n        <td>selProject</td><td>cp4d</td>\n    </tr>\n    <tr>\n        <td>yamlSaveLocation</td><td>/usr/src/node-red/CloneYAMLFiles</td>\n    </tr>\n    <tr>\n        <td>scriptsLocation</td><td>/tmp</td>\n    </tr>\n    <tr>\n        <td>urlPrefix</td><td>http://localhost:1880</td>\n    </tr>\n    <tr>\n        <td>restoreImageRegistry</td><td>NOT_USED_CURRENTLY</td>\n    </tr>\n</table>","output":"str","x":860,"y":460,"wires":[["fefacce6.b510f"]]},{"id":"e17e4281.8c3c78","type":"inject","z":"1629fa05.cf1a1e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":1020,"wires":[["848f5f1e.7adbd8"]]},{"id":"848f5f1e.7adbd8","type":"function","z":"1629fa05.cf1a1e","name":"","func":"// GET namespace\nmsg.topic = \"/apis/apps/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/deployments/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":1100,"wires":[["831bc6c6.b9bb58"]]},{"id":"637a5f13.9ece58","type":"debug","z":"1629fa05.cf1a1e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1010,"y":1000,"wires":[]},{"id":"831bc6c6.b9bb58","type":"kubernetes-client-http","z":"1629fa05.cf1a1e","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":1040,"wires":[["e049aa66.196248"]]},{"id":"875da70e.faa14","type":"split","z":"1629fa05.cf1a1e","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":630,"y":1220,"wires":[["4c8e990e.bc963"]]},{"id":"e049aa66.196248","type":"change","z":"1629fa05.cf1a1e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.items","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":1220,"wires":[["875da70e.faa14"]]},{"id":"4c8e990e.bc963","type":"change","z":"1629fa05.cf1a1e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"oc scale deployment \" & payload.metadata.name & \" --replicas=\" & payload.spec.replicas","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1140,"wires":[["ebc99492.44fff"]]},{"id":"ebc99492.44fff","type":"file","z":"1629fa05.cf1a1e","name":"","filename":"deployment_scaling.sh","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"none","x":910,"y":1060,"wires":[["637a5f13.9ece58"]]},{"id":"7dbbaa1c.f309f4","type":"inject","z":"1629fa05.cf1a1e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":1260,"wires":[["23be47e0.a03c6"]]},{"id":"23be47e0.a03c6","type":"function","z":"1629fa05.cf1a1e","name":"","func":"// GET namespace\nmsg.topic = \"/apis/apps/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/deployments/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":1340,"wires":[["5bed0508.5f38dc"]]},{"id":"9084baad.72a2e","type":"debug","z":"1629fa05.cf1a1e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":990,"y":1240,"wires":[]},{"id":"5bed0508.5f38dc","type":"kubernetes-client-http","z":"1629fa05.cf1a1e","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":410,"y":1280,"wires":[["5c795c83.9501fc"]]},{"id":"343d1899.1cff68","type":"split","z":"1629fa05.cf1a1e","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":610,"y":1460,"wires":[["957ef691.d60de8"]]},{"id":"5c795c83.9501fc","type":"change","z":"1629fa05.cf1a1e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.items","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":1460,"wires":[["343d1899.1cff68"]]},{"id":"957ef691.d60de8","type":"change","z":"1629fa05.cf1a1e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"oc scale deployment \" & payload.metadata.name & \" --replicas=0\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1380,"wires":[["77f905b8.2f3fb4"]]},{"id":"77f905b8.2f3fb4","type":"file","z":"1629fa05.cf1a1e","name":"","filename":"scaledown_deployment.sh","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"none","x":900,"y":1300,"wires":[["9084baad.72a2e"]]},{"id":"79499cda.36591c","type":"csv","z":"bde43094.4c07f8","name":"","sep":",","hdrin":"","hdrout":"","multi":"mult","ret":"\\n","temp":"Parameter,Value","skip":"0","strings":true,"x":430,"y":100,"wires":[["c66f8db.d3cacf"]]},{"id":"fca4faba.28495","type":"file in","z":"bde43094.4c07f8","name":"","filename":"globals.csv","format":"lines","chunk":false,"sendError":false,"encoding":"none","x":250,"y":100,"wires":[["79499cda.36591c"]]},{"id":"c66f8db.d3cacf","type":"function","z":"bde43094.4c07f8","name":"","func":"for (var i = 0; i < msg.payload.length; i++) {\n    global.set(msg.payload[i].Parameter, msg.payload[i].Value)\n}\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":100,"wires":[[]]},{"id":"e3a6747e.d8a59","type":"inject","z":"fba5569c.aa544","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":60,"wires":[["b839b9d4.45c388"]]},{"id":"b839b9d4.45c388","type":"function","z":"fba5569c.aa544","name":"","func":"// GET namespace\nmsg.topic = \"/apis/rbac.authorization.k8s.io/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/roles/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":140,"wires":[["1f79dfcb.dfa5e"]]},{"id":"151e1e86.61d691","type":"debug","z":"fba5569c.aa544","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":810,"y":120,"wires":[]},{"id":"4970df71.087878","type":"http in","z":"fba5569c.aa544","name":"Get Roles","url":"/OCPObject/roles","method":"get","upload":false,"swaggerDoc":"","x":120,"y":220,"wires":[["b839b9d4.45c388"]]},{"id":"5f997979.1f0818","type":"http response","z":"fba5569c.aa544","name":"","statusCode":"","headers":{},"x":850,"y":40,"wires":[]},{"id":"61044e19.9f03c","type":"function","z":"fba5569c.aa544","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":140,"wires":[["448f8d16.14cb7c"]]},{"id":"448f8d16.14cb7c","type":"template","z":"fba5569c.aa544","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selRole){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selRole.value=selRole;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/RoleYAML?selRole=\"+selRole+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selRole\" id=\"selRole\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllRole\" id=\"btnAllRole\" value=\"Get All Roles\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":620,"y":240,"wires":[["5f997979.1f0818"]]},{"id":"d111a44f.862dd8","type":"inject","z":"fba5569c.aa544","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":360,"wires":[["22d3eab2.b96d36"]]},{"id":"22d3eab2.b96d36","type":"function","z":"fba5569c.aa544","name":"","func":"// GET namespace\nif(msg.payload.selRole==\"ALL\")\n    msg.topic = \"/apis/rbac.authorization.k8s.io/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/roles/\";\nelse\n    msg.topic = \"/apis/rbac.authorization.k8s.io/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/roles/\"+msg.payload.selRole+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":440,"wires":[["f00c181.2ffcb68"]]},{"id":"69257a08.ab03e4","type":"debug","z":"fba5569c.aa544","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":910,"y":280,"wires":[]},{"id":"a1436ef0.5ad94","type":"yaml","z":"fba5569c.aa544","property":"payload","name":"","x":670,"y":360,"wires":[["69257a08.ab03e4","478dab80.70177c"]]},{"id":"360c6c6f.94acb4","type":"http in","z":"fba5569c.aa544","name":"","url":"/RoleYAML","method":"get","upload":false,"swaggerDoc":"","x":80,"y":500,"wires":[["22d3eab2.b96d36"]]},{"id":"2cabbe21.1c4752","type":"http response","z":"fba5569c.aa544","name":"","statusCode":"","headers":{},"x":730,"y":560,"wires":[]},{"id":"5ddcb038.0f6948","type":"file","z":"fba5569c.aa544","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":970,"y":440,"wires":[["f95950b1.7b031"]]},{"id":"23174ac0.bdf24e","type":"file in","z":"fba5569c.aa544","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":960,"y":500,"wires":[["2cabbe21.1c4752"]]},{"id":"e2bf12dd.b87778","type":"function","z":"fba5569c.aa544","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.uid;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.resourceVersion;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.creationTimestamp;\n}catch(e){}\n\ntry{\nfor(i=0;i<msg.payload.items.length;i++){\n    try{\n    delete msg.payload.items[i].status;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.namespace;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.uid;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.selfLink;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.resourceVersion;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.generation;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n    }catch(e){}\n}\n}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":520,"wires":[["a1436ef0.5ad94"]]},{"id":"1f79dfcb.dfa5e","type":"kubernetes-client-http","z":"fba5569c.aa544","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":490,"y":80,"wires":[["61044e19.9f03c","151e1e86.61d691"]]},{"id":"f00c181.2ffcb68","type":"kubernetes-client-http","z":"fba5569c.aa544","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":380,"wires":[["e2bf12dd.b87778","69257a08.ab03e4"]]},{"id":"478dab80.70177c","type":"change","z":"fba5569c.aa544","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileRoles')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":440,"wires":[["5ddcb038.0f6948"]]},{"id":"f95950b1.7b031","type":"change","z":"fba5569c.aa544","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileRoles')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":500,"wires":[["23174ac0.bdf24e"]]},{"id":"fe0a9504.726f6","type":"inject","z":"243161c.142f31e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":60,"wires":[["edf6c0e9.09664"]]},{"id":"edf6c0e9.09664","type":"function","z":"243161c.142f31e","name":"","func":"// GET namespace\nmsg.topic = \"/apis/rbac.authorization.k8s.io/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/rolebindings/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":140,"wires":[["c0aecddf.e5825"]]},{"id":"8485fdfd.3682a","type":"debug","z":"243161c.142f31e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":810,"y":120,"wires":[]},{"id":"a8b4406.cc5fcc","type":"http in","z":"243161c.142f31e","name":"Get Role Bindings","url":"/OCPObject/rolebindings","method":"get","upload":false,"swaggerDoc":"","x":150,"y":220,"wires":[["edf6c0e9.09664"]]},{"id":"82aba2d4.df834","type":"http response","z":"243161c.142f31e","name":"","statusCode":"","headers":{},"x":850,"y":40,"wires":[]},{"id":"756e1aac.9db904","type":"function","z":"243161c.142f31e","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":140,"wires":[["7a8d7083.cfa48"]]},{"id":"7a8d7083.cfa48","type":"template","z":"243161c.142f31e","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selRoleBinding){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selRoleBinding.value=selRoleBinding;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/RoleBindingYAML?selRoleBinding=\"+selRoleBinding+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selRoleBinding\" id=\"selRoleBinding\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllRoleBinding\" id=\"btnAllRoleBinding\" value=\"Get All RoleBindings\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":620,"y":240,"wires":[["82aba2d4.df834"]]},{"id":"993669a0.aadc6","type":"inject","z":"243161c.142f31e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":360,"wires":[["5c3b0622.73b348"]]},{"id":"5c3b0622.73b348","type":"function","z":"243161c.142f31e","name":"","func":"// GET namespace\nif(msg.payload.selRoleBinding==\"ALL\")\n    msg.topic = \"/apis/rbac.authorization.k8s.io/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/rolebindings/\";\nelse\n    msg.topic = \"/apis/rbac.authorization.k8s.io/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/rolebindings/\"+msg.payload.selRoleBinding+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":440,"wires":[["5d521a8a.7a9dbc"]]},{"id":"b3246a28.423638","type":"debug","z":"243161c.142f31e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":910,"y":280,"wires":[]},{"id":"67494480.639e2c","type":"yaml","z":"243161c.142f31e","property":"payload","name":"","x":670,"y":360,"wires":[["b3246a28.423638","cac71fe.8c5136"]]},{"id":"612b2edf.46d0c8","type":"http in","z":"243161c.142f31e","name":"","url":"/RoleBindingYAML","method":"get","upload":false,"swaggerDoc":"","x":100,"y":500,"wires":[["5c3b0622.73b348"]]},{"id":"b86ec65a.0a7958","type":"http response","z":"243161c.142f31e","name":"","statusCode":"","headers":{},"x":730,"y":560,"wires":[]},{"id":"6707edcd.3e5724","type":"file","z":"243161c.142f31e","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":970,"y":440,"wires":[["75b257b5.bd334"]]},{"id":"a01ed51d.7b8af8","type":"file in","z":"243161c.142f31e","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":960,"y":500,"wires":[["b86ec65a.0a7958"]]},{"id":"f2467a2.eb84608","type":"function","z":"243161c.142f31e","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.uid;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.resourceVersion;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.creationTimestamp;\n}catch(e){}\n\ntry{\nfor(i=0;i<msg.payload.items.length;i++){\n    try{\n    delete msg.payload.items[i].status;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.namespace;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.uid;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.selfLink;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.resourceVersion;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.generation;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n    }catch(e){}\n}\n}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":520,"wires":[["67494480.639e2c"]]},{"id":"c0aecddf.e5825","type":"kubernetes-client-http","z":"243161c.142f31e","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":490,"y":80,"wires":[["756e1aac.9db904","8485fdfd.3682a"]]},{"id":"5d521a8a.7a9dbc","type":"kubernetes-client-http","z":"243161c.142f31e","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":380,"wires":[["f2467a2.eb84608","b3246a28.423638"]]},{"id":"cac71fe.8c5136","type":"change","z":"243161c.142f31e","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileRoleBindings')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":440,"wires":[["6707edcd.3e5724"]]},{"id":"75b257b5.bd334","type":"change","z":"243161c.142f31e","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileRoleBindings')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":500,"wires":[["a01ed51d.7b8af8"]]},{"id":"8206e271.0e8958","type":"inject","z":"ab18adea.954e6","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":60,"wires":[["df5da0f3.6de36"]]},{"id":"df5da0f3.6de36","type":"function","z":"ab18adea.954e6","name":"","func":"// GET namespace\nmsg.topic = \"/api/v1/namespaces/\"+global.get('selProject')+\"/serviceaccounts/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":140,"wires":[["7736ecb2.da08ec"]]},{"id":"74e7e87c.e2b9b","type":"debug","z":"ab18adea.954e6","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":810,"y":120,"wires":[]},{"id":"3e1acf62.2675f","type":"http in","z":"ab18adea.954e6","name":"Get Service Accounts","url":"/OCPObject/serviceaccounts","method":"get","upload":false,"swaggerDoc":"","x":160,"y":220,"wires":[["df5da0f3.6de36"]]},{"id":"a1d8333.dcf635","type":"http response","z":"ab18adea.954e6","name":"","statusCode":"","headers":{},"x":850,"y":40,"wires":[]},{"id":"14727d9.6663182","type":"function","z":"ab18adea.954e6","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":140,"wires":[["596935c9.84e66c"]]},{"id":"596935c9.84e66c","type":"template","z":"ab18adea.954e6","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selServiceAccount){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selServiceAccount.value=selServiceAccount;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/ServiceAccountYAML?selServiceAccount=\"+selServiceAccount+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selServiceAccount\" id=\"selServiceAccount\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllServiceAccount\" id=\"btnAllServiceAccount\" value=\"Get All ServiceAccounts\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":620,"y":240,"wires":[["a1d8333.dcf635"]]},{"id":"3a06d219.1f9a26","type":"inject","z":"ab18adea.954e6","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":360,"wires":[["5c9d757.071548c"]]},{"id":"5c9d757.071548c","type":"function","z":"ab18adea.954e6","name":"","func":"// GET namespace\nif(msg.payload.selServiceAccount==\"ALL\")\n    msg.topic = \"/api/v1/namespaces/\"+global.get('selProject')+\"/serviceaccounts/\";\nelse\n    msg.topic = \"/api/v1/namespaces/\"+global.get('selProject')+\"/serviceaccounts/\"+msg.payload.selServiceAccount+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":440,"wires":[["5d766352.aa814c"]]},{"id":"af9da72e.310fb8","type":"debug","z":"ab18adea.954e6","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":910,"y":280,"wires":[]},{"id":"dd3be0cb.830e28","type":"yaml","z":"ab18adea.954e6","property":"payload","name":"","x":670,"y":360,"wires":[["af9da72e.310fb8","3cc7989b.9588d8"]]},{"id":"d37d0ddb.fc522","type":"http in","z":"ab18adea.954e6","name":"","url":"/ServiceAccountYAML","method":"get","upload":false,"swaggerDoc":"","x":120,"y":500,"wires":[["5c9d757.071548c"]]},{"id":"59a35532.58c9dc","type":"http response","z":"ab18adea.954e6","name":"","statusCode":"","headers":{},"x":730,"y":560,"wires":[]},{"id":"5430f4ab.27d8ec","type":"file","z":"ab18adea.954e6","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":970,"y":440,"wires":[["85a53a0.a7cec48"]]},{"id":"706f3e04.50136","type":"file in","z":"ab18adea.954e6","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":960,"y":500,"wires":[["59a35532.58c9dc"]]},{"id":"e5b0988d.3fc21","type":"function","z":"ab18adea.954e6","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.uid;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.resourceVersion;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.creationTimestamp;\n}catch(e){}\n\ntry{\nfor(i=0;i<msg.payload.items.length;i++){\n    try{\n    delete msg.payload.items[i].status;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.namespace;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.uid;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.selfLink;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.resourceVersion;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.generation;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n    }catch(e){}\n}\n}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":520,"wires":[["dd3be0cb.830e28"]]},{"id":"7736ecb2.da08ec","type":"kubernetes-client-http","z":"ab18adea.954e6","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":490,"y":80,"wires":[["14727d9.6663182","74e7e87c.e2b9b"]]},{"id":"5d766352.aa814c","type":"kubernetes-client-http","z":"ab18adea.954e6","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":380,"wires":[["e5b0988d.3fc21","af9da72e.310fb8"]]},{"id":"3cc7989b.9588d8","type":"change","z":"ab18adea.954e6","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileServiceAccounts')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":440,"wires":[["5430f4ab.27d8ec"]]},{"id":"85a53a0.a7cec48","type":"change","z":"ab18adea.954e6","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileServiceAccounts')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":500,"wires":[["706f3e04.50136"]]},{"id":"fa0a44e2.4b4b6","type":"inject","z":"374b4ce7.896c44","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":60,"wires":[["2cd1437b.3d792c"]]},{"id":"2cd1437b.3d792c","type":"function","z":"374b4ce7.896c44","name":"","func":"// GET namespace\nmsg.topic = \"/apis/security.openshift.io/v1/securitycontextconstraints\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":140,"wires":[["db69b33d.9146b8"]]},{"id":"25840213.ff73a6","type":"debug","z":"374b4ce7.896c44","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":810,"y":120,"wires":[]},{"id":"374cf80a.6e76c","type":"http in","z":"374b4ce7.896c44","name":"Get Security Context Constraint","url":"/OCPObject/securitycontextconstraints","method":"get","upload":false,"swaggerDoc":"","x":190,"y":220,"wires":[["2cd1437b.3d792c"]]},{"id":"7a3f0461.ce6d94","type":"http response","z":"374b4ce7.896c44","name":"","statusCode":"","headers":{},"x":850,"y":40,"wires":[]},{"id":"3f337d4a.01e092","type":"function","z":"374b4ce7.896c44","name":"","func":"msg.payload=msg.payload.items;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":140,"wires":[["97deb319.c45118"]]},{"id":"97deb319.c45118","type":"template","z":"374b4ce7.896c44","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<script language=\"JavaScript\">\nfunction getSpec(selProject, selSecurityContextConstraint){\n    //document.all.frmGetSpec.selProject.value=selProject;\n    document.all.frmGetSpec.selSecurityContextConstraint.value=selSecurityContextConstraint;\n    document.all.frmGetSpec.action=\"{{{global.urlPrefix}}}/SecurityContextConstraintYAML?selSecurityContextConstraint=\"+selSecurityContextConstraint+\"&selProject=\"+document.all.frmGetSpec.selProject.value;\n    document.all.frmGetSpec.submit();\n}\n\n</script>\n<iframe id=\"invisible\" name=\"invisible\" style=\"display:none;\"></iframe>\n\n<form method=\"GET\" name=\"frmGetSpec\" id=\"frmGetSpec\" target=\"invisible\">\n    <input type=\"hidden\" name=\"selProject\" id=\"selProject\">\n    <input type=\"hidden\" name=\"selSecurityContextConstraint\" id=\"selSecurityContextConstraint\">\n<table>\n<tr><td><input type=\"button\" name=\"btnAllSecurityContextConstraint\" id=\"btnAllSecurityContextConstraint\" value=\"Get All SecurityContextConstraints\" onclick=\"JavaScript:getSpec('{{payload.metadata.namespace}}','ALL');\"></td></tr>\n{{#payload}}\n<tr><td>\n{{metadata.name}}\n</td><td><a href=\"JavaScript:getSpec('{{metadata.namespace}}','{{metadata.name}}');\">Get Spec</a></td></tr>\n<script language=\"JavaScript\">\ndocument.all.frmGetSpec.selProject.value='{{metadata.namespace}}';\n</script>\n{{/payload}}\n</table>\n</form>\n","output":"str","x":620,"y":240,"wires":[["7a3f0461.ce6d94"]]},{"id":"487e830.f4b3d7c","type":"inject","z":"374b4ce7.896c44","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":360,"wires":[["d8fe9af8.bc8a"]]},{"id":"d8fe9af8.bc8a","type":"function","z":"374b4ce7.896c44","name":"","func":"// GET namespace\nif(msg.payload.selSecurityContextConstraint==\"ALL\")\n    msg.topic = \"/apis/security.openshift.io/v1/securitycontextconstraints\";\nelse\n    msg.topic = \"/apis/security.openshift.io/v1/securitycontextconstraints/\"+msg.payload.selSecurityContextConstraint+\"?pretty=true\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":440,"wires":[["f7556083.742268"]]},{"id":"cdf6c901.33b2","type":"debug","z":"374b4ce7.896c44","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":910,"y":280,"wires":[]},{"id":"618f8ab5.74c24c","type":"yaml","z":"374b4ce7.896c44","property":"payload","name":"","x":670,"y":360,"wires":[["cdf6c901.33b2","babb5814.be6b3"]]},{"id":"14a4a3cb.ad9dbc","type":"http in","z":"374b4ce7.896c44","name":"","url":"/SecurityContextConstraintYAML","method":"get","upload":false,"swaggerDoc":"","x":150,"y":500,"wires":[["d8fe9af8.bc8a"]]},{"id":"4e12d5b9.94debc","type":"http response","z":"374b4ce7.896c44","name":"","statusCode":"","headers":{},"x":730,"y":560,"wires":[]},{"id":"5259eddc.f4efb4","type":"file","z":"374b4ce7.896c44","name":"K8S spec file","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":970,"y":440,"wires":[["57a1414.1720fc"]]},{"id":"e2108bfd.bf4b08","type":"file in","z":"374b4ce7.896c44","name":"Reading K8S spec file","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":960,"y":500,"wires":[["4e12d5b9.94debc"]]},{"id":"bdb6c233.6dbcd8","type":"function","z":"374b4ce7.896c44","name":"Remove unnecessary items from payload","func":"try{\ndelete msg.payload.metadata.selfLink;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.uid;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.resourceVersion;\n}catch(e){}\ntry{\ndelete msg.payload.metadata.creationTimestamp;\n}catch(e){}\n\ntry{\nfor(i=0;i<msg.payload.items.length;i++){\n    try{\n    delete msg.payload.items[i].status;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.namespace;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.uid;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.selfLink;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.resourceVersion;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.generation;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].metadata.creationTimestamp;\n    }catch(e){}\n    try{\n    delete msg.payload.items[i].spec.template.metadata.creationTimestamp;\n    }catch(e){}\n}\n}catch(e){}\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":560,"wires":[["618f8ab5.74c24c"]]},{"id":"db69b33d.9146b8","type":"kubernetes-client-http","z":"374b4ce7.896c44","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":490,"y":80,"wires":[["3f337d4a.01e092","25840213.ff73a6"]]},{"id":"f7556083.742268","type":"kubernetes-client-http","z":"374b4ce7.896c44","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":430,"y":380,"wires":[["bdb6c233.6dbcd8","cdf6c901.33b2"]]},{"id":"babb5814.be6b3","type":"change","z":"374b4ce7.896c44","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileSecurityContextConstraints')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":440,"wires":[["5259eddc.f4efb4"]]},{"id":"57a1414.1720fc","type":"change","z":"374b4ce7.896c44","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/yamls/\"&$globalContext('fileSecurityContextConstraints')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":500,"wires":[["e2108bfd.bf4b08"]]},{"id":"2079ddbf.4dde12","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":160,"wires":[["45b484f.67e36fc"]]},{"id":"cccd390f.a9f558","type":"function","z":"fe6bf964.cbd89","name":"SCC task","func":"msg.url=global.get(\"urlPrefix\")+\"/SecurityContextConstraintYAML?selProject=\"+global.get(\"selProject\")+\"&selSecurityContextConstraint=ALL\";;\nmsg.topic=\"scc_task\";\nmsg.payload=\"SCC task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":380,"y":160,"wires":[["49ab2bd5.cbecc4"]]},{"id":"49ab2bd5.cbecc4","type":"http request","z":"fe6bf964.cbd89","name":"Get SCC","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":640,"y":160,"wires":[["2079ddbf.4dde12"]]},{"id":"14dde08b.0c2557","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":220,"wires":[["45b484f.67e36fc"]]},{"id":"efb805aa.0f3f3","type":"function","z":"fe6bf964.cbd89","name":"SA task","func":"msg.url=global.get(\"urlPrefix\")+\"/ServiceAccountYAML?selProject=\"+global.get(\"selProject\")+\"&selServiceAccount=ALL\";\nmsg.topic=\"sa_task\";\nmsg.payload=\"SA task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":380,"y":220,"wires":[["15603a97.8b060d"]]},{"id":"15603a97.8b060d","type":"http request","z":"fe6bf964.cbd89","name":"Get SA","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":640,"y":220,"wires":[["14dde08b.0c2557"]]},{"id":"970e3de0.b63348","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":280,"wires":[["45b484f.67e36fc"]]},{"id":"678d0c17.0536ec","type":"function","z":"fe6bf964.cbd89","name":"Role task","func":"msg.url=global.get(\"urlPrefix\")+\"/RoleYAML?selProject=\"+global.get(\"selProject\")+\"&selRole=ALL\";\nmsg.topic=\"role_task\";\nmsg.payload=\"Role task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":380,"y":280,"wires":[["c2094a25.d3888"]]},{"id":"c2094a25.d3888","type":"http request","z":"fe6bf964.cbd89","name":"Get Role","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":640,"y":280,"wires":[["970e3de0.b63348"]]},{"id":"ce22a875.934848","type":"delay","z":"fe6bf964.cbd89","name":"Random delay","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":340,"wires":[["45b484f.67e36fc"]]},{"id":"61c39713.a88d88","type":"function","z":"fe6bf964.cbd89","name":"RoleBinding task","func":"msg.url=global.get(\"urlPrefix\")+\"/RoleBindingYAML?selProject=\"+global.get(\"selProject\")+\"&selRoleBinding=ALL\";\nmsg.topic=\"rb_task\";\nmsg.payload=\"RoleBinding task's payload\"\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":340,"wires":[["daf562f8.4ddab8"]]},{"id":"daf562f8.4ddab8","type":"http request","z":"fe6bf964.cbd89","name":"Get RoleBinding","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":660,"y":340,"wires":[["ce22a875.934848"]]},{"id":"425cde69.28d55","type":"ui_button","z":"cc1ec809.b0912","name":"","group":"82bd631c.dc015","order":5,"width":0,"height":0,"passthru":false,"label":"2. Save Source Replica information","tooltip":"Save information about Deployment and Statefulset Replicas","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":180,"y":960,"wires":[["ebd6be9e.e4dbe","f0ffedab.000b7"]]},{"id":"ebd6be9e.e4dbe","type":"function","z":"cc1ec809.b0912","name":"Deployments in project","func":"// GET namespace\nmsg.topic = \"/apis/apps/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/deployments/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":170,"y":1040,"wires":[["adfba1b3.1df3c"]]},{"id":"4cfa34be.8965a4","type":"debug","z":"cc1ec809.b0912","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"$globalContext(\"lastStatefulsetsSavedState\")\t","targetType":"jsonata","x":1060,"y":1040,"wires":[]},{"id":"adfba1b3.1df3c","type":"kubernetes-client-http","z":"cc1ec809.b0912","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":450,"y":960,"wires":[["7092381c.1bf57"]]},{"id":"123c385.d6ec948","type":"split","z":"cc1ec809.b0912","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":670,"y":960,"wires":[["48be914f.982fd"]]},{"id":"7092381c.1bf57","type":"change","z":"cc1ec809.b0912","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.items","tot":"msg"},{"t":"set","p":"fileTimeStamp","pt":"msg","to":"$now()","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":1040,"wires":[["123c385.d6ec948"]]},{"id":"48be914f.982fd","type":"change","z":"cc1ec809.b0912","name":"Deployment Replicas","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.metadata.name & \",\" & payload.spec.replicas","tot":"jsonata"},{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/state/\"&\"deployment_replicas.csv\"","tot":"jsonata"},{"t":"set","p":"lastDeploymentsSavedState","pt":"global","to":"$globalContext('baseDir')&\"/clone/state/\"&\"deployment_replicas.csv\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":1040,"wires":[["4733a4e5.daf314","4cfa34be.8965a4"]]},{"id":"4733a4e5.daf314","type":"file","z":"cc1ec809.b0912","name":"","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"false","encoding":"none","x":990,"y":940,"wires":[[]]},{"id":"f0ffedab.000b7","type":"function","z":"cc1ec809.b0912","name":"Statefulsets in project","func":"// GET namespace\nmsg.topic = \"/apis/apps/v1beta1/namespaces/\"+global.get(\"selProject\")+\"/statefulsets/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":200,"y":1200,"wires":[["58d7a1e0.7cdd3"]]},{"id":"97158a81.30b1d","type":"debug","z":"cc1ec809.b0912","name":"","active":false,"tosidebar":true,"console":true,"tostatus":false,"complete":"$globalContext(\"lastDeploymentsSavedState\")\t","targetType":"jsonata","x":1130,"y":1180,"wires":[]},{"id":"58d7a1e0.7cdd3","type":"kubernetes-client-http","z":"cc1ec809.b0912","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":470,"y":1120,"wires":[["de7c3fce.8e54e8"]]},{"id":"84131606.1aea68","type":"split","z":"cc1ec809.b0912","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":690,"y":1120,"wires":[["bba69544.d1f4e"]]},{"id":"bba69544.d1f4e","type":"change","z":"cc1ec809.b0912","name":"Statefulset Replicas","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.metadata.name & \",\" & payload.spec.replicas","tot":"jsonata"},{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/state/\"&\"statefulset_replicas.csv\"","tot":"jsonata"},{"t":"set","p":"lastStatefulsetsSavedState","pt":"global","to":"$globalContext('baseDir')&\"/clone/state/\"&\"statefulset_replicas.csv\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":1220,"wires":[["592b24d.da031dc","97158a81.30b1d"]]},{"id":"592b24d.da031dc","type":"file","z":"cc1ec809.b0912","name":"","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"false","encoding":"none","x":990,"y":1140,"wires":[[]]},{"id":"de7c3fce.8e54e8","type":"change","z":"cc1ec809.b0912","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.items","tot":"msg"},{"t":"set","p":"fileTimeStamp","pt":"msg","to":"$now()","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":1200,"wires":[["84131606.1aea68"]]},{"id":"92629575.d4ee4","type":"ui_button","z":"cc1ec809.b0912","name":"","group":"82bd631c.dc015","order":6,"width":0,"height":0,"passthru":false,"label":"3. Scale Down - Source","tooltip":"Scale down all Deployments and Statefulsets in Source","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":170,"y":1360,"wires":[["53f5b30f.1f0ee4","2ee13305.f3954c","e153885f.66305"]]},{"id":"53f5b30f.1f0ee4","type":"change","z":"cc1ec809.b0912","name":"Deployment Replicas","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/state/\"&\"deployment_replicas.csv\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":1280,"wires":[["c042d01b.755328"]]},{"id":"2ee13305.f3954c","type":"change","z":"cc1ec809.b0912","name":"Statefulset Replicas","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/state/\"&\"statefulset_replicas.csv\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":1440,"wires":[["3c92e0e3.1d4528"]]},{"id":"c042d01b.755328","type":"file in","z":"cc1ec809.b0912","name":"","filename":"","format":"lines","chunk":false,"sendError":false,"encoding":"none","x":450,"y":1280,"wires":[["51071f1c.9455b8"]]},{"id":"3c92e0e3.1d4528","type":"file in","z":"cc1ec809.b0912","name":"","filename":"","format":"lines","chunk":false,"sendError":false,"encoding":"none","x":450,"y":1440,"wires":[["70adab67.848e54"]]},{"id":"51071f1c.9455b8","type":"change","z":"cc1ec809.b0912","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"oc scale deployment \" & $split(payload, \",\")[0] & \" --replicas=0 -n \" & $globalContext('selProject')\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":1280,"wires":[["b5e85ab6.ac6a08"]]},{"id":"75ffabec.dcf67c","type":"debug","z":"cc1ec809.b0912","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1330,"y":1760,"wires":[]},{"id":"70adab67.848e54","type":"change","z":"cc1ec809.b0912","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"oc scale sts \" & $split(payload, \",\")[0] & \" --replicas=0 -n \" & $globalContext('selProject')\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":1440,"wires":[["666675b2.e8391c"]]},{"id":"3417038f.c63ce4","type":"ui_button","z":"cc1ec809.b0912","name":"","group":"82bd631c.dc015","order":9,"width":0,"height":0,"passthru":false,"label":"6. Scale Up - Source","tooltip":"Scale up all Deployments and Statefulsets in Source","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":160,"y":1600,"wires":[["d7b4a62c.06e27","7120fac9.9bbdb4","57ec2f12.b0cb58"]]},{"id":"d7b4a62c.06e27","type":"change","z":"cc1ec809.b0912","name":"Deployment Replicas","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/state/\"&\"deployment_replicas.csv\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":1540,"wires":[["a582daff.66ce68"]]},{"id":"7120fac9.9bbdb4","type":"change","z":"cc1ec809.b0912","name":"Statefulset Replicas","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir')&\"/clone/state/\"&\"statefulset_replicas.csv\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":1660,"wires":[["88141ec5.51939"]]},{"id":"a582daff.66ce68","type":"file in","z":"cc1ec809.b0912","name":"","filename":"","format":"lines","chunk":false,"sendError":false,"encoding":"none","x":630,"y":1540,"wires":[["6e828efb.c722d"]]},{"id":"88141ec5.51939","type":"file in","z":"cc1ec809.b0912","name":"","filename":"","format":"lines","chunk":false,"sendError":false,"encoding":"none","x":630,"y":1660,"wires":[["632c2f50.8b26b8"]]},{"id":"10f1fde0.27e20a","type":"inject","z":"c890f6c4.5f7ee","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":80,"wires":[["9c6acda1.ae6a98"]]},{"id":"2d74cf43.1c973","type":"exec","z":"c890f6c4.5f7ee","command":"oc create -f ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":470,"y":80,"wires":[["2fd72886.cc22e8","a1c3f91d.ed10c8"],["2fd72886.cc22e8"],[]]},{"id":"2fd72886.cc22e8","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Project","order":9,"width":13,"height":5,"format":"<h3>Reinstate project</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":680,"y":40,"wires":[["3d4f75b9.8ceb1a"]]},{"id":"23055121.72391e","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":560,"y":560,"wires":[["6d3927a.22008d8","17823409.a5f8d4"],["6d3927a.22008d8"],[]]},{"id":"6d3927a.22008d8","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Secrets","order":10,"width":13,"height":5,"format":"<h3>Reinstate Secrets</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":980,"y":560,"wires":[[]]},{"id":"9c6acda1.ae6a98","type":"change","z":"c890f6c4.5f7ee","name":"0. Create Project","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileProjects')\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":80,"wires":[["2d74cf43.1c973"]]},{"id":"180e7820.f5b0a8","type":"change","z":"c890f6c4.5f7ee","name":"1. Create Secrets","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileSecrets') & \" -n \" & $globalContext('selProject')\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":560,"wires":[["23055121.72391e"]]},{"id":"3f9b2ac4.213f76","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":560,"y":720,"wires":[["c72c58ce.65e9f8","85987146.a257d8"],["c72c58ce.65e9f8"],[]]},{"id":"c72c58ce.65e9f8","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Service Accounts","order":13,"width":13,"height":6,"format":"<h3>Reinstate Service Accounts</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":890,"y":720,"wires":[[]]},{"id":"269b228f.db3d6e","type":"change","z":"c890f6c4.5f7ee","name":"2. Create Service Accounts","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileServiceAccounts')\t & \" -n \" & $globalContext('selProject')\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":220,"y":720,"wires":[["3f9b2ac4.213f76"]]},{"id":"c6fcbf40.1c5fa8","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":560,"y":860,"wires":[["e62c24fa.e3684","3353f921.730c76"],["e62c24fa.e3684"],[]]},{"id":"e62c24fa.e3684","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Security Context Constraints","order":14,"width":13,"height":6,"format":"<h3>Reinstate Security Context Constraints</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":920,"y":860,"wires":[[]]},{"id":"bfbec512.9542c8","type":"change","z":"c890f6c4.5f7ee","name":"3. Create Security Context Constraints","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileSecurityContextConstraints')  & \" -n \" & $globalContext('selProject')\t\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":860,"wires":[["c6fcbf40.1c5fa8"]]},{"id":"5a2140c7.ec9bb8","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":560,"y":1000,"wires":[["1b5f2b4f.aca795","e53f3f37.8651e"],["1b5f2b4f.aca795"],[]]},{"id":"1b5f2b4f.aca795","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Roles","order":15,"width":13,"height":6,"format":"<h3>Reinstate Roles</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":850,"y":1000,"wires":[[]]},{"id":"a7f0a6b7.70c81","type":"change","z":"c890f6c4.5f7ee","name":"4. Create Role","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileRoles')  & \" -n \" & $globalContext('selProject')\t\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":180,"y":1000,"wires":[["5a2140c7.ec9bb8"]]},{"id":"479cd487.412b94","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":560,"y":1160,"wires":[["95ad0920.569a4","efc16046.6d6c38"],["95ad0920.569a4"],[]]},{"id":"95ad0920.569a4","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Role Bindings","order":16,"width":13,"height":6,"format":"<h3>Reinstate Role Bindings</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":880,"y":1160,"wires":[[]]},{"id":"1389cc5d.06378c","type":"change","z":"c890f6c4.5f7ee","name":"5. Create Role Bindings","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileRoleBindings')  & \" -n \" & $globalContext('selProject')\t\t \t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":1160,"wires":[["479cd487.412b94"]]},{"id":"af2baf51.312cc8","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":480,"y":1320,"wires":[["e2da6767.ccfa","bb83c741.39bc28"],["e2da6767.ccfa"],[]]},{"id":"e2da6767.ccfa","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Config Maps","order":17,"width":13,"height":6,"format":"<h3>Reinstate Config Maps</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":830,"y":1320,"wires":[[]]},{"id":"fc2db262.5f1c1","type":"change","z":"c890f6c4.5f7ee","name":"7. Create Config Maps","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileConfigMaps')\t & \" -n \" & $globalContext('selProject')\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":160,"y":1320,"wires":[["af2baf51.312cc8"]]},{"id":"21725b2d.2e070c","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":500,"y":1460,"wires":[["a0657145.883a08"],["a0657145.883a08"],[]]},{"id":"a0657145.883a08","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Persistent Volume Claims","order":18,"width":13,"height":6,"format":"<h3>Reinstate Persistent Volume Claims</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":870,"y":1440,"wires":[[]]},{"id":"24749aec.cbd3f6","type":"change","z":"c890f6c4.5f7ee","name":"9. Create Persistent Volume Claims","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('filePersistentVolumeClaims')  & \" -n \" & $globalContext('selProject')\t\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":1460,"wires":[["21725b2d.2e070c"]]},{"id":"5791849e.8352cc","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":600,"y":2240,"wires":[["b1f5c769.d97ce8","3ce4c6d5.dd0db2"],["b1f5c769.d97ce8"],[]]},{"id":"b1f5c769.d97ce8","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Deployments","order":26,"width":13,"height":6,"format":"<h3>Reinstate Deployments</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":910,"y":2240,"wires":[[]]},{"id":"2cfd1bd2.97838c","type":"change","z":"c890f6c4.5f7ee","name":"10. Create Deployments","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileDeployments')  & \" -n \" & $globalContext('selProject')\t\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":2240,"wires":[["5791849e.8352cc"]]},{"id":"2ff8349d.8dbf2c","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":600,"y":2380,"wires":[["5b9b6d45.8e7b0c","2005dc1e.9893fc","a35a35ba.6eef48"],["9ec56f3.b83dd9"],[]]},{"id":"5b9b6d45.8e7b0c","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"StatefulSets","order":27,"width":13,"height":6,"format":"<h3>Reinstate ONLY StatefulSets</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":910,"y":2380,"wires":[[]]},{"id":"65fc92ad.c16964","type":"change","z":"c890f6c4.5f7ee","name":"11. Create Stateful Sets","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileStatefulsets')  & \" -n \" & $globalContext('selProject')\t\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":2380,"wires":[["2ff8349d.8dbf2c","ced52271.d65b9"]]},{"id":"83be44aa.7e4dd","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":600,"y":2560,"wires":[["de2ab70b.79ac78","6f77a932.5e571"],["de2ab70b.79ac78"],[]]},{"id":"de2ab70b.79ac78","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Services","order":30,"width":26,"height":5,"format":"<h3>Reinstate Services</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":900,"y":2560,"wires":[[]]},{"id":"47ac27c5.0562c8","type":"change","z":"c890f6c4.5f7ee","name":"12. Create Services","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileServices')  & \" -n \" & $globalContext('selProject')\t\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":2560,"wires":[["83be44aa.7e4dd"]]},{"id":"d301ca7c.439118","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":600,"y":2740,"wires":[["28f35ef4.beafc2","57f6aeba.2c0168"],["28f35ef4.beafc2"],[]]},{"id":"28f35ef4.beafc2","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Jobs","order":28,"width":13,"height":6,"format":"<h3>Reinstate Jobs</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":890,"y":2740,"wires":[[]]},{"id":"91239651.745658","type":"change","z":"c890f6c4.5f7ee","name":"13. Create Jobs","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileJobs')  & \" -n \" & $globalContext('selProject')\t\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":220,"y":2740,"wires":[["d301ca7c.439118"]]},{"id":"ffc7ad0.f49a95","type":"exec","z":"c890f6c4.5f7ee","command":"oc create ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":600,"y":2920,"wires":[["563682bb.cf7c0c","9db35076.3e88e8"],["563682bb.cf7c0c"],[]]},{"id":"563682bb.cf7c0c","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"Cron Jobs","order":29,"width":13,"height":6,"format":"<h3>Reinstate Cron Jobs</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":910,"y":2920,"wires":[[]]},{"id":"2d0fe927.a20c86","type":"change","z":"c890f6c4.5f7ee","name":"14. Create Cron Jobs","rules":[{"t":"set","p":"payload","pt":"msg","to":"\" -f \" & $globalContext('baseDir') & \"/reinstate/yamls/\" & $globalContext('fileCronJobs')  & \" -n \" & $globalContext('selProject')\t\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":2920,"wires":[["ffc7ad0.f49a95"]]},{"id":"3d4f75b9.8ceb1a","type":"debug","z":"c890f6c4.5f7ee","name":"Extract Project","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":860,"y":40,"wires":[]},{"id":"a1c3f91d.ed10c8","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"selProject","pt":"global","to":"$trim($replace($replace(payload, \"namespace/\", \"\"), \" created\", \"\"))\t","tot":"jsonata"},{"t":"set","p":"payload","pt":"msg","to":"\" -n \" & $trim($replace($replace(payload, \"namespace/\", \"\"), \" created\", \"\"))\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":180,"y":140,"wires":[["7d6ea721.c826b8"]]},{"id":"9ead4fd2.6475d","type":"exec","z":"c890f6c4.5f7ee","command":"oc create serviceaccount my-service-account -n ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Create Service Account","x":690,"y":120,"wires":[["fde622a2.0e60a","10865e61.4f15a2"],["fde622a2.0e60a"],[]]},{"id":"c8bd44a4.c659c8","type":"exec","z":"c890f6c4.5f7ee","command":"oc adm policy add-scc-to-user privileged -z my-service-account ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Service Account - Add Policy","x":840,"y":260,"wires":[["fde622a2.0e60a","8dcceb57.3c0c7"],["fde622a2.0e60a"],[]]},{"id":"fde622a2.0e60a","type":"ui_template","z":"c890f6c4.5f7ee","group":"6effb9d.f44edc8","name":"prerequisites","order":11,"width":26,"height":6,"format":"<h3>Reinstate Pre-requisites</h3>\n<pre ng-bind-html=\"msg.payload\"></pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":1270,"y":140,"wires":[[]]},{"id":"2910b825.02b868","type":"inject","z":"c890f6c4.5f7ee","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1740,"wires":[["6fbdfea7.9c7dd"]]},{"id":"6fbdfea7.9c7dd","type":"function","z":"c890f6c4.5f7ee","name":"Get ALL PVCs in Project","func":"// GET namespace\nmsg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/persistentvolumeclaims/\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1800,"wires":[["fa684b4b.9a157"]]},{"id":"56db026b.0953b4","type":"debug","z":"c890f6c4.5f7ee","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":710,"y":2080,"wires":[]},{"id":"26ec8ac.d90dc76","type":"split","z":"c890f6c4.5f7ee","name":"Parallelize PVC Jobs","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":220,"y":1980,"wires":[["15d4dac3.331c05"]]},{"id":"71e7bc71.e04a5c","type":"change","z":"c890f6c4.5f7ee","name":"PVC list","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.items","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":1800,"wires":[["26ec8ac.d90dc76"]]},{"id":"15d4dac3.331c05","type":"change","z":"c890f6c4.5f7ee","name":"Get PVC Name","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.metadata.name","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":1980,"wires":[["6c2da69a.6a7828"]]},{"id":"5bde33d2.4b621c","type":"function","z":"c890f6c4.5f7ee","name":"Format Reinstate Job Spec","func":"var pvcspec={\"apiVersion\":\"batch/v1\",\"kind\":\"Job\",\"metadata\":{\"name\":msg.payload+\"-reinstate-job\"},\"spec\":{\"template\":{\"spec\":{\"serviceAccount\":\"my-service-account\",\"serviceAccountName\":\"my-service-account\",\"securityContext\":{\"runAsUser\":0},\"containers\":[{\"image\":\"eeacms/rsync\",\"name\":\"cp4d-sync\",\"command\":[\"/bin/sh\",\"-xc\"],\"args\":[\"rsync --ignore-missing-args -r -a -c /clone-mount/\"+msg.payload+\"/* /reinstate-mount/\"],\"volumeMounts\":[{\"name\":\"reinstate-mount\",\"mountPath\":\"/reinstate-mount\"},{\"name\":\"clone-mount\",\"mountPath\":\"/clone-mount\"}],\"resources\":null,\"securityContext\":{\"privileged\":true}}],\"restartPolicy\":\"OnFailure\",\"volumes\":[{\"name\":\"reinstate-mount\",\"persistentVolumeClaim\":{\"claimName\":msg.payload}},{\"name\":\"clone-mount\",\"persistentVolumeClaim\":{\"claimName\":global.get(\"clonePVC\")}}]}}}};\n\nmsg.topic = \"/apis/batch/v1/namespaces/\"+ global.get(\"selProject\") +\"/jobs\";\nmsg.method = \"POST\";\nmsg.payload=pvcspec;\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1980,"wires":[["57f9312.6c4d6d"]]},{"id":"a5e15ce2.1e4378","type":"debug","z":"c890f6c4.5f7ee","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":930,"y":1720,"wires":[]},{"id":"aee8fd71.8f2158","type":"ui_button","z":"c890f6c4.5f7ee","name":"","group":"6effb9d.f44edc8","order":23,"width":0,"height":0,"passthru":false,"label":"6. Reinstate data - Target","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":170,"y":1800,"wires":[["6fbdfea7.9c7dd"]]},{"id":"fa684b4b.9a157","type":"kubernetes-client-http","z":"c890f6c4.5f7ee","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":670,"y":1800,"wires":[["71e7bc71.e04a5c","a5e15ce2.1e4378"]]},{"id":"57f9312.6c4d6d","type":"kubernetes-client-http","z":"c890f6c4.5f7ee","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":370,"y":2080,"wires":[["56db026b.0953b4","d15822e6.bf13f8"]]},{"id":"6c2da69a.6a7828","type":"switch","z":"c890f6c4.5f7ee","name":"Remove clonePVC","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"clonePVC","vt":"global"}],"checkall":"true","repair":false,"outputs":1,"x":810,"y":1980,"wires":[["5bde33d2.4b621c"]]},{"id":"eda7c1f9.6a112","type":"ui_button","z":"c890f6c4.5f7ee","name":"","group":"6effb9d.f44edc8","order":7,"width":0,"height":0,"passthru":false,"label":"4. Reinstate - Project + Pre-requisities","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":210,"y":40,"wires":[["9c6acda1.ae6a98"]]},{"id":"1d1ec630.95db4a","type":"ui_button","z":"c890f6c4.5f7ee","name":"","group":"6effb9d.f44edc8","order":25,"width":0,"height":0,"passthru":false,"label":"7. Reinstate services - Target","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":180,"y":2160,"wires":[["2cfd1bd2.97838c"]]},{"id":"e0819b0f.89cd2","type":"inject","z":"c890f6c4.5f7ee","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1470,"y":1920,"wires":[["2fd72886.cc22e8","fde622a2.0e60a","6d3927a.22008d8","c72c58ce.65e9f8","e62c24fa.e3684","1b5f2b4f.aca795","95ad0920.569a4","e2da6767.ccfa","a0657145.883a08","b1f5c769.d97ce8","5b9b6d45.8e7b0c","de2ab70b.79ac78","28f35ef4.beafc2","563682bb.cf7c0c"]]},{"id":"608ae6e4.a0a4f","type":"exec","z":"c890f6c4.5f7ee","command":"oc create route passthrough --service ibm-nginx-svc cp4d-route","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":550,"y":3140,"wires":[["5ce7a61b.ba4e1"],[],[]]},{"id":"8dcceb57.3c0c7","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":380,"y":340,"wires":[["180e7820.f5b0a8"]]},{"id":"17823409.a5f8d4","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":640,"wires":[["269b228f.db3d6e"]]},{"id":"85987146.a257d8","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":800,"wires":[["bfbec512.9542c8"]]},{"id":"3353f921.730c76","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":940,"wires":[["a7f0a6b7.70c81"]]},{"id":"e53f3f37.8651e","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":1080,"wires":[["1389cc5d.06378c"]]},{"id":"efc16046.6d6c38","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":1240,"wires":[["fc2db262.5f1c1"]]},{"id":"bb83c741.39bc28","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":1400,"wires":[["24749aec.cbd3f6"]]},{"id":"3ce4c6d5.dd0db2","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":2320,"wires":[["65fc92ad.c16964"]]},{"id":"2005dc1e.9893fc","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":2480,"wires":[["47ac27c5.0562c8"]]},{"id":"6f77a932.5e571","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":2660,"wires":[["91239651.745658"]]},{"id":"57f6aeba.2c0168","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":2840,"wires":[["2d0fe927.a20c86"]]},{"id":"9db35076.3e88e8","type":"delay","z":"c890f6c4.5f7ee","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":3060,"wires":[["608ae6e4.a0a4f"]]},{"id":"14bf2818.bf933","type":"ui_button","z":"c890f6c4.5f7ee","name":"","group":"6effb9d.f44edc8","order":2,"width":0,"height":0,"passthru":false,"label":"Reset","tooltip":"","color":"#000000","bgcolor":"#FFFFCC","icon":"","payload":"\"Ready to reinstate CP4D !\"","payloadType":"str","topic":"","x":2030,"y":1920,"wires":[["2fd72886.cc22e8","fde622a2.0e60a","6d3927a.22008d8","c72c58ce.65e9f8","e62c24fa.e3684","1b5f2b4f.aca795","95ad0920.569a4","e2da6767.ccfa","a0657145.883a08","b1f5c769.d97ce8","5b9b6d45.8e7b0c","de2ab70b.79ac78","28f35ef4.beafc2","563682bb.cf7c0c"]]},{"id":"5ce7a61b.ba4e1","type":"debug","z":"c890f6c4.5f7ee","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1030,"y":3140,"wires":[]},{"id":"c62c8752.185e98","type":"inject","z":"65f4d4c1.1b0de4","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":780,"wires":[["2abeadca.c410da"]]},{"id":"2abeadca.c410da","type":"function","z":"65f4d4c1.1b0de4","name":"Watch PVC","func":"    msg.topic = \"/api/v1/watch/namespaces/\"+global.get('selProject')+\"/persistentvolumeclaims/\";\n\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":190,"y":860,"wires":[["3ece20cb.fb3e08"]]},{"id":"3ece20cb.fb3e08","type":"kubernetes-client-http","z":"65f4d4c1.1b0de4","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":330,"y":780,"wires":[["51bd24ef.365464"]]},{"id":"38d8fbf5.eda8f4","type":"debug","z":"65f4d4c1.1b0de4","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":910,"y":860,"wires":[]},{"id":"51bd24ef.365464","type":"change","z":"65f4d4c1.1b0de4","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.items","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":860,"wires":[["38d8fbf5.eda8f4","106d158e.90cc32"]]},{"id":"106d158e.90cc32","type":"template","z":"65f4d4c1.1b0de4","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<table>\n{{#payload}}\n<tr>\n<td>{{metadata.name}}</td><td>{{status.phase}}</td>\n</tr>\n{{/payload}}\n</table>\n","output":"str","x":680,"y":800,"wires":[["fecad5cd.dc9e68"]]},{"id":"fecad5cd.dc9e68","type":"ui_template","z":"65f4d4c1.1b0de4","group":"6effb9d.f44edc8","name":"PVC status","order":22,"width":"26","height":"6","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":890,"y":800,"wires":[["38d8fbf5.eda8f4"]]},{"id":"5871219c.97c258","type":"ui_button","z":"65f4d4c1.1b0de4","name":"","group":"6effb9d.f44edc8","order":21,"width":"0","height":"0","passthru":false,"label":"Check PVC status","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":140,"y":700,"wires":[["2abeadca.c410da"]]},{"id":"9903cfeb.a44a","type":"ui_button","z":"cc1ec809.b0912","name":"","group":"538095a8.8a9f74","order":1,"width":0,"height":0,"passthru":false,"label":"1. Create COS bucket (ROKS ONLY)","tooltip":"","color":"","bgcolor":"grey","icon":"","payload":"","payloadType":"str","topic":"","x":200,"y":160,"wires":[["27106d90.c04f72"]]},{"id":"27106d90.c04f72","type":"function","z":"cc1ec809.b0912","name":"","func":"var project=global.get('selProject');\nvar cluster_name=global.get('currentCluster');\nvar apikey=global.get('apikey');\nvar pvc=global.get('clonePVC');\nvar bucket=global.get('defaultBucket');\nmsg.payload={\"apikey\": apikey, \"cluster_name\": cluster_name, \"project\": project, \"pvc\": pvc,\"bucket\": bucket};\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":200,"wires":[["2b87af46.76071","dde88d62.752888"]]},{"id":"2b87af46.76071","type":"http request","z":"cc1ec809.b0912","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"http://cloudpak-provisioner.ibmcloudroks.net:8000/api/v1/Create_cosPVC/","tls":"","persist":false,"proxy":"","authType":"","x":450,"y":140,"wires":[["dde88d62.752888"]]},{"id":"dde88d62.752888","type":"debug","z":"cc1ec809.b0912","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":630,"y":220,"wires":[]},{"id":"b5e85ab6.ac6a08","type":"exec","z":"cc1ec809.b0912","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":850,"y":1280,"wires":[["14a4ce5f.2b6532"],["14a4ce5f.2b6532"],[]]},{"id":"14a4ce5f.2b6532","type":"join","z":"cc1ec809.b0912","name":"","mode":"auto","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1150,"y":1360,"wires":[["a39c6b90.4d856"]]},{"id":"666675b2.e8391c","type":"exec","z":"cc1ec809.b0912","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":850,"y":1440,"wires":[["14a4ce5f.2b6532"],["14a4ce5f.2b6532"],[]]},{"id":"a39c6b90.4d856","type":"debug","z":"cc1ec809.b0912","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1390,"y":1300,"wires":[]},{"id":"84c59c48.bf20c8","type":"ui_text","z":"18d4cd67.9cdadb","group":"82bd631c.dc015","order":1,"width":24,"height":1,"name":"Clone bucket label","label":" ","format":"COS clone information : {{msg.payload}}","layout":"row-left","x":1070,"y":240,"wires":[]},{"id":"d44d6b8e.63a008","type":"change","z":"18d4cd67.9cdadb","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext(\"defaultBucket\") & \" bucket attached to PVC \" & $globalContext(\"clonePVC\") & \" on cluster \" & $globalContext(\"currentCluster\")\t\t","tot":"jsonata"},{"t":"set","p":"params","pt":"msg","to":"\"All metadata stored locally at \" & $globalContext(\"baseDir\") & \"/clone\"","tot":"jsonata"},{"t":"set","p":"reinstatepullpvc","pt":"msg","to":"\"To pull metadata (YAMLs, State) from COS, create PVC with name \" & $globalContext(\"restoreMetadataPullPVC\") & \" either manually or by clicking the button below (only if target cluster is IBM ROKS)\"","tot":"jsonata"},{"t":"set","p":"clonepvc","pt":"msg","to":"\"Check to see if you have PVC for COS called \" & $globalContext(\"clonePVC\")","tot":"jsonata"},{"t":"set","p":"reinstateparams","pt":"msg","to":"\"All metadata stored locally at \" & $globalContext(\"baseDir\") & \"/reinstate\" & \" to reinstate to cluster \" & $globalContext(\"currentCluster\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":160,"wires":[["84c59c48.bf20c8","53620159.1582e8","ccd5a0a7.de94f8","acd2d3e7.bcf59","2ada4b26.d8f014"]]},{"id":"e153885f.66305","type":"change","z":"cc1ec809.b0912","name":"Reset","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1360,"wires":[[]]},{"id":"64b59414.ff27a4","type":"exec","z":"cc1ec809.b0912","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1250,"y":1540,"wires":[["291c5593.0e4062"],["291c5593.0e4062"],[]]},{"id":"174b5e45.a1c6d2","type":"exec","z":"cc1ec809.b0912","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1250,"y":1660,"wires":[["291c5593.0e4062"],["291c5593.0e4062"],[]]},{"id":"291c5593.0e4062","type":"join","z":"cc1ec809.b0912","name":"","mode":"auto","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1450,"y":1600,"wires":[[]]},{"id":"57ec2f12.b0cb58","type":"change","z":"cc1ec809.b0912","name":"Reset","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1600,"wires":[[]]},{"id":"ca95619b.19d49","type":"function","z":"fe6bf964.cbd89","name":"","func":"var podSpec={\"kind\":\"Pod\",\"apiVersion\":\"v1\",\"metadata\":{\"name\":\"copy-to-cos\"},\"spec\":{\"volumes\":[{\"name\":\"volume-to-copy\",\"persistentVolumeClaim\":{\"claimName\": global.get(\"clonePVC\")}}],\"containers\":[{\"name\":\"metadata-mover\",\"image\":\"busybox\",\"securityContext\":{\"privileged\":true},\"command\":[\"sleep\",\"3600\"],\"volumeMounts\":[{\"mountPath\":\"/clone-mount\",\"name\":\"volume-to-copy\"}]}],\"securityContext\":{\"runAsUser\":0}}};\nmsg.topic = \"/api/v1/namespaces/\"+global.get(\"selProject\")+\"/pods\";\nmsg.method = \"POST\";\nmsg.payload=podSpec;\nreturn msg;","outputs":1,"noerr":0,"x":1530,"y":860,"wires":[["493c2451.debcd4"]]},{"id":"493c2451.debcd4","type":"kubernetes-client-http","z":"fe6bf964.cbd89","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":1790,"y":800,"wires":[["45b23957.46ab7"]]},{"id":"684037de.7c7308","type":"exec","z":"fe6bf964.cbd89","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1570,"y":1000,"wires":[["48e83601.e18238","47d1c39d.72c434"],[],[]]},{"id":"6e828efb.c722d","type":"change","z":"cc1ec809.b0912","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"oc scale deploy \" & $split(payload, \",\")[0] & \" --replicas=\" & $split(payload, \",\")[1] & \" -n \" & $globalContext('selProject')\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":1540,"wires":[["3c4a802c.64a748"]]},{"id":"632c2f50.8b26b8","type":"change","z":"cc1ec809.b0912","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"oc scale sts \" & $split(payload, \",\")[0] & \" --replicas=\" & $split(payload, \",\")[1] & \" -n \" & $globalContext('selProject')\t\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":1660,"wires":[["d4ee2983.0e9a68"]]},{"id":"3c4a802c.64a748","type":"switch","z":"cc1ec809.b0912","name":"","property":"payload","propertyType":"msg","rules":[{"t":"null"},{"t":"empty"},{"t":"eq","v":"\"oc scale deploy  --replicas=\"","vt":"str"},{"t":"neq","v":"\"oc scale deploy  --replicas=\"","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":1010,"y":1540,"wires":[[],[],[],["64b59414.ff27a4","75ffabec.dcf67c"]]},{"id":"d4ee2983.0e9a68","type":"switch","z":"cc1ec809.b0912","name":"","property":"payload","propertyType":"msg","rules":[{"t":"null"},{"t":"empty"},{"t":"eq","v":"\"oc scale sts  --replicas=\"","vt":"str"},{"t":"neq","v":"\"oc scale sts  --replicas=\"","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":1010,"y":1660,"wires":[[],[],[],["174b5e45.a1c6d2","75ffabec.dcf67c"]]},{"id":"48e83601.e18238","type":"debug","z":"fe6bf964.cbd89","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1870,"y":1100,"wires":[]},{"id":"1056c539.68ab7b","type":"ui_button","z":"fe6bf964.cbd89","name":"","group":"82bd631c.dc015","order":22,"width":0,"height":0,"passthru":false,"label":"7. Upload metadata to COS","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":1340,"y":920,"wires":[["8cd73b00.51de68"]]},{"id":"47d1c39d.72c434","type":"ui_template","z":"fe6bf964.cbd89","group":"82bd631c.dc015","name":"Metadata copy status","order":23,"width":26,"height":12,"format":"<b>Files copied to COS bucket:</b>\n<pre>\n    {{msg.payload}}\n</pre>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":1880,"y":920,"wires":[[]]},{"id":"fb8a0916.132d2","type":"exec","z":"c890f6c4.5f7ee","command":"oc rsync restore-meta-po:/clone-mount/yamls ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Download spec info","x":660,"y":3520,"wires":[["ce832fcf.e14b48","c2b35b2a.1d6948"],["ce832fcf.e14b48"],[]]},{"id":"ce832fcf.e14b48","type":"debug","z":"c890f6c4.5f7ee","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":910,"y":3580,"wires":[]},{"id":"6743cc12.e418cc","type":"ui_button","z":"c890f6c4.5f7ee","name":"","group":"6effb9d.f44edc8","order":6,"width":0,"height":0,"passthru":false,"label":"3. Download metadata from COS","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":160,"y":3580,"wires":[["6dc2b124.9f4aa8"]]},{"id":"db33fa5.6c6d608","type":"ui_button","z":"c890f6c4.5f7ee","name":"","group":"6effb9d.f44edc8","order":4,"width":0,"height":0,"passthru":false,"label":"1. Create Reinstate COS metadata pull PVC (ROKS only)","tooltip":"","color":"","bgcolor":"grey","icon":"","payload":"","payloadType":"str","topic":"","x":230,"y":3200,"wires":[["daf5f5c.2d71008"]]},{"id":"daf5f5c.2d71008","type":"function","z":"c890f6c4.5f7ee","name":"","func":"var project=\"default\";\nvar cluster_name=global.get('currentCluster');\nvar apikey=global.get('apikey');\nvar pvc=global.get('restoreMetadataPullPVC');\nvar bucket=global.get('defaultBucket');\nmsg.payload={\"apikey\": apikey, \"cluster_name\": cluster_name, \"project\": project, \"pvc\": pvc,\"bucket\": bucket};\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":3280,"wires":[["e5493daf.d7ef6","e4073989.6ab738"]]},{"id":"e5493daf.d7ef6","type":"http request","z":"c890f6c4.5f7ee","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"http://cloudpak-provisioner.ibmcloudroks.net:8000/api/v1/Create_cosPVC/","tls":"","persist":false,"proxy":"","authType":"","x":490,"y":3240,"wires":[["e4073989.6ab738","b36c4592.4a5ce8"]]},{"id":"e4073989.6ab738","type":"debug","z":"c890f6c4.5f7ee","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":640,"y":3300,"wires":[]},{"id":"3cec6dd2.94fc02","type":"debug","z":"c890f6c4.5f7ee","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":810,"y":3380,"wires":[]},{"id":"6f6d85a1.f68784","type":"function","z":"c890f6c4.5f7ee","name":"","func":"var podSpec={\"kind\":\"Pod\",\"apiVersion\":\"v1\",\"metadata\":{\"name\":\"restore-meta-po\"},\"spec\":{\"volumes\":[{\"name\":\"volume-to-copy\",\"persistentVolumeClaim\":{\"claimName\": global.get(\"restoreMetadataPullPVC\")}}],\"containers\":[{\"name\":\"metadata-mover\",\"image\":\"busybox\",\"securityContext\":{\"privileged\":true},\"command\":[\"sleep\",\"3600\"],\"volumeMounts\":[{\"mountPath\":\"/clone-mount\",\"name\":\"volume-to-copy\"}]}],\"securityContext\":{\"runAsUser\":0}}};\nmsg.topic = \"/api/v1/namespaces/default/pods\";\nmsg.method = \"POST\";\nmsg.payload=podSpec;\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":3380,"wires":[["2d15f7de.5e351"]]},{"id":"2d15f7de.5e351","type":"kubernetes-client-http","z":"c890f6c4.5f7ee","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":510,"y":3440,"wires":[["3cec6dd2.94fc02","3c05cf1a.515bc"]]},{"id":"8a622995.9828d8","type":"ui_button","z":"c890f6c4.5f7ee","name":"","group":"6effb9d.f44edc8","order":5,"width":0,"height":0,"passthru":false,"label":"2. Create RSYNC pod","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":160,"y":3460,"wires":[["6f6d85a1.f68784"]]},{"id":"3d3b9d6f.629502","type":"exec","z":"c890f6c4.5f7ee","command":"oc rsync restore-meta-po:/clone-mount/state ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Download replicas info","x":660,"y":3640,"wires":[["ce832fcf.e14b48"],[],[]]},{"id":"86e08cea.db30a8","type":"inject","z":"2867c746.ca6108","name":"","topic":"","payload":"1","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":190,"y":40,"wires":[["e4740d0e.a0f6f","f17f9b.3c052068"]]},{"id":"58209d2b.724214","type":"http request","z":"2867c746.ca6108","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"http://cloudpak-provisioner.ibmcloudroks.net:8000/api/v1/getBuckets/","tls":"","persist":true,"proxy":"","authType":"","x":590,"y":80,"wires":[["c6a52830.2f313"]]},{"id":"e4740d0e.a0f6f","type":"function","z":"2867c746.ca6108","name":"Bucket search payload","func":"msg.payload={\"search_text\": global.get(\"bucketPattern\"), \"metadata\": {}};\nreturn msg;","outputs":1,"noerr":0,"x":360,"y":100,"wires":[["58209d2b.724214","be2e8268.674878"]]},{"id":"c6a52830.2f313","type":"file","z":"2867c746.ca6108","name":"Local bucket list cache","filename":"buckets.json","appendNewline":true,"createDir":false,"overwriteFile":"true","encoding":"none","x":850,"y":120,"wires":[["c439d771.f3c14"]]},{"id":"73c0ca28.29801c","type":"function","z":"cc1ec809.b0912","name":"","func":"// GET namespace\nmsg.topic = \"/api/v1/watch/namespaces/\"+global.get(\"selProject\")+\"/pods\";\nmsg.method = \"GET\";\nmsg.payload = {};\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":1860,"wires":[["b191e1cd.12fb98","95cff734.a34e5"]]},{"id":"95cff734.a34e5","type":"debug","z":"cc1ec809.b0912","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":970,"y":1920,"wires":[]},{"id":"2a399664.2c4332","type":"ui_table","z":"cc1ec809.b0912","group":"82bd631c.dc015","name":"Pod Status","order":11,"width":25,"height":9,"columns":[{"field":"Pod Name","title":"Pod Name","width":"","align":"left","formatter":"plaintext","formatterParams":{"target":"_blank"}},{"field":"Pod Status","title":"Status","width":"","align":"left","formatter":"html","formatterParams":{"target":"_blank"}}],"outputs":1,"cts":true,"x":770,"y":1940,"wires":[["95cff734.a34e5"]]},{"id":"2e89b2b2.9351a6","type":"inject","z":"cc1ec809.b0912","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":1780,"wires":[["73c0ca28.29801c"]]},{"id":"35131813.e6586","type":"function","z":"cc1ec809.b0912","name":"Load Pod status","func":"\nvar rmsg = {};\nrmsg = {\"payload\":{\"command\":\"setData\"}};\nnode.send(rmsg);\n\nvar payloadItems = msg.payload.items;\nvar podName=\"\";\nvar podStatus=\"\";\n\nvar podList = []\nfor (var i = 0; i < payloadItems.length; i++) {\n    podName = payloadItems[i].metadata.name;\n    podStatus = payloadItems[i].status.phase;\n    k = {};\n    k[\"Pod Name\"] = podName; \n    if(podStatus==\"Pending\")\n        podStatus = \"<div style='color: yellow;'>\"+podStatus+\"</div>\";\n    if(podStatus==\"Succeeded\" || podStatus==\"Running\")\n        podStatus = \"<div style='color: green;'>\"+podStatus+\"</div>\";\n    if(podStatus==\"Failed\")\n        podStatus = \"<div style='color: red;'>\"+podStatus+\"</div>\";\n    k[\"Pod Status\"] = podStatus; \n    podList.push(k);\n}\n\nmsg.payload = podList;\nreturn msg;","outputs":1,"noerr":0,"x":520,"y":1980,"wires":[["2a399664.2c4332"]]},{"id":"e1e53307.2904f8","type":"ui_button","z":"cc1ec809.b0912","name":"","group":"82bd631c.dc015","order":10,"width":0,"height":0,"passthru":false,"label":"Check Pod Status","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":200,"y":1860,"wires":[["73c0ca28.29801c"]]},{"id":"1f79c37c.70ffd5","type":"debug","z":"c890f6c4.5f7ee","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1310,"y":4020,"wires":[]},{"id":"30374695.58f1aa","type":"ui_button","z":"c890f6c4.5f7ee","name":"","group":"6effb9d.f44edc8","order":31,"width":0,"height":0,"passthru":false,"label":"8. Scale Up - Target","tooltip":"Scale up all Deployments and Statefulsets in Target","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":140,"y":3860,"wires":[["f41f46f1.0f3b98","8e3ce251.0ab498","4caf82b5.73ba74"]]},{"id":"f41f46f1.0f3b98","type":"change","z":"c890f6c4.5f7ee","name":"Deployment Replicas","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir') & \"/reinstate/state/deployment_replicas.csv\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":3800,"wires":[["362b54d.7c3ce2c"]]},{"id":"8e3ce251.0ab498","type":"change","z":"c890f6c4.5f7ee","name":"Statefulset Replicas","rules":[{"t":"set","p":"filename","pt":"msg","to":"$globalContext('baseDir') & \"/reinstate/state/statefulset_replicas.csv\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":3920,"wires":[["4ee629e5.0d6ba8"]]},{"id":"362b54d.7c3ce2c","type":"file in","z":"c890f6c4.5f7ee","name":"","filename":"","format":"lines","chunk":false,"sendError":false,"encoding":"none","x":610,"y":3800,"wires":[["d9261d51.3bbc4"]]},{"id":"4ee629e5.0d6ba8","type":"file in","z":"c890f6c4.5f7ee","name":"","filename":"","format":"lines","chunk":false,"sendError":false,"encoding":"none","x":610,"y":3920,"wires":[["6e15442f.81a364"]]},{"id":"f2568a3a.0b57f8","type":"exec","z":"c890f6c4.5f7ee","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1230,"y":3800,"wires":[["c0c56f17.fec138","50a9b371.a45f34"],["c0c56f17.fec138"],[]]},{"id":"971d82c1.9d45a8","type":"exec","z":"c890f6c4.5f7ee","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1230,"y":3920,"wires":[["c0c56f17.fec138"],["c0c56f17.fec138"],[]]},{"id":"c0c56f17.fec138","type":"join","z":"c890f6c4.5f7ee","name":"","mode":"auto","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1430,"y":3860,"wires":[[]]},{"id":"4caf82b5.73ba74","type":"change","z":"c890f6c4.5f7ee","name":"Reset","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":3860,"wires":[[]]},{"id":"d9261d51.3bbc4","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"oc scale deploy \" & $split(payload, \",\")[0] & \" --replicas=\" & $split(payload, \",\")[1]\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":3800,"wires":[["ef63706c.d8b42"]]},{"id":"6e15442f.81a364","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"oc scale sts \" & $split(payload, \",\")[0] & \" --replicas=\" & $split(payload, \",\")[1]\t\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":3920,"wires":[["47d51a2f.eff10c"]]},{"id":"ef63706c.d8b42","type":"switch","z":"c890f6c4.5f7ee","name":"","property":"payload","propertyType":"msg","rules":[{"t":"null"},{"t":"empty"},{"t":"eq","v":"\"oc scale deploy  --replicas=\"","vt":"str"},{"t":"neq","v":"\"oc scale deploy  --replicas=\"","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":990,"y":3800,"wires":[[],[],[],["f2568a3a.0b57f8","1f79c37c.70ffd5"]]},{"id":"47d51a2f.eff10c","type":"switch","z":"c890f6c4.5f7ee","name":"","property":"payload","propertyType":"msg","rules":[{"t":"null"},{"t":"empty"},{"t":"eq","v":"\"oc scale sts  --replicas=\"","vt":"str"},{"t":"neq","v":"\"oc scale sts  --replicas=\"","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":990,"y":3920,"wires":[[],[],[],["971d82c1.9d45a8","1f79c37c.70ffd5"]]},{"id":"7c767fa6.f88cb","type":"ui_button","z":"c890f6c4.5f7ee","name":"","group":"6effb9d.f44edc8","order":19,"width":0,"height":0,"passthru":false,"label":"5. Connect to COS bucket (ROKS only)","tooltip":"","color":"","bgcolor":"grey","icon":"","payload":"","payloadType":"str","topic":"","x":200,"y":4040,"wires":[["120242dd.1c2e0d","740199b7.0c78a8"]]},{"id":"740199b7.0c78a8","type":"function","z":"c890f6c4.5f7ee","name":"","func":"var project=global.get('selProject');\nvar cluster_name=global.get('currentCluster');\nvar apikey=global.get('apikey');\nvar pvc=global.get('clonePVC');\nvar bucket=global.get('defaultBucket');\nmsg.payload={\"apikey\": apikey, \"cluster_name\": cluster_name, \"project\": project, \"pvc\": pvc,\"bucket\": bucket};\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":4060,"wires":[["2bdaccfb.6b866c","94e5084e.66e36"]]},{"id":"2bdaccfb.6b866c","type":"http request","z":"c890f6c4.5f7ee","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"http://cloudpak-provisioner.ibmcloudroks.net:8000/api/v1/Create_cosPVC/","tls":"","persist":false,"proxy":"","authType":"","x":810,"y":4020,"wires":[["94e5084e.66e36"]]},{"id":"94e5084e.66e36","type":"debug","z":"c890f6c4.5f7ee","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":990,"y":4080,"wires":[]},{"id":"31092a07.eb90f6","type":"function","z":"2867c746.ca6108","name":"loadBucketInformation","func":"// rmsg = {\"payload\":{\"command\":\"setData\"}}\n\nrmsg = {}\nrmsg = {\"payload\":{\"command\":\"setData\"}}\n// msg.payload = {\"command\":\"clearData\"};\nnode.send(rmsg);\n\nkeys = msg.payload.Buckets;\n\nkeylist = []\nfor (var i = 0; i < keys.length; i++) {\n    bucketName = keys[i].bucket_name;\n    bucketDescription = keys[i].metadata.description;\n    k = {};\n    k[\"BucketName\"] = bucketName; \n    k[\"BucketDescription\"] = bucketDescription; \n\n    keylist.push(k);\n}\n\nmsg.payload = keylist;\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":200,"wires":[["f53782a1.b6c2a","f17f9b.3c052068","a797c295.8baec8"]]},{"id":"f53782a1.b6c2a","type":"ui_table","z":"2867c746.ca6108","group":"f3ba291f.15b57","name":"","order":16,"width":16,"height":9,"columns":[{"field":"BucketName","title":"Bucket Name","width":"20%","align":"left","formatter":"plaintext","formatterParams":{"target":"_blank"}},{"field":"BucketDescription","title":"Bucket Description","width":"70%","align":"left","formatter":"plaintext","formatterParams":{"target":"_blank"}}],"outputs":1,"cts":true,"x":1050,"y":200,"wires":[["d66524e5.a694a","9f01a528.a46be","eca44d95.992cf"]]},{"id":"c439d771.f3c14","type":"file in","z":"2867c746.ca6108","name":"Local bucket list cache","filename":"buckets.json","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":370,"y":200,"wires":[["7e61a287.42f72c"]]},{"id":"7e61a287.42f72c","type":"json","z":"2867c746.ca6108","name":"","property":"payload","action":"","pretty":false,"x":590,"y":180,"wires":[["31092a07.eb90f6"]]},{"id":"d66524e5.a694a","type":"debug","z":"2867c746.ca6108","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1110,"y":140,"wires":[]},{"id":"10afa4a7.569f23","type":"ui_button","z":"2867c746.ca6108","name":"","group":"f3ba291f.15b57","order":3,"width":4,"height":1,"passthru":false,"label":"Cache COS Buckets","tooltip":"","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":120,"y":80,"wires":[["e4740d0e.a0f6f","f17f9b.3c052068"]]},{"id":"9f01a528.a46be","type":"ui_form","z":"2867c746.ca6108","name":"COS metadata form","label":"","group":"f3ba291f.15b57","order":35,"width":16,"height":4,"options":[{"label":"Bucket Name","value":"BucketName","type":"text","required":false,"rows":null},{"label":"Clone Bucket Name","value":"CloneBucketName","type":"text","required":false,"rows":null},{"label":"Bucket Description","value":"BucketDescription","type":"multiline","required":false,"rows":3}],"formValue":{"BucketName":"","CloneBucketName":"","BucketDescription":""},"payload":"","submit":"save","cancel":"cancel","topic":"","x":160,"y":280,"wires":[["e8dbfb8c.56799","2b90221c.4bbba6"]]},{"id":"e8dbfb8c.56799","type":"function","z":"2867c746.ca6108","name":"Bucket metadata update payload","func":"msg.payload={\"bucket\": msg.payload.BucketName,\"metadata\": {\"description\": msg.payload.BucketDescription}};\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":280,"wires":[["a47cf42b.af5338"]]},{"id":"a47cf42b.af5338","type":"http request","z":"2867c746.ca6108","name":"","method":"POST","ret":"txt","paytoqs":false,"url":"cloudpak-provisioner.ibmcloudroks.net:8000/api/v1/addCOSMetadata/","tls":"","persist":false,"proxy":"","authType":"","x":810,"y":280,"wires":[[]]},{"id":"a35a35ba.6eef48","type":"debug","z":"c890f6c4.5f7ee","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":760,"y":2440,"wires":[]},{"id":"9ec56f3.b83dd9","type":"debug","z":"c890f6c4.5f7ee","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":780,"y":2320,"wires":[]},{"id":"ced52271.d65b9","type":"debug","z":"c890f6c4.5f7ee","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":300,"y":2300,"wires":[]},{"id":"2b90221c.4bbba6","type":"switch","z":"2867c746.ca6108","name":"Make a copy ?","property":"payload.CloneBucketName","propertyType":"msg","rules":[{"t":"empty"},{"t":"nempty"}],"checkall":"true","repair":false,"outputs":2,"x":220,"y":360,"wires":[["350b7c56.698074"],["25592fba.f8dc","928183ef.7c1f58"]]},{"id":"25592fba.f8dc","type":"debug","z":"2867c746.ca6108","name":"Need to copy","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":460,"y":480,"wires":[]},{"id":"350b7c56.698074","type":"debug","z":"2867c746.ca6108","name":"No need to copy","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":430,"y":320,"wires":[]},{"id":"928183ef.7c1f58","type":"function","z":"2867c746.ca6108","name":"Bucket copy payload","func":"msg.payload={\"source-bucket\": msg.payload.BucketName,\"destination-bucket\": msg.payload.CloneBucketName};\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":380,"wires":[["d431a66d.88677"]]},{"id":"d431a66d.88677","type":"http request","z":"2867c746.ca6108","name":"","method":"POST","ret":"txt","paytoqs":false,"url":"cloudpak-provisioner.ibmcloudroks.net:8000/api/v1/copyCosBucket/","tls":"","persist":false,"proxy":"","authType":"","x":690,"y":380,"wires":[["25592fba.f8dc"]]},{"id":"be2e8268.674878","type":"debug","z":"2867c746.ca6108","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":560,"y":140,"wires":[]},{"id":"6a873d4a.342354","type":"http request","z":"2867c746.ca6108","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"cloudpak-provisioner.ibmcloudroks.net:8000/api/v1/deleteCosBucket/","tls":"","persist":true,"proxy":"","authType":"","x":810,"y":640,"wires":[["d82c1c61.bf08a8"]]},{"id":"b7cba8f6.27d86","type":"function","z":"2867c746.ca6108","name":"Bucket search payload","func":"msg.payload={\"bucket_name\": global.get(\"bucketToDelete\")};\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":620,"wires":[["6a873d4a.342354"]]},{"id":"13c126f3.8c9d49","type":"ui_button","z":"2867c746.ca6108","name":"","group":"f3ba291f.15b57","order":5,"width":4,"height":1,"passthru":false,"label":"Delete COS Bucket","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":170,"y":640,"wires":[["b7cba8f6.27d86","d82c1c61.bf08a8"]]},{"id":"d82c1c61.bf08a8","type":"debug","z":"2867c746.ca6108","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":670,"y":720,"wires":[]},{"id":"eca44d95.992cf","type":"change","z":"2867c746.ca6108","name":"","rules":[{"t":"set","p":"bucketToDelete","pt":"global","to":"payload.BucketName","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"payload.BucketName","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":200,"wires":[["5b3c6c5d.c92f04"]]},{"id":"f17f9b.3c052068","type":"function","z":"2867c746.ca6108","name":"Check status","func":"if(msg.payload === \"1\"){\n    msg.colour = \"white\";\n    msg.background =\"blue\";\n    msg.label = \"Retreiving buckets\";\n    return msg;\n}\nelse{\n    msg.colour = \"white\";\n   msg.background = \"green\";\n   msg.label = \"Ready\";\nreturn msg;\n}","outputs":1,"noerr":0,"x":990,"y":40,"wires":[["ae625385.2ea818"]]},{"id":"ae625385.2ea818","type":"ui_button","z":"2867c746.ca6108","name":"","group":"f3ba291f.15b57","order":7,"width":4,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.colour}}","bgcolor":"{{msg.background}}","icon":"","payload":"","payloadType":"str","topic":"","x":1170,"y":40,"wires":[[]]},{"id":"53620159.1582e8","type":"ui_text","z":"18d4cd67.9cdadb","group":"82bd631c.dc015","order":3,"width":24,"height":1,"name":"Clone params","label":" ","format":"Clone parameters : {{msg.params}}","layout":"row-left","x":1060,"y":300,"wires":[]},{"id":"a1dc5e79.9bd5a","type":"ui_template","z":"bde43094.4c07f8","group":"9e369001.600718","name":"Explore","order":2,"width":24,"height":17,"format":"<iframe src=\"/controlplane\" width=\"95%\" height=\"95%\"> \n","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":1000,"y":940,"wires":[[]]},{"id":"d10ee151.e84c58","type":"ui_template","z":"bde43094.4c07f8","group":"28abd0c6.387a","name":"Home page","order":4,"width":22,"height":18,"format":"<iframe src=\"/selectOCPObjectAction\" width=\"95%\" height=\"65%\"></iframe>\n","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":1010,"y":860,"wires":[[]]},{"id":"7c413336.5fec8c","type":"inject","z":"bde43094.4c07f8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":760,"y":820,"wires":[["d10ee151.e84c58","a1dc5e79.9bd5a"]]},{"id":"a797c295.8baec8","type":"function","z":"2867c746.ca6108","name":"Display bucket search information","func":"msg.colour = \"white\";\nmsg.background =\"gray\";\nmsg.label = \"Showing buckets starting with \" + global.get(\"bucketPattern\") + \" (Config parameter - bucketPattern)\";\nreturn msg;\n","outputs":1,"noerr":0,"x":1040,"y":380,"wires":[["93413c4f.38fef8"]]},{"id":"93413c4f.38fef8","type":"ui_button","z":"2867c746.ca6108","name":"","group":"f3ba291f.15b57","order":10,"width":16,"height":1,"passthru":false,"label":"{{msg.label}}","tooltip":"","color":"{{msg.colour}}","bgcolor":"{{msg.background}}","icon":"","payload":"","payloadType":"str","topic":"","x":1150,"y":460,"wires":[[]]},{"id":"ccd5a0a7.de94f8","type":"ui_text","z":"18d4cd67.9cdadb","group":"6effb9d.f44edc8","order":3,"width":"24","height":"1","name":"Reinstate metadata PVC","label":" ","format":"OPTIONAL STEP : Metadata pull PVC : {{msg.reinstatepullpvc}}","layout":"row-left","x":1090,"y":360,"wires":[]},{"id":"7d6ea721.c826b8","type":"exec","z":"c890f6c4.5f7ee","command":"oc project ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Set current project","x":210,"y":220,"wires":[["c7971b92.9fcfc8"],[],[]]},{"id":"c7971b92.9fcfc8","type":"change","z":"c890f6c4.5f7ee","name":"Set current project","rules":[{"t":"set","p":"payload","pt":"msg","to":"selProject","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":160,"wires":[["9ead4fd2.6475d"]]},{"id":"10865e61.4f15a2","type":"change","z":"c890f6c4.5f7ee","name":"Set current project","rules":[{"t":"set","p":"payload","pt":"msg","to":"selProject","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":240,"wires":[["c8bd44a4.c659c8"]]},{"id":"acd2d3e7.bcf59","type":"ui_text","z":"18d4cd67.9cdadb","group":"6effb9d.f44edc8","order":20,"width":"24","height":"1","name":"Reinstate data PVC","label":" ","format":"Metadata pull PVC : {{msg.clonepvc}}","layout":"row-left","x":1070,"y":420,"wires":[]},{"id":"2ada4b26.d8f014","type":"ui_text","z":"18d4cd67.9cdadb","group":"6effb9d.f44edc8","order":1,"width":"24","height":"1","name":"Reinstate params","label":" ","format":"INFO: Reinstate parameters : {{msg.reinstateparams}}","layout":"row-left","x":1070,"y":480,"wires":[]},{"id":"6dc2b124.9f4aa8","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext(\"baseDir\") & \"/reinstate\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":3580,"wires":[["3d3b9d6f.629502","fb8a0916.132d2"]]},{"id":"b191e1cd.12fb98","type":"kubernetes-client-http","z":"cc1ec809.b0912","kubernetesClientConfig":"90a015c3.9a2b3","name":"OCP Cluster Config","x":590,"y":1860,"wires":[["35131813.e6586"]]},{"id":"8cd73b00.51de68","type":"change","z":"fe6bf964.cbd89","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"oc rsync \" & $globalContext(\"baseDir\") & \"/clone/\" & \" copy-to-cos:/clone-mount\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1360,"y":1000,"wires":[["684037de.7c7308"]]},{"id":"e6d15493.9dd778","type":"exec","z":"cc1ec809.b0912","command":"oc create serviceaccount my-service-account -n ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Create Service Account","x":530,"y":760,"wires":[["a7edd74b.68bb68"],[],[]]},{"id":"4c089394.3e9a44","type":"exec","z":"cc1ec809.b0912","command":"oc adm policy add-scc-to-user privileged -z my-service-account -n ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Service Account - Add Policy","x":700,"y":840,"wires":[["19dc02d7.ed9605"],[],[]]},{"id":"aa50a5c9.27933","type":"change","z":"cc1ec809.b0912","name":"Set current project","rules":[{"t":"set","p":"payload","pt":"msg","to":"selProject","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":740,"wires":[["e6d15493.9dd778"]]},{"id":"a7edd74b.68bb68","type":"change","z":"cc1ec809.b0912","name":"Set current project","rules":[{"t":"set","p":"payload","pt":"msg","to":"selProject","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":820,"wires":[["4c089394.3e9a44"]]},{"id":"39522620.a19252","type":"http in","z":"18d4cd67.9cdadb","name":"Quick Config","url":"/quickConfig","method":"post","upload":false,"swaggerDoc":"","x":190,"y":580,"wires":[["f892468.c732db8","a97c3e24.5c2c18"]]},{"id":"76edc60f.f11368","type":"http response","z":"18d4cd67.9cdadb","name":"","statusCode":"","headers":{},"x":730,"y":580,"wires":[]},{"id":"f892468.c732db8","type":"change","z":"18d4cd67.9cdadb","name":"","rules":[{"t":"set","p":"selProject","pt":"global","to":"payload.txtProject","tot":"msg"},{"t":"set","p":"baseDir","pt":"global","to":"payload.txtBaseDir","tot":"msg"},{"t":"set","p":"clonePVC","pt":"global","to":"payload.txtClonePVC","tot":"msg"},{"t":"set","p":"currentCluster","pt":"global","to":"payload.txtCurrentCluster","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":580,"wires":[["76edc60f.f11368","300ac0bd.917a5"]]},{"id":"272207e3.0ef4f8","type":"ui_toast","z":"c890f6c4.5f7ee","position":"top right","displayTime":"10","highlight":"green","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"Notifications","x":960,"y":3240,"wires":[]},{"id":"b36c4592.4a5ce8","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"COS metadata pull PVC creation initiated (approx time - 2 minutes), check using \"oc get pvc -n default\"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":3240,"wires":[["272207e3.0ef4f8"]]},{"id":"92dbe947.e65b","type":"inject","z":"c890f6c4.5f7ee","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":620,"y":3180,"wires":[["b36c4592.4a5ce8"]]},{"id":"3c05cf1a.515bc","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Creating RSYNC POD (restore-meta-po) in Project Default to get metadata from COS","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":820,"y":3340,"wires":[["272207e3.0ef4f8"]]},{"id":"c2b35b2a.1d6948","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"Download metadata to \" & $globalContext(\"baseDir\") & \"/reinstate complete\"\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":3480,"wires":[["272207e3.0ef4f8"]]},{"id":"56929756.0af13","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext(\"clonePVC\") & \" -n \" & $globalContext(\"selProject\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":160,"y":4160,"wires":[["59fedc7.bf99b24"]]},{"id":"59fedc7.bf99b24","type":"exec","z":"c890f6c4.5f7ee","command":"oc delete pvc ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":320,"y":4340,"wires":[["2e0fd92b.11a80e"],["2e0fd92b.11a80e"],[]]},{"id":"d83c3422.69028","type":"exec","z":"c890f6c4.5f7ee","command":"sed ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Fix JOBS YAML","x":680,"y":4160,"wires":[["94e5084e.66e36"],[],[]]},{"id":"120242dd.1c2e0d","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"-i '' '/controller-uid/d' \" & $globalContext(\"baseDir\") & \"/reinstate/yamls/\" & $globalContext(\"fileJobs\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":4180,"wires":[["d83c3422.69028"]]},{"id":"d15822e6.bf13f8","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Reinstating data to the PVCs now, monitor progress using \"oc get jobs|grep reinstate\"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":3040,"wires":[["272207e3.0ef4f8"]]},{"id":"50a9b371.a45f34","type":"change","z":"c890f6c4.5f7ee","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Scaling up the deployments and statefulsets, check progress using \"oc get po|grep 0/|grep -vi Completed\"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":3640,"wires":[["272207e3.0ef4f8"]]},{"id":"801714c9.b758d","type":"inject","z":"c890f6c4.5f7ee","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":4120,"wires":[["56929756.0af13"]]},{"id":"5b3c6c5d.c92f04","type":"ui_text","z":"2867c746.ca6108","group":"f3ba291f.15b57","order":13,"width":16,"height":1,"name":"Selected bucket label","label":"","format":"Selected bucket - {{msg.payload}}","layout":"row-left","x":1410,"y":300,"wires":[]},{"id":"2e0fd92b.11a80e","type":"debug","z":"c890f6c4.5f7ee","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":560,"y":4280,"wires":[]},{"id":"e28a2d70.2bcfe","type":"ui_switch","z":"cc1ec809.b0912","name":"","label":"Clone/Reinstate cluster on IBM ROKS (Yes/No)","tooltip":"","group":"28abd0c6.387a","order":2,"width":9,"height":1,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"{\"group\":{\"hide\":[\"Clone_ROKS\"]}}","onvalueType":"json","onicon":"","oncolor":"blue","offvalue":"{\"group\":{\"show\":[\"Clone_ROKS\"]}}","offvalueType":"json","officon":"","offcolor":"grey","x":220,"y":40,"wires":[["37cfe573.8b002a"]]},{"id":"37cfe573.8b002a","type":"ui_ui_control","z":"cc1ec809.b0912","name":"","x":520,"y":40,"wires":[[]]},{"id":"25aa8f44.be4268","type":"ui_text","z":"cc1ec809.b0912","group":"c3ed5604.9f1818","order":2,"width":"17","height":"6","name":"Log viewer","label":"Activity log","format":"{{msg.payload}}","layout":"col-center","x":640,"y":2160,"wires":[]},{"id":"ba88349d.606d2","type":"ui_button","z":"cc1ec809.b0912","name":"","group":"c3ed5604.9f1818","order":1,"width":"26","height":"1","passthru":false,"label":"Activity log","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":300,"y":2120,"wires":[["9e1ca7a2.1132b"]]},{"id":"9e1ca7a2.1132b","type":"file in","z":"cc1ec809.b0912","name":"","filename":"activitiy.log","format":"","chunk":false,"sendError":false,"encoding":"none","x":460,"y":2220,"wires":[["25aa8f44.be4268","db960aa8.5b447"]]},{"id":"db960aa8.5b447","type":"debug","z":"cc1ec809.b0912","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":760,"y":2280,"wires":[]},{"id":"73aae61e.5dc7f","type":"inject","z":"18d4cd67.9cdadb","name":"","topic":"","payload":"apikey","payloadType":"global","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":800,"wires":[["151a1e0d.95275a"]]},{"id":"151a1e0d.95275a","type":"debug","z":"18d4cd67.9cdadb","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":620,"y":800,"wires":[]}]